var xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ic(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var ep={exports:{}},_i={},tp={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=Symbol.for("react.element"),xg=Symbol.for("react.portal"),hg=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),vg=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),bg=Symbol.for("react.context"),jg=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),wg=Symbol.for("react.memo"),Ng=Symbol.for("react.lazy"),_u=Symbol.iterator;function Sg(e){return e===null||typeof e!="object"?null:(e=_u&&e[_u]||e["@@iterator"],typeof e=="function"?e:null)}var np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rp=Object.assign,sp={};function js(e,t,r){this.props=e,this.context=t,this.refs=sp,this.updater=r||np}js.prototype.isReactComponent={};js.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};js.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function op(){}op.prototype=js.prototype;function lc(e,t,r){this.props=e,this.context=t,this.refs=sp,this.updater=r||np}var dc=lc.prototype=new op;dc.constructor=lc;rp(dc,js.prototype);dc.isPureReactComponent=!0;var Eu=Array.isArray,ap=Object.prototype.hasOwnProperty,cc={current:null},ip={key:!0,ref:!0,__self:!0,__source:!0};function lp(e,t,r){var s,o={},a=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)ap.call(t,s)&&!ip.hasOwnProperty(s)&&(o[s]=t[s]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];o.children=d}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)o[s]===void 0&&(o[s]=l[s]);return{$$typeof:No,type:e,key:a,ref:i,props:o,_owner:cc.current}}function Cg(e,t){return{$$typeof:No,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uc(e){return typeof e=="object"&&e!==null&&e.$$typeof===No}function _g(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Du=/\/+/g;function nl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_g(""+e.key):t.toString(36)}function _a(e,t,r,s,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case No:case xg:i=!0}}if(i)return i=e,o=o(i),e=s===""?"."+nl(i,0):s,Eu(o)?(r="",e!=null&&(r=e.replace(Du,"$&/")+"/"),_a(o,t,r,"",function(u){return u})):o!=null&&(uc(o)&&(o=Cg(o,r+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Du,"$&/")+"/")+e)),t.push(o)),1;if(i=0,s=s===""?".":s+":",Eu(e))for(var l=0;l<e.length;l++){a=e[l];var d=s+nl(a,l);i+=_a(a,t,r,d,o)}else if(d=Sg(e),typeof d=="function")for(e=d.call(e),l=0;!(a=e.next()).done;)a=a.value,d=s+nl(a,l++),i+=_a(a,t,r,d,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ea(e,t,r){if(e==null)return e;var s=[],o=0;return _a(e,s,"","",function(a){return t.call(r,a,o++)}),s}function Eg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},Ea={transition:null},Dg={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:Ea,ReactCurrentOwner:cc};function dp(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ea,forEach:function(e,t,r){ea(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ea(e,function(){t++}),t},toArray:function(e){return ea(e,function(t){return t})||[]},only:function(e){if(!uc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=js;de.Fragment=hg;de.Profiler=vg;de.PureComponent=lc;de.StrictMode=gg;de.Suspense=kg;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dg;de.act=dp;de.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=rp({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=cc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)ap.call(t,d)&&!ip.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:No,type:e.type,key:o,ref:a,props:s,_owner:i}};de.createContext=function(e){return e={$$typeof:bg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yg,_context:e},e.Consumer=e};de.createElement=lp;de.createFactory=function(e){var t=lp.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:jg,render:e}};de.isValidElement=uc;de.lazy=function(e){return{$$typeof:Ng,_payload:{_status:-1,_result:e},_init:Eg}};de.memo=function(e,t){return{$$typeof:wg,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=Ea.transition;Ea.transition={};try{e()}finally{Ea.transition=t}};de.unstable_act=dp;de.useCallback=function(e,t){return st.current.useCallback(e,t)};de.useContext=function(e){return st.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return st.current.useDeferredValue(e)};de.useEffect=function(e,t){return st.current.useEffect(e,t)};de.useId=function(){return st.current.useId()};de.useImperativeHandle=function(e,t,r){return st.current.useImperativeHandle(e,t,r)};de.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return st.current.useMemo(e,t)};de.useReducer=function(e,t,r){return st.current.useReducer(e,t,r)};de.useRef=function(e){return st.current.useRef(e)};de.useState=function(e){return st.current.useState(e)};de.useSyncExternalStore=function(e,t,r){return st.current.useSyncExternalStore(e,t,r)};de.useTransition=function(){return st.current.useTransition()};de.version="18.3.1";tp.exports=de;var E=tp.exports;const Ag=ic(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=E,Tg=Symbol.for("react.element"),Bg=Symbol.for("react.fragment"),Lg=Object.prototype.hasOwnProperty,Mg=Pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Og={key:!0,ref:!0,__self:!0,__source:!0};function cp(e,t,r){var s,o={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Lg.call(t,s)&&!Og.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:Tg,type:e,key:a,ref:i,props:o,_owner:Mg.current}}_i.Fragment=Bg;_i.jsx=cp;_i.jsxs=cp;ep.exports=_i;var n=ep.exports;const nd=["draft","planned","registrations_open","in_progress","completed","cancelled"],Qa={draft:"Brouillon",planned:"Planifiée",registrations_open:"Inscriptions ouvertes",in_progress:"En cours",completed:"Terminée",cancelled:"Annulée"};async function me(e,t={}){const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!r.ok){let s=`${r.status} ${r.statusText}`;try{const o=await r.json();o!=null&&o.error&&(s=o.error)}catch{}throw new Error(s)}return r.status===204?null:r.json()}function Fg({training:e,data:t,busy:r,onBack:s,onRefresh:o,actions:a}){const[i,l]=E.useState("info"),d=t.trainingSessions.filter(x=>x.trainingId===e.id),u=t.trainingRegistrations.filter(x=>x.trainingId===e.id),c=t.trainingDocuments.filter(x=>x.trainingId===e.id),f=t.trainingExpenses.filter(x=>x.trainingId===e.id),p=t.trainingAttendances,w=u.reduce((x,h)=>x+Number(h.amountPaid||0),0),m=f.reduce((x,h)=>x+Number(h.amount||0),0);return n.jsx("main",{className:"min-h-screen bg-stone-50 px-4 py-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",onClick:s,children:"Retour Kanban"}),n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",onClick:o,children:"Rafraîchir"}),r&&n.jsx("span",{className:"text-xs text-stone-500",children:"Synchronisation..."})]}),n.jsxs("header",{className:"rounded-2xl border border-stone-200 bg-white p-5",children:[n.jsx("h1",{className:"text-2xl font-semibold text-stone-900",children:e.title}),n.jsxs("p",{className:"text-stone-600 text-sm",children:[Qa[e.status]," · ",e.price,"€ · max ",e.maxParticipants]})]}),n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:["info","sessions","registrations","attendances","documents","checklist","finances"].map(x=>n.jsx("button",{className:`rounded px-3 py-2 text-sm ${i===x?"bg-[#B01A19] text-white":"bg-stone-100 text-stone-700"}`,onClick:()=>l(x),children:x},x))}),i==="info"&&n.jsxs("div",{className:"space-y-2 text-sm text-stone-700",children:[n.jsx("p",{children:e.description||"Aucune description."}),n.jsxs("p",{children:["Note coordination: ",e.coordinatorNote||"-"]}),n.jsx("div",{className:"flex gap-2",children:nd.map(x=>n.jsx("button",{className:"rounded border border-stone-300 px-2 py-1 text-xs",onClick:()=>a.updateTrainingStatus(e.id,x),children:Qa[x]},x))})]}),i==="sessions"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:()=>a.addSession(e.id),children:"Ajouter session"}),d.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune session."}):d.map(x=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between",children:[n.jsxs("span",{children:[x.startDate," → ",x.endDate]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-stone-700",onClick:()=>a.editSession(x.id),children:"Modifier"}),n.jsx("button",{className:"text-red-600",onClick:()=>a.deleteSession(x.id),children:"Supprimer"})]})]},x.id))]}),i==="registrations"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:()=>a.addRegistration(e.id),children:"Ajouter participant"}),u.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune inscription."}):u.map(x=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between",children:[n.jsxs("span",{children:[x.contactName," · ",x.paymentStatus," · ",x.amountPaid,"€"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"text-stone-700",onClick:()=>a.editRegistration(x.id),children:"Modifier"}),n.jsx("button",{className:"text-indigo-700",onClick:()=>a.updatePaymentStatus(x.id),children:"Paiement"}),n.jsx("button",{className:"text-red-600",onClick:()=>a.deleteRegistration(x.id),children:"Supprimer"})]})]},x.id))]}),i==="attendances"&&n.jsx("div",{className:"space-y-2",children:u.length===0||d.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Pas de grille présence (sessions ou inscriptions manquantes)."}):u.map(x=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm",children:[n.jsx("p",{className:"font-medium",children:x.contactName}),n.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:d.map(h=>{const y=p.find(g=>g.registrationId===x.id&&g.sessionId===h.id);return n.jsxs("button",{className:`rounded border px-2 py-1 text-xs ${y!=null&&y.isPresent?"border-emerald-500 text-emerald-700":"border-stone-300 text-stone-700"}`,onClick:()=>a.markAttendance(x.id,h.id,!(y!=null&&y.isPresent)),children:[h.startDate,": ",y!=null&&y.isPresent?"présent":"absent"]},h.id)})})]},x.id))}),i==="documents"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:()=>a.addDocument(e.id),children:"Ajouter document"}),c.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun document."}):c.map(x=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between",children:[n.jsxs("span",{children:[x.name," · ",x.type]}),n.jsx("button",{className:"text-red-600",onClick:()=>a.deleteDocument(x.id),children:"Supprimer"})]},x.id))]}),i==="checklist"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:()=>a.addChecklistItem(e.id),children:"Ajouter item"}),(e.checklistItems||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Checklist vide."}):e.checklistItems.map((x,h)=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between",children:[n.jsx("button",{className:(e.checkedItems||[]).includes(h)?"line-through text-stone-500":"",onClick:()=>a.toggleChecklistItem(e.id,h),children:x}),n.jsx("button",{className:"text-red-600",onClick:()=>a.removeChecklistItem(e.id,h),children:"Supprimer"})]},`${x}-${h}`))]}),i==="finances"&&n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Recettes: ",w,"€"]}),n.jsxs("p",{children:["Dépenses: ",m,"€"]}),n.jsxs("p",{children:["Rentabilité: ",w-m,"€"]}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:()=>a.addExpense(e.id),children:"Ajouter dépense"}),f.map(x=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between",children:[n.jsxs("span",{children:[x.date," · ",x.category," · ",x.amount,"€"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-stone-700",onClick:()=>a.editExpense(x.id),children:"Modifier"}),n.jsx("button",{className:"text-red-600",onClick:()=>a.deleteExpense(x.id),children:"Supprimer"})]})]},x.id))]})]})]})})}function Rg({initialTrainingId:e}){const t=window.location.pathname,[r,s]=E.useState(!0),[o,a]=E.useState(!1),[i,l]=E.useState(null),[d,u]=E.useState(null),[c,f]=E.useState(t.includes("/app/academy/calendar")?"calendar":"kanban"),[p,w]=E.useState({trainingTypes:[],trainings:[],trainingSessions:[],trainingLocations:[],trainingRegistrations:[],trainingAttendances:[],trainingDocuments:[],trainingExpenses:[],ideaNotes:[],members:[],stats:{byStatus:{},total:0}}),[m,x]=E.useState(e||null),[h,y]=E.useState(null),[g,j]=E.useState("month"),[v,N]=E.useState(()=>new Date),[S,A]=E.useState(""),[D,R]=E.useState("all"),[P,I]=E.useState("all"),T=E.useCallback(async()=>{const k=await me("/api/v1/academy");w(k)},[]);E.useEffect(()=>{let k=!0;async function b(){s(!0);try{await T()}catch(K){k&&l(K.message)}finally{k&&s(!1)}}return b(),()=>{k=!1}},[T]);const W=E.useCallback(async(k,b={refresh:!0})=>{a(!0),l(null);try{return await k(),b.refresh&&await T(),!0}catch(K){return l(K.message),!1}finally{a(!1)}},[T]),O=E.useMemo(()=>({createTrainingType:()=>{const k=window.prompt("Nom du type de formation");k&&W(()=>me("/api/v1/academy/training-types",{method:"POST",body:JSON.stringify({name:k,description:"",checklist_template:["Définir contenu"],photo_gallery:[],trainer_ids:[]})}))},deleteTrainingType:k=>W(()=>me(`/api/v1/academy/training-types/${k}`,{method:"DELETE"})),editTrainingType:k=>{const b=p.trainingTypes.find(ee=>ee.id===k);if(!b)return;const K=window.prompt("Nom du type",b.name);if(!K)return;const re=window.prompt("Description",b.description||"")||"";W(()=>me(`/api/v1/academy/training-types/${k}`,{method:"PATCH",body:JSON.stringify({name:K,description:re})}))},createLocation:()=>{const k=window.prompt("Nom du lieu");k&&W(()=>me("/api/v1/academy/locations",{method:"POST",body:JSON.stringify({name:k,address:"",description:"",capacity:20,has_accommodation:!1,photo_gallery:[],compatible_training_type_ids:[]})}))},deleteLocation:k=>W(()=>me(`/api/v1/academy/locations/${k}`,{method:"DELETE"})),editLocation:k=>{const b=p.trainingLocations.find($=>$.id===k);if(!b)return;const K=window.prompt("Nom du lieu",b.name);if(!K)return;const re=window.prompt("Adresse",b.address||"")||"",ee=Number(window.prompt("Capacité",String(b.capacity||0))||b.capacity||0);W(()=>me(`/api/v1/academy/locations/${k}`,{method:"PATCH",body:JSON.stringify({name:K,address:re,capacity:ee})}))},createTraining:()=>{if(p.trainingTypes.length===0){l("Créez d’abord un type de formation.");return}const k=window.prompt(`Type ID (${p.trainingTypes.map(K=>K.id).join(", ")})`,p.trainingTypes[0].id),b=window.prompt("Titre de la formation");!k||!b||W(()=>me("/api/v1/academy/trainings",{method:"POST",body:JSON.stringify({training_type_id:k,title:b,price:180,max_participants:20,requires_accommodation:!1,description:"",coordinator_note:""})}))},deleteTraining:k=>W(()=>me(`/api/v1/academy/trainings/${k}`,{method:"DELETE"})),editTraining:k=>{const b=p.trainings.find($=>$.id===k);if(!b)return;const K=window.prompt("Titre",b.title);if(!K)return;const re=Number(window.prompt("Prix",String(b.price||0))||b.price||0),ee=Number(window.prompt("Participants max",String(b.maxParticipants||0))||b.maxParticipants||0);W(()=>me(`/api/v1/academy/trainings/${k}`,{method:"PATCH",body:JSON.stringify({title:K,price:re,max_participants:ee})}))},updateTrainingStatus:(k,b)=>W(()=>me(`/api/v1/academy/trainings/${k}/status`,{method:"PATCH",body:JSON.stringify({status:b})})),addSession:k=>W(()=>me(`/api/v1/academy/trainings/${k}/sessions`,{method:"POST",body:JSON.stringify({start_date:new Date().toISOString().slice(0,10),end_date:new Date().toISOString().slice(0,10),description:"",location_ids:[],trainer_ids:[],assistant_ids:[]})})),editSession:k=>{const b=p.trainingSessions.find(ee=>ee.id===k);if(!b)return;const K=window.prompt("Date début (YYYY-MM-DD)",b.startDate),re=window.prompt("Date fin (YYYY-MM-DD)",b.endDate);!K||!re||W(()=>me(`/api/v1/academy/sessions/${k}`,{method:"PATCH",body:JSON.stringify({start_date:K,end_date:re,description:b.description,location_ids:b.locationIds||[],trainer_ids:b.trainerIds||[],assistant_ids:b.assistantIds||[]})}))},deleteSession:k=>W(()=>me(`/api/v1/academy/sessions/${k}`,{method:"DELETE"})),addRegistration:k=>{const b=window.prompt("Nom du participant");b&&W(()=>me(`/api/v1/academy/trainings/${k}/registrations`,{method:"POST",body:JSON.stringify({contact_name:b,contact_email:"",amount_paid:0,payment_status:"pending",internal_note:""})}))},deleteRegistration:k=>W(()=>me(`/api/v1/academy/registrations/${k}`,{method:"DELETE"})),editRegistration:k=>{const b=p.trainingRegistrations.find(ee=>ee.id===k);if(!b)return;const K=window.prompt("Nom participant",b.contactName);if(!K)return;const re=window.prompt("Email",b.contactEmail||"")||"";W(()=>me(`/api/v1/academy/registrations/${k}`,{method:"PATCH",body:JSON.stringify({contact_name:K,contact_email:re,amount_paid:b.amountPaid,payment_status:b.paymentStatus,internal_note:b.internalNote||""})}))},updatePaymentStatus:k=>{const b=window.prompt("Status paiement (pending/partial/paid)","partial"),K=Number(window.prompt("Montant payé","90")||0);b&&W(()=>me(`/api/v1/academy/registrations/${k}/payment-status`,{method:"PATCH",body:JSON.stringify({status:b,amount_paid:K})}))},markAttendance:(k,b,K)=>W(()=>me("/api/v1/academy/attendance",{method:"POST",body:JSON.stringify({registration_id:k,session_id:b,is_present:K,note:""})})),addDocument:k=>{const b=window.prompt("Nom du document"),K=window.prompt("URL du document");!b||!K||W(()=>me(`/api/v1/academy/trainings/${k}/documents`,{method:"POST",body:JSON.stringify({name:b,document_type:"link",url:K})}))},deleteDocument:k=>W(()=>me(`/api/v1/academy/documents/${k}`,{method:"DELETE"})),toggleChecklistItem:(k,b)=>W(()=>me(`/api/v1/academy/trainings/${k}/checklist/toggle/${b}`,{method:"PATCH"})),addChecklistItem:k=>{const b=window.prompt("Nouvel item checklist");b&&W(()=>me(`/api/v1/academy/trainings/${k}/checklist`,{method:"POST",body:JSON.stringify({item:b})}))},removeChecklistItem:(k,b)=>W(()=>me(`/api/v1/academy/trainings/${k}/checklist/${b}`,{method:"DELETE"})),addExpense:k=>{const b=window.prompt("Description dépense","Location salle"),K=Number(window.prompt("Montant","120")||0);W(()=>me(`/api/v1/academy/trainings/${k}/expenses`,{method:"POST",body:JSON.stringify({category:"location",description:b,amount:K,date:new Date().toISOString().slice(0,10)})}))},editExpense:k=>{const b=p.trainingExpenses.find(ee=>ee.id===k);if(!b)return;const K=window.prompt("Description dépense",b.description||"")||"",re=Number(window.prompt("Montant",String(b.amount||0))||b.amount||0);W(()=>me(`/api/v1/academy/expenses/${k}`,{method:"PATCH",body:JSON.stringify({category:b.category,description:K,amount:re,date:b.date})}))},deleteExpense:k=>W(()=>me(`/api/v1/academy/expenses/${k}`,{method:"DELETE"})),createIdeaNote:()=>{const k=window.prompt("Titre de la note idée");k&&W(()=>me("/api/v1/academy/idea-notes",{method:"POST",body:JSON.stringify({category:"subject",title:k,content:"",tags:[]})}))},editIdeaNote:k=>{const b=p.ideaNotes.find($=>$.id===k);if(!b)return;const K=window.prompt("Titre",b.title);if(!K)return;const re=window.prompt("Contenu",b.content||"")||"",ee=(window.prompt("Tags séparés par virgule",(b.tags||[]).join(", "))||"").split(",").map($=>$.trim()).filter(Boolean);W(()=>me(`/api/v1/academy/idea-notes/${k}`,{method:"PATCH",body:JSON.stringify({category:b.category,title:K,content:re,tags:ee})}))},deleteIdeaNote:k=>W(()=>me(`/api/v1/academy/idea-notes/${k}`,{method:"DELETE"})),viewReporting:async()=>{const k=await me("/api/v1/academy/reporting");y(k),f("reporting")}}),[p,W]),B=p.trainings.find(k=>k.id===m),z=E.useMemo(()=>p.trainings.filter(k=>{var b,K;if(D!=="all"&&k.status!==D||P!=="all"&&k.trainingTypeId!==P)return!1;if(S.trim()!==""){const re=S.trim().toLowerCase(),ee=((K=(b=p.trainingTypes.find(X=>X.id===k.trainingTypeId))==null?void 0:b.name)==null?void 0:K.toLowerCase())||"";if(!`${k.title} ${k.description||""} ${k.coordinatorNote||""} ${ee}`.toLowerCase().includes(re))return!1}return!0}),[p.trainingTypes,p.trainings,S,D,P]),J=E.useMemo(()=>nd.map(k=>({status:k,items:z.filter(b=>b.status===k)})),[z]),L=E.useMemo(()=>p.trainingSessions.map(k=>{const b=p.trainings.find(K=>K.id===k.trainingId);return{...k,training:b}}),[p.trainingSessions,p.trainings]),V=E.useMemo(()=>L.filter(k=>{const b=new Date(k.startDate);return b.getFullYear()===v.getFullYear()&&b.getMonth()===v.getMonth()}),[v,L]),q=E.useMemo(()=>{const k=v.getFullYear(),b=Array.from({length:12},(K,re)=>({month:re,items:[]}));return L.forEach(K=>{const re=new Date(K.startDate);re.getFullYear()===k&&b[re.getMonth()].items.push(K)}),b},[v,L]);return r?n.jsx("main",{className:"min-h-screen bg-stone-50 flex items-center justify-center",children:"Chargement Academy..."}):B?n.jsx(Fg,{training:B,data:p,busy:o,onBack:()=>{x(null),window.history.pushState({},"","/app/academy")},onRefresh:T,actions:O}):n.jsx("main",{className:"min-h-screen bg-stone-50 px-4 py-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[n.jsxs("header",{className:"rounded-2xl border border-stone-200 bg-white p-5",children:[n.jsx("p",{className:"text-sm text-stone-500",children:"Milestone 5"}),n.jsx("h1",{className:"text-3xl font-semibold text-stone-900",children:"Academy"}),n.jsx("p",{className:"text-stone-600 text-sm",children:"Kanban formations, sessions, inscriptions, présence, finances."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:`rounded px-3 py-2 text-sm ${c==="kanban"?"bg-[#B01A19] text-white":"bg-white border border-stone-300"}`,onClick:()=>f("kanban"),children:"Kanban"}),n.jsx("button",{className:`rounded px-3 py-2 text-sm ${c==="calendar"?"bg-[#B01A19] text-white":"bg-white border border-stone-300"}`,onClick:()=>f("calendar"),children:"Calendar"}),n.jsx("button",{className:`rounded px-3 py-2 text-sm ${c==="types"?"bg-[#B01A19] text-white":"bg-white border border-stone-300"}`,onClick:()=>f("types"),children:"Training Types"}),n.jsx("button",{className:`rounded px-3 py-2 text-sm ${c==="locations"?"bg-[#B01A19] text-white":"bg-white border border-stone-300"}`,onClick:()=>f("locations"),children:"Locations"}),n.jsx("button",{className:`rounded px-3 py-2 text-sm ${c==="ideas"?"bg-[#B01A19] text-white":"bg-white border border-stone-300"}`,onClick:()=>f("ideas"),children:"Idea Notebook"}),n.jsx("button",{className:`rounded px-3 py-2 text-sm ${c==="reporting"?"bg-[#B01A19] text-white":"bg-white border border-stone-300"}`,onClick:O.viewReporting,children:"Reporting"})]}),c==="kanban"&&n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:O.createTraining,children:"Nouvelle formation"}),n.jsx("input",{className:"min-w-[220px] rounded border border-stone-300 px-3 py-2 text-sm",placeholder:"Rechercher une formation...",value:S,onChange:k=>A(k.target.value)}),n.jsxs("select",{className:"rounded border border-stone-300 px-3 py-2 text-sm",value:D,onChange:k=>R(k.target.value),children:[n.jsx("option",{value:"all",children:"Tous les statuts"}),nd.map(k=>n.jsx("option",{value:k,children:Qa[k]},k))]}),n.jsxs("select",{className:"rounded border border-stone-300 px-3 py-2 text-sm",value:P,onChange:k=>I(k.target.value),children:[n.jsx("option",{value:"all",children:"Tous les types"}),p.trainingTypes.map(k=>n.jsx("option",{value:k.id,children:k.name},k.id))]})]}),z.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune formation pour le moment."}):n.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:J.map(k=>n.jsxs("div",{className:"rounded-xl border border-stone-200 p-3 bg-stone-50",children:[n.jsxs("p",{className:"font-medium text-sm",children:[Qa[k.status]," (",k.items.length,")"]}),n.jsx("div",{className:"mt-2 space-y-2",children:k.items.length===0?n.jsx("p",{className:"text-xs text-stone-500",children:"Aucune formation"}):k.items.map(b=>n.jsxs("div",{className:"rounded border border-stone-200 bg-white p-2 text-sm",children:[n.jsx("p",{className:"font-medium",children:b.title}),n.jsxs("p",{className:"text-xs text-stone-500",children:[b.price,"€ · max ",b.maxParticipants]}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx("button",{className:"text-indigo-700 text-xs",onClick:()=>{x(b.id),window.history.pushState({},"",`/app/academy/${b.id}`)},children:"Ouvrir"}),n.jsx("button",{className:"text-stone-700 text-xs",onClick:()=>O.editTraining(b.id),children:"Modifier"}),n.jsx("button",{className:"text-red-600 text-xs",onClick:()=>O.deleteTraining(b.id),children:"Supprimer"})]})]},b.id))})]},k.status))})]}),c==="calendar"&&n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800",children:"Calendrier formations"}),n.jsx("button",{className:`rounded border px-2 py-1 text-xs ${g==="month"?"border-[#B01A19] text-[#B01A19]":"border-stone-300 text-stone-700"}`,onClick:()=>j("month"),children:"Mois"}),n.jsx("button",{className:`rounded border px-2 py-1 text-xs ${g==="year"?"border-[#B01A19] text-[#B01A19]":"border-stone-300 text-stone-700"}`,onClick:()=>j("year"),children:"Année"}),n.jsx("button",{className:"rounded border border-stone-300 px-2 py-1 text-xs",onClick:()=>N(new Date(v.getFullYear(),v.getMonth()-1,1)),children:"Précédent"}),n.jsx("button",{className:"rounded border border-stone-300 px-2 py-1 text-xs",onClick:()=>N(new Date(v.getFullYear(),v.getMonth()+1,1)),children:"Suivant"}),n.jsx("span",{className:"text-xs text-stone-600",children:v.toLocaleDateString("fr-FR",{year:"numeric",month:"long"})})]}),L.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune session planifiée."}):g==="month"?n.jsx("div",{className:"space-y-2",children:V.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune session ce mois-ci."}):V.map(k=>{var b;return n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between",children:[n.jsxs("span",{children:[k.startDate," → ",k.endDate," · ",((b=k.training)==null?void 0:b.title)||"Formation"]}),k.training&&n.jsx("button",{className:"text-indigo-700 text-xs",onClick:()=>{x(k.training.id),window.history.pushState({},"",`/app/academy/${k.training.id}`)},children:"Ouvrir"})]},k.id)})}):n.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:q.map(k=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm",children:[n.jsx("p",{className:"font-medium",children:new Date(v.getFullYear(),k.month,1).toLocaleDateString("fr-FR",{month:"long"})}),n.jsxs("p",{className:"text-xs text-stone-500",children:[k.items.length," session(s)"]})]},k.month))})]}),c==="types"&&n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsx("div",{className:"mb-3",children:n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:O.createTrainingType,children:"Nouveau type"})}),p.trainingTypes.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun type de formation."}):p.trainingTypes.map(k=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between mb-2",children:[n.jsxs("span",{children:[k.name," · checklist ",k.checklistTemplate.length]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-stone-700",onClick:()=>O.editTrainingType(k.id),children:"Modifier"}),n.jsx("button",{className:"text-red-600",onClick:()=>O.deleteTrainingType(k.id),children:"Supprimer"})]})]},k.id))]}),c==="locations"&&n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsx("div",{className:"mb-3",children:n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:O.createLocation,children:"Nouveau lieu"})}),p.trainingLocations.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun lieu de formation."}):p.trainingLocations.map(k=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between mb-2",children:[n.jsxs("span",{children:[k.name," · cap. ",k.capacity]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-stone-700",onClick:()=>O.editLocation(k.id),children:"Modifier"}),n.jsx("button",{className:"text-red-600",onClick:()=>O.deleteLocation(k.id),children:"Supprimer"})]})]},k.id))]}),c==="ideas"&&n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsx("div",{className:"mb-3",children:n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm",onClick:O.createIdeaNote,children:"Nouvelle idée"})}),p.ideaNotes.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune idée."}):p.ideaNotes.map(k=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between mb-2",children:[n.jsxs("span",{children:[k.category," · ",k.title]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-stone-700",onClick:()=>O.editIdeaNote(k.id),children:"Modifier"}),n.jsx("button",{className:"text-red-600",onClick:()=>O.deleteIdeaNote(k.id),children:"Supprimer"})]})]},k.id))]}),c==="reporting"&&n.jsx("section",{className:"rounded-2xl border border-stone-200 bg-white p-4",children:h?n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:["Formations: ",h.trainingsCount]}),n.jsxs("p",{children:["Formations terminées: ",h.completedTrainings]}),n.jsxs("p",{children:["Recettes totales: ",h.totalRevenue,"€"]}),n.jsxs("p",{children:["Dépenses totales: ",h.totalExpenses,"€"]}),n.jsxs("p",{children:["Rentabilité: ",h.profitability,"€"]})]}):n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune donnée reporting."})}),(o||i||d)&&n.jsxs("div",{className:"fixed bottom-4 right-4 z-40 space-y-2",children:[o&&n.jsx("div",{className:"rounded bg-stone-900 px-3 py-2 text-xs text-white",children:"Synchronisation..."}),i&&n.jsx("div",{className:"rounded bg-red-600 px-3 py-2 text-sm text-white",children:i}),d&&n.jsxs("div",{className:"rounded bg-emerald-600 px-3 py-2 text-sm text-white",children:[d,n.jsx("button",{className:"ml-2 underline",onClick:()=>u(null),children:"Fermer"})]})]})]})})}const $g=Object.freeze(Object.defineProperty({__proto__:null,default:Rg},Symbol.toStringTag,{value:"Module"}));async function $r(e,t={}){const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!r.ok){let s=`${r.status} ${r.statusText}`;try{const o=await r.json();o!=null&&o.error&&(s=o.error)}catch{}throw new Error(s)}return r.status===204?null:r.json()}function Ig({initialProjectId:e}){var g,j;const[t,r]=E.useState(!1),[s,o]=E.useState(null),[a,i]=E.useState(null),[l,d]=E.useState(null),[u,c]=E.useState({sun_observations:"",wet_areas:"",wind_patterns:"",soil_history:"",existing_wildlife:""}),[f,p]=E.useState({item_type:"plant",description:""}),[w,m]=E.useState({plant_id:"",species_name:"",text:""}),x=E.useMemo(()=>e||window.location.pathname.split("/").at(-1),[e]),h=E.useCallback(async()=>{const v=await $r(`/api/v1/design/${x}/client-portal`);d(v)},[x]);E.useEffect(()=>{let v=!0;async function N(){r(!0),o(null);try{await h()}catch(S){v&&o(S.message)}finally{v&&r(!1)}}return N(),()=>{v=!1}},[h]);const y=E.useCallback(async(v,N)=>{r(!0),o(null);try{await v(),await h(),N&&i(N)}catch(S){o(S.message)}finally{r(!1)}},[h]);return l?n.jsxs("main",{className:"min-h-screen bg-stone-50 px-4 py-6",children:[n.jsxs("section",{className:"max-w-5xl mx-auto space-y-4",children:[n.jsxs("header",{className:"rounded-2xl border border-stone-200 bg-white p-5",children:[n.jsx("p",{className:"text-sm text-stone-500",children:"Portail client"}),n.jsx("h1",{className:"text-2xl font-semibold text-stone-900 mt-1",children:l.project.name}),n.jsx("p",{className:"text-sm text-stone-600",children:l.project.address})]}),n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4 space-y-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:"Devis"}),(l.quotes||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun devis pour le moment."}):l.quotes.map(v=>n.jsxs("div",{className:"rounded-xl border border-stone-200 p-3 flex flex-wrap items-center justify-between gap-2 text-sm",children:[n.jsxs("span",{children:[v.title," · v",v.version," · ",v.status," · ",v.total,"€"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",className:"rounded border border-emerald-500 px-2 py-1 text-emerald-700",onClick:()=>y(()=>$r(`/api/v1/design/client/quotes/${v.id}/approve`,{method:"PATCH",body:JSON.stringify({approved_by:"client-portal"})}),"Devis approuvé."),children:"Approuver"}),n.jsx("button",{type:"button",className:"rounded border border-red-500 px-2 py-1 text-red-700",onClick:()=>{const N=window.prompt("Raison du refus ?");N&&y(()=>$r(`/api/v1/design/client/quotes/${v.id}/reject`,{method:"PATCH",body:JSON.stringify({comment:N})}),"Devis rejeté.")},children:"Rejeter"})]})]},v.id))]}),n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4 space-y-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:"Questionnaire terrain"}),n.jsxs("form",{className:"grid sm:grid-cols-2 gap-2",onSubmit:v=>{v.preventDefault(),y(()=>$r(`/api/v1/design/${x}/client/questionnaire`,{method:"PATCH",body:JSON.stringify(u)}),"Questionnaire envoyé.")},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Observations soleil",value:u.sun_observations,onChange:v=>c(N=>({...N,sun_observations:v.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Zones humides",value:u.wet_areas,onChange:v=>c(N=>({...N,wet_areas:v.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Vents dominants",value:u.wind_patterns,onChange:v=>c(N=>({...N,wind_patterns:v.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Historique du sol",value:u.soil_history,onChange:v=>c(N=>({...N,soil_history:v.target.value}))}),n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Faune observée",value:u.existing_wildlife,onChange:v=>c(N=>({...N,existing_wildlife:v.target.value}))}),n.jsx("button",{className:"sm:col-span-2 rounded bg-[#AFBD00] px-3 py-2 text-sm font-medium text-stone-900",children:"Envoyer"})]})]}),n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4 space-y-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:"Wishlist plantes"}),n.jsxs("form",{className:"grid sm:grid-cols-4 gap-2",onSubmit:v=>{v.preventDefault(),y(()=>$r(`/api/v1/design/${x}/client/wishlist`,{method:"POST",body:JSON.stringify(f)}),"Souhait ajouté."),p({item_type:"plant",description:""})},children:[n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:f.item_type,onChange:v=>p(N=>({...N,item_type:v.target.value})),children:[n.jsx("option",{value:"plant",children:"Plant"}),n.jsx("option",{value:"feature",children:"Feature"}),n.jsx("option",{value:"material",children:"Material"})]}),n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Description",value:f.description,onChange:v=>p(N=>({...N,description:v.target.value})),required:!0}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm font-medium text-stone-900",children:"Ajouter"})]}),n.jsx("div",{className:"space-y-1",children:(((g=l.clientContributions)==null?void 0:g.wishlist)||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Wishlist vide."}):l.clientContributions.wishlist.map(v=>n.jsxs("p",{className:"text-sm text-stone-700",children:[v.type,": ",v.description]},v.id))})]}),n.jsxs("section",{className:"rounded-2xl border border-stone-200 bg-white p-4 space-y-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:"Journal des plantes"}),n.jsxs("form",{className:"grid sm:grid-cols-4 gap-2",onSubmit:v=>{v.preventDefault(),y(()=>$r(`/api/v1/design/${x}/client/journal`,{method:"POST",body:JSON.stringify(w)}),"Entrée journal ajoutée."),m({plant_id:"",species_name:"",text:""})},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Plant ID",value:w.plant_id,onChange:v=>m(N=>({...N,plant_id:v.target.value})),required:!0}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Espèce",value:w.species_name,onChange:v=>m(N=>({...N,species_name:v.target.value}))}),n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Observation",value:w.text,onChange:v=>m(N=>({...N,text:v.target.value})),required:!0}),n.jsx("button",{className:"sm:col-span-4 rounded bg-[#AFBD00] px-3 py-2 text-sm font-medium text-stone-900",children:"Ajouter au journal"})]}),n.jsx("div",{className:"space-y-2",children:(((j=l.clientContributions)==null?void 0:j.plantJournal)||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune entrée de journal."}):l.clientContributions.plantJournal.map(v=>n.jsxs("div",{className:"rounded border border-stone-200 p-2",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800",children:v.speciesName||v.plantId}),(v.entries||[]).map(N=>n.jsxs("p",{className:"text-xs text-stone-600",children:[N.date,": ",N.text]},N.id))]},v.id))})]})]}),(s||a||t)&&n.jsxs("div",{className:"fixed bottom-4 right-4 z-40 space-y-2",children:[t&&n.jsx("div",{className:"rounded-lg bg-stone-900 text-white text-xs px-3 py-2",children:"Synchronisation..."}),s&&n.jsx("div",{className:"rounded-lg bg-red-600 text-white text-sm px-3 py-2",children:s}),a&&n.jsxs("div",{className:"rounded-lg bg-emerald-600 text-white text-sm px-3 py-2",children:[a,n.jsx("button",{className:"ml-3 underline",onClick:()=>i(null),children:"Fermer"})]})]})]}):n.jsx("main",{className:"min-h-screen bg-stone-50 flex items-center justify-center px-4",children:n.jsx("p",{className:"text-sm text-stone-600",children:t?"Chargement du portail client...":"Portail indisponible."})})}const zg=Object.freeze(Object.defineProperty({__proto__:null,default:Ig},Symbol.toStringTag,{value:"Module"})),Wg={offre:"Offre","pre-projet":"Pré-projet","projet-detaille":"Projet détaillé","mise-en-oeuvre":"Mise en œuvre","co-gestion":"Co-gestion"},Ug={offre:{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-400",dot:"bg-amber-400"},"pre-projet":{bg:"bg-orange-50 dark:bg-orange-900/20",text:"text-orange-700 dark:text-orange-400",dot:"bg-orange-400"},"projet-detaille":{bg:"bg-[#e1e6d8] dark:bg-[#AFBD00]/20",text:"text-[#6B7A00] dark:text-[#AFBD00]",dot:"bg-[#AFBD00]"},"mise-en-oeuvre":{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-700 dark:text-emerald-400",dot:"bg-emerald-500"},"co-gestion":{bg:"bg-[#c8bfd2] dark:bg-[#5B5781]/20",text:"text-[#5B5781] dark:text-[#9B94BB]",dot:"bg-[#5B5781]"}};function Hg({project:e,onView:t,onEdit:r,onDelete:s,onDuplicate:o}){const a=e.budget.hoursPlanned>0?Math.round(e.budget.hoursWorked/e.budget.hoursPlanned*100):0,i=d=>d?new Date(d).toLocaleDateString("fr-BE",{day:"numeric",month:"short"}):null,l=Ug[e.phase];return n.jsxs("div",{onClick:t,className:"group bg-white dark:bg-stone-800 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden cursor-pointer hover:border-[#AFBD00] dark:hover:border-[#AFBD00] hover:shadow-lg transition-all duration-200",children:[n.jsx("div",{className:`h-1.5 ${l.dot}`}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${l.bg} ${l.text}`,children:[n.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${l.dot}`}),Wg[e.phase]]}),e.status==="pending"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-400",children:"En attente"})]}),n.jsx("div",{className:"relative opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("button",{onClick:d=>{d.stopPropagation()},className:"p-1.5 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 rounded-lg hover:bg-stone-100 dark:hover:bg-stone-700 transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})})})})]}),n.jsx("h3",{className:"text-lg font-medium text-stone-900 dark:text-stone-100 mb-1 group-hover:text-[#AFBD00] transition-colors line-clamp-2",children:e.name}),n.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400 mb-4 flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),n.jsx("span",{className:"truncate",children:e.clientName})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-600 dark:text-stone-400 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z"})}),n.jsxs("span",{children:[e.area," m²"]})]}),e.plantingDate&&n.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),n.jsx("span",{children:i(e.plantingDate)})]}),e.startDate&&!e.plantingDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})}),n.jsx("span",{children:i(e.startDate)})]})]}),n.jsxs("div",{className:"bg-stone-50 dark:bg-stone-900/50 rounded-xl p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Budget heures"}),n.jsxs("span",{className:"text-xs font-medium text-stone-700 dark:text-stone-300",children:[e.budget.hoursWorked,"h / ",e.budget.hoursPlanned,"h"]})]}),n.jsx("div",{className:"h-1.5 bg-stone-200 dark:bg-stone-700 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${a>90?"bg-red-500":a>70?"bg-amber-500":"bg-[#AFBD00]"}`,style:{width:`${Math.min(a,100)}%`}})}),n.jsxs("div",{className:"flex items-center justify-between mt-1.5 text-[10px] text-stone-500 dark:text-stone-400",children:[n.jsxs("span",{children:[e.budget.hoursBilled,"h facturées"]}),n.jsxs("span",{children:[e.budget.hoursSemos,"h Semos"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t border-stone-100 dark:border-stone-700 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:d=>{d.stopPropagation(),r==null||r()},className:"flex-1 text-xs font-medium text-stone-600 dark:text-stone-400 hover:text-[#AFBD00] dark:hover:text-[#AFBD00] py-2 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:"Modifier"}),n.jsx("button",{onClick:d=>{d.stopPropagation(),o==null||o()},className:"flex-1 text-xs font-medium text-stone-600 dark:text-stone-400 hover:text-[#AFBD00] dark:hover:text-[#AFBD00] py-2 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:"Dupliquer"}),n.jsx("button",{onClick:d=>{d.stopPropagation(),s==null||s()},className:"flex-1 text-xs font-medium text-stone-600 dark:text-stone-400 hover:text-red-500 dark:hover:text-red-400 py-2 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:"Supprimer"})]})]})]})}function ta({label:e,value:t,suffix:r,icon:s,accent:o="neutral"}){const i={primary:{bg:"bg-[#e1e6d8] dark:bg-[#AFBD00]/10",icon:"text-[#AFBD00]",border:"border-[#AFBD00]/20"},secondary:{bg:"bg-[#c8bfd2] dark:bg-[#5B5781]/10",icon:"text-[#5B5781] dark:text-[#8B84B0]",border:"border-[#5B5781]/20"},neutral:{bg:"bg-stone-100 dark:bg-stone-800",icon:"text-stone-500 dark:text-stone-400",border:"border-stone-200 dark:border-stone-700"}}[o];return n.jsxs("div",{className:`relative overflow-hidden rounded-2xl border ${i.border} bg-white dark:bg-stone-900 p-4 sm:p-5`,children:[n.jsx("div",{className:`absolute inset-0 opacity-30 ${i.bg}`}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-xl ${i.bg} ${i.icon} mb-3`,children:s}),n.jsxs("div",{className:"text-2xl sm:text-3xl font-semibold text-stone-900 dark:text-stone-100 tracking-tight",children:[t,r&&n.jsx("span",{className:"text-lg text-stone-500 dark:text-stone-400 font-normal",children:r})]}),n.jsx("div",{className:"text-sm text-stone-500 dark:text-stone-400 mt-0.5",children:e})]})]})}const Vg={offre:"Offre","pre-projet":"Pré-projet","projet-detaille":"Projet détaillé","mise-en-oeuvre":"Mise en œuvre","co-gestion":"Co-gestion"},qg=["offre","pre-projet","projet-detaille","mise-en-oeuvre","co-gestion"];function Jg({projects:e,stats:t,templates:r,onViewProject:s,onEditProject:o,onDeleteProject:a,onCreateProject:i,onDuplicateProject:l}){const[d,u]=E.useState([]),[c,f]=E.useState("all"),[p,w]=E.useState(""),[m,x]=E.useState("date");E.useMemo(()=>{const N=new Map;return e.forEach(S=>{N.set(S.projectManagerId,S.projectManagerId)}),Array.from(N.entries())},[e]);const h=E.useMemo(()=>{let N=e.filter(S=>S.status!=="archived");if(d.length>0&&(N=N.filter(S=>d.includes(S.phase))),c!=="all"&&(N=N.filter(S=>S.status===c)),p.trim()){const S=p.toLowerCase();N=N.filter(A=>A.name.toLowerCase().includes(S)||A.clientName.toLowerCase().includes(S)||A.address.toLowerCase().includes(S))}return N.sort((S,A)=>{switch(m){case"name":return S.name.localeCompare(A.name);case"date":return new Date(A.updatedAt).getTime()-new Date(S.updatedAt).getTime();case"budget":const D=S.budget.hoursPlanned>0?S.budget.hoursWorked/S.budget.hoursPlanned:0;return(A.budget.hoursPlanned>0?A.budget.hoursWorked/A.budget.hoursPlanned:0)-D;case"area":return A.area-S.area;default:return 0}}),N},[e,d,c,p,m]),y=N=>{u(S=>S.includes(N)?S.filter(A=>A!==N):[...S,N])},g=()=>{u([]),f("all"),w("")},j=d.length>0||c!=="all"||p.trim(),v=N=>new Intl.NumberFormat("fr-BE",{style:"currency",currency:"EUR"}).format(N);return n.jsxs("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-950",children:[n.jsxs("header",{className:"relative overflow-hidden border-b border-stone-200 dark:border-stone-800 bg-white dark:bg-stone-900",children:[n.jsxs("div",{className:"absolute inset-0 opacity-[0.03] dark:opacity-[0.05]",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#AFBD00] via-transparent to-[#5B5781]"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-[#AFBD00]/20 to-transparent"})]}),n.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-2 h-8 rounded-full bg-[#AFBD00]"}),n.jsx("h1",{className:"text-3xl sm:text-4xl font-serif font-medium text-stone-900 dark:text-stone-100 tracking-tight",children:"Design Studio"})]}),n.jsxs("p",{className:"text-stone-600 dark:text-stone-400 ml-5",children:[t.totalProjects," projet",t.totalProjects>1?"s":""," · ",t.activeProjects," en cours"]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{onClick:()=>i==null?void 0:i(),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-[#AFBD00] hover:bg-[#9BAA00] text-stone-900 font-medium rounded-full transition-all duration-200 shadow-sm hover:shadow-md",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nouveau projet"]}),r.length>0&&n.jsx("div",{className:"absolute right-0 mt-2 w-72 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-20",children:n.jsxs("div",{className:"bg-white dark:bg-stone-800 rounded-xl shadow-xl border border-stone-200 dark:border-stone-700 overflow-hidden",children:[n.jsx("div",{className:"px-4 py-2 border-b border-stone-100 dark:border-stone-700",children:n.jsx("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Depuis un template"})}),r.map(N=>n.jsxs("button",{onClick:()=>i==null?void 0:i(N.id),className:"w-full px-4 py-3 text-left hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:[n.jsx("div",{className:"font-medium text-stone-900 dark:text-stone-100",children:N.name}),n.jsx("div",{className:"text-sm text-stone-500 dark:text-stone-400",children:N.description})]},N.id))]})})]})]})})]}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("section",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[n.jsx(ta,{label:"Projets actifs",value:t.activeProjects,icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),accent:"primary"}),n.jsx(ta,{label:"Heures ce mois",value:t.totalHoursThisMonth,suffix:"h",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx(ta,{label:"CA annuel",value:v(t.totalRevenueThisYear),icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})}),accent:"secondary"}),n.jsx(ta,{label:"Taux conversion",value:`${Math.round(t.quoteConversionRate*100)}%`,icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),t.upcomingMeetings.length>0&&n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider mb-4",children:"Prochaines réunions"}),n.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 sm:mx-0 sm:px-0 scrollbar-hide",children:t.upcomingMeetings.map(N=>n.jsxs("button",{onClick:()=>s==null?void 0:s(N.projectId),className:"flex-shrink-0 flex items-center gap-3 px-4 py-3 bg-white dark:bg-stone-800 rounded-xl border border-stone-200 dark:border-stone-700 hover:border-[#AFBD00] dark:hover:border-[#AFBD00] transition-colors group",children:[n.jsxs("div",{className:"w-12 h-12 rounded-lg bg-[#e1e6d8] dark:bg-[#AFBD00]/20 flex flex-col items-center justify-center",children:[n.jsx("span",{className:"text-xs font-medium text-[#7A8500] dark:text-[#AFBD00]",children:new Date(N.date).toLocaleDateString("fr-BE",{day:"numeric"})}),n.jsx("span",{className:"text-[10px] text-stone-600 dark:text-stone-400 uppercase",children:new Date(N.date).toLocaleDateString("fr-BE",{month:"short"})})]}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-stone-900 dark:text-stone-100 group-hover:text-[#AFBD00] transition-colors",children:N.title}),n.jsxs("div",{className:"text-sm text-stone-500 dark:text-stone-400",children:[N.projectName," · ",N.time]})]})]},N.id))})]}),n.jsxs("section",{children:[n.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),n.jsx("input",{type:"text",placeholder:"Rechercher un projet, client, lieu...",value:p,onChange:N=>w(N.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-[#AFBD00] focus:border-transparent transition-shadow"})]}),n.jsxs("select",{value:m,onChange:N=>x(N.target.value),className:"px-4 py-2.5 bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 focus:outline-none focus:ring-2 focus:ring-[#AFBD00] focus:border-transparent cursor-pointer",children:[n.jsx("option",{value:"date",children:"Activité récente"}),n.jsx("option",{value:"name",children:"Nom A-Z"}),n.jsx("option",{value:"budget",children:"Budget consommé"}),n.jsx("option",{value:"area",children:"Surface"})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400 mr-1",children:"Phase :"}),qg.map(N=>n.jsxs("button",{onClick:()=>y(N),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${d.includes(N)?"bg-[#AFBD00] text-stone-900":"bg-white dark:bg-stone-800 text-stone-600 dark:text-stone-400 border border-stone-200 dark:border-stone-700 hover:border-[#AFBD00] dark:hover:border-[#AFBD00]"}`,children:[n.jsx(Qg,{phase:N,small:!0}),Vg[N]]},N)),n.jsx("div",{className:"w-px h-6 bg-stone-200 dark:bg-stone-700 mx-2 hidden sm:block"}),n.jsxs("select",{value:c,onChange:N=>f(N.target.value),className:"px-3 py-1.5 bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-full text-sm text-stone-600 dark:text-stone-400 focus:outline-none focus:ring-2 focus:ring-[#AFBD00] focus:border-transparent cursor-pointer",children:[n.jsx("option",{value:"all",children:"Tous statuts"}),n.jsx("option",{value:"active",children:"En cours"}),n.jsx("option",{value:"pending",children:"En attente"}),n.jsx("option",{value:"completed",children:"Terminés"})]}),j&&n.jsxs("button",{onClick:g,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-300 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Effacer filtres"]})]})]}),n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:[h.length," projet",h.length>1?"s":"",j&&` sur ${e.filter(N=>N.status!=="archived").length}`]})}),h.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:h.map(N=>n.jsx(Hg,{project:N,onView:()=>s==null?void 0:s(N.id),onEdit:()=>o==null?void 0:o(N.id),onDelete:()=>a==null?void 0:a(N.id),onDuplicate:()=>l==null?void 0:l(N.id)},N.id))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-100 dark:bg-stone-800 flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),n.jsx("h3",{className:"text-lg font-medium text-stone-900 dark:text-stone-100 mb-1",children:"Aucun projet trouvé"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mb-4",children:"Essayez de modifier vos filtres ou votre recherche"}),n.jsx("button",{onClick:g,className:"text-[#AFBD00] hover:text-[#8A9A00] font-medium transition-colors",children:"Effacer tous les filtres"})]})]})]})]})}function Qg({phase:e,small:t=!1}){const r={offre:"bg-amber-400","pre-projet":"bg-orange-400","projet-detaille":"bg-[#AFBD00]","mise-en-oeuvre":"bg-emerald-500","co-gestion":"bg-[#5B5781]"};return n.jsx("div",{className:`rounded-full ${r[e]} ${t?"w-2 h-2":"w-2.5 h-2.5"}`})}const Gg=[{id:"overview",label:"Overview"},{id:"team",label:"Team"},{id:"timesheets",label:"Timesheets"},{id:"expenses",label:"Expenses"},{id:"site-analysis",label:"Site Analysis"},{id:"palette",label:"Palette"},{id:"planting-plan",label:"Planting Plan"},{id:"quotes",label:"Quotes"},{id:"documents",label:"Documents"},{id:"album",label:"Album"},{id:"meetings",label:"Meetings"},{id:"co-gestion",label:"Co-gestion"}];async function ae(e,t={}){const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!r.ok){let s=`${r.status} ${r.statusText}`;try{const o=await r.json();o!=null&&o.error&&(s=o.error)}catch{}throw new Error(s)}return r.status===204?null:r.json()}function Au(){return{name:"",client_name:"",client_email:"",client_phone:"",address:"",area:500}}function Kg({open:e,busy:t,templates:r,selectedTemplateId:s,values:o,onChange:a,onClose:i,onSubmit:l}){return e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:i}),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:n.jsxs("div",{className:"w-full max-w-xl bg-white rounded-2xl border border-stone-200 shadow-2xl overflow-hidden",children:[n.jsx("div",{className:"px-5 py-4 border-b border-stone-200",children:n.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:"Nouveau projet Design Studio"})}),n.jsxs("form",{className:"p-5 grid gap-3",onSubmit:d=>{d.preventDefault(),l()},children:[n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Template (optionnel)"}),n.jsxs("select",{value:s||"",onChange:d=>a("template_id",d.target.value||null),className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Sans template"}),r.map(d=>n.jsx("option",{value:d.id,children:d.name},d.id))]})]}),n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Nom du projet"}),n.jsx("input",{className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",value:o.name,onChange:d=>a("name",d.target.value),required:!0})]}),n.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Client"}),n.jsx("input",{className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",value:o.client_name,onChange:d=>a("client_name",d.target.value),required:!0})]}),n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Surface (m²)"}),n.jsx("input",{type:"number",min:"1",className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",value:o.area,onChange:d=>a("area",Number(d.target.value||0)),required:!0})]})]}),n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Adresse"}),n.jsx("input",{className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",value:o.address,onChange:d=>a("address",d.target.value),required:!0})]}),n.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Email"}),n.jsx("input",{type:"email",className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",value:o.client_email,onChange:d=>a("client_email",d.target.value)})]}),n.jsxs("label",{className:"grid gap-1",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Téléphone"}),n.jsx("input",{className:"rounded-xl border border-stone-300 px-3 py-2 text-sm",value:o.client_phone,onChange:d=>a("client_phone",d.target.value)})]})]}),n.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:i,className:"px-3 py-2 rounded-lg border border-stone-300 text-sm",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:t,className:"px-3 py-2 rounded-lg bg-[#AFBD00] text-stone-900 text-sm font-medium disabled:opacity-60",children:t?"Création...":"Créer"})]})]})]})})]}):null}function Yg({detail:e,busy:t,onBack:r,onRefresh:s,onUpdateName:o,onAddTeamMember:a,onRemoveTeamMember:i,onAddTimesheet:l,onDeleteTimesheet:d,onAddExpense:u,onApproveExpense:c,onDeleteExpense:f,onSaveSiteAnalysis:p,onAddPaletteItem:w,onDeletePaletteItem:m,onImportPlantPalette:x,onSavePlantingPlan:h,onExportPlan:y,onAddPlantMarker:g,onMovePlantMarker:j,onDeletePlantMarker:v,onCreateQuote:N,onSendQuote:S,onDeleteQuote:A,onAddQuoteLine:D,onDeleteQuoteLine:R,onAddDocument:P,onDeleteDocument:I,onAddMedia:T,onDeleteMedia:W,onAddMeeting:O,onDeleteMeeting:B,onAddAnnotation:z,onResolveAnnotation:J,onDeleteAnnotation:L,onAddPlantRecord:V,onUpdatePlantRecord:q,onAddFollowUpVisit:k,onAddIntervention:b,onUpdateHarvestCalendar:K,onUpdateMaintenanceCalendar:re,onSearch:ee,searchResults:$}){var Pn,Br,Lr,Mr,Tn,$o,Io,zo,Wo,Uo,Cs,Or,Xt,Ho,Vo,qo,Jo;const[X,ce]=E.useState("overview"),[xe,Pe]=E.useState({member_name:"",member_email:"",role:"designer",is_paid:!0}),[pe,Ge]=E.useState({member_name:"",hours:2,phase:e.project.phase,mode:"billed",travel_km:0,notes:""}),[je,ft]=E.useState({amount:50,category:"plants",description:"",phase:e.project.phase,member_name:""}),[Qt,dn]=E.useState({hardinessZone:((Br=(Pn=e.siteAnalysis)==null?void 0:Pn.climate)==null?void 0:Br.hardinessZone)||"",soilType:((Mr=(Lr=e.siteAnalysis)==null?void 0:Lr.soil)==null?void 0:Mr.type)||"",notes:(($o=(Tn=e.siteAnalysis)==null?void 0:Tn.climate)==null?void 0:$o.notes)||""}),[Bt,Lt]=E.useState({species_id:"",species_name:"",common_name:"",layer:"shrub",quantity:1,unit_price:0}),[Mt,Ot]=E.useState({description:"",quantity:1,unit:"u",unit_price:0}),[cn,un]=E.useState({category:"plan",name:"",url:"",size:0,uploaded_by:"team"}),[mn,pn]=E.useState({media_type:"image",url:"",thumbnail_url:"",caption:"",uploaded_by:"team"}),[Gt,Kt]=E.useState({title:"",date:new Date().toISOString().slice(0,10),time:"10:00",duration:60,location:""}),[at,H]=E.useState({document_id:"",x:.5,y:.5,author_name:"Team",author_type:"team",content:""}),[Y,se]=E.useState({image_url:((Io=e.plantingPlan)==null?void 0:Io.imageUrl)||"",layout:((zo=e.plantingPlan)==null?void 0:zo.layout)||"split-3-4-1-4"}),[Z,Re]=E.useState({species_name:"",x:.5,y:.5,palette_item_id:""}),[wt,Ft]=E.useState({marker_id:"",palette_item_id:"",status:"alive",health_score:100,notes:""}),[fn,ar]=E.useState({date:new Date().toISOString().slice(0,10),visit_type:"follow-up",notes:""}),[An,ir]=E.useState({date:new Date().toISOString().slice(0,10),intervention_type:"mulching",notes:"",plant_record_id:""}),[Yt,Fo]=E.useState(""),[Ro,Zi]=E.useState(""),xt=e.project;return n.jsx("main",{className:"min-h-screen bg-stone-50 px-4 py-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{onClick:r,className:"px-3 py-2 rounded-lg border border-stone-300 text-sm text-stone-700 hover:bg-stone-100",children:"Retour dashboard"}),n.jsx("button",{onClick:s,className:"px-3 py-2 rounded-lg border border-stone-300 text-sm text-stone-700 hover:bg-stone-100",children:"Rafraîchir"}),t&&n.jsx("span",{className:"text-xs text-stone-500",children:"Mise à jour..."})]}),n.jsxs("header",{className:"mt-4 rounded-2xl border border-stone-200 bg-white p-5",children:[n.jsx("p",{className:"text-sm text-stone-500",children:"Milestone 4"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[n.jsx("h1",{className:"text-2xl font-semibold text-stone-900",children:xt.name}),n.jsx("button",{onClick:o,className:"px-2 py-1 text-xs rounded border border-stone-300",children:"Renommer"})]}),n.jsxs("p",{className:"text-stone-600",children:[xt.clientName," · ",xt.address]})]}),n.jsxs("section",{className:"mt-4 rounded-2xl border border-stone-200 bg-white p-4",children:[n.jsxs("form",{className:"mb-4 flex gap-2",onSubmit:C=>{C.preventDefault(),ee(Yt)},children:[n.jsx("input",{className:"w-full rounded border border-stone-300 px-3 py-2 text-sm",placeholder:"Rechercher dans le projet (devis, docs, annotations, co-gestion...)",value:Yt,onChange:C=>Fo(C.target.value)}),n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",children:"Rechercher"})]}),($==null?void 0:$.length)>0&&n.jsx("div",{className:"mb-4 rounded-xl border border-stone-200 bg-stone-50 p-3 space-y-1",children:$.map(C=>n.jsxs("p",{className:"text-xs text-stone-700",children:["[",C.kind,"] ",C.excerpt]},C.id))}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Gg.map(C=>n.jsx("button",{onClick:()=>ce(C.id),className:`px-3 py-2 rounded-lg text-sm ${X===C.id?"bg-[#AFBD00] text-stone-900 font-medium":"bg-stone-100 text-stone-700"}`,children:C.label},C.id))}),X==="overview"&&n.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 text-sm text-stone-700",children:[n.jsxs("div",{className:"rounded-xl bg-stone-100 p-3",children:["Phase: ",xt.phase]}),n.jsxs("div",{className:"rounded-xl bg-stone-100 p-3",children:["Status: ",xt.status]}),n.jsxs("div",{className:"rounded-xl bg-stone-100 p-3",children:["Surface: ",xt.area," m²"]}),n.jsxs("div",{className:"rounded-xl bg-stone-100 p-3",children:["Budget heures: ",xt.budget.hoursWorked,"/",xt.budget.hoursPlanned]})]}),X==="team"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-5 gap-2",onSubmit:C=>{C.preventDefault(),a(xe),Pe({member_name:"",member_email:"",role:"designer",is_paid:!0})},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Nom",value:xe.member_name,onChange:C=>Pe(F=>({...F,member_name:C.target.value})),required:!0}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Email",value:xe.member_email,onChange:C=>Pe(F=>({...F,member_email:C.target.value}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:xe.role,onChange:C=>Pe(F=>({...F,role:C.target.value})),children:[n.jsx("option",{value:"project-manager",children:"project-manager"}),n.jsx("option",{value:"designer",children:"designer"}),n.jsx("option",{value:"butineur",children:"butineur"})]}),n.jsxs("label",{className:"text-xs flex items-center gap-1",children:[n.jsx("input",{type:"checkbox",checked:xe.is_paid,onChange:C=>Pe(F=>({...F,is_paid:C.target.checked}))})," Payé"]}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter"})]}),e.teamMembers.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun membre assigné."}):e.teamMembers.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 flex items-center justify-between text-sm",children:[n.jsxs("span",{children:[C.memberName," · ",C.role," · ",C.isPaid?"payé":"bénévole"]}),n.jsx("button",{className:"text-red-600",onClick:()=>i(C.id),children:"Retirer"})]},C.id))]}),X==="timesheets"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-6 gap-2",onSubmit:C=>{C.preventDefault(),l(pe),Ge(F=>({...F,notes:""}))},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Membre",value:pe.member_name,onChange:C=>Ge(F=>({...F,member_name:C.target.value})),required:!0}),n.jsx("input",{type:"number",step:"0.5",min:"0.5",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:pe.hours,onChange:C=>Ge(F=>({...F,hours:Number(C.target.value||0)}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:pe.phase,onChange:C=>Ge(F=>({...F,phase:C.target.value})),children:[n.jsx("option",{children:"offre"}),n.jsx("option",{children:"pre-projet"}),n.jsx("option",{children:"projet-detaille"}),n.jsx("option",{children:"mise-en-oeuvre"}),n.jsx("option",{children:"co-gestion"})]}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:pe.mode,onChange:C=>Ge(F=>({...F,mode:C.target.value})),children:[n.jsx("option",{value:"billed",children:"billed"}),n.jsx("option",{value:"semos",children:"semos"})]}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Notes",value:pe.notes,onChange:C=>Ge(F=>({...F,notes:C.target.value}))}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter"})]}),e.timesheets.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun timesheet."}):e.timesheets.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 flex items-center justify-between text-sm",children:[n.jsxs("span",{children:[C.date," · ",C.memberName," · ",C.hours,"h · ",C.mode]}),n.jsx("button",{className:"text-red-600",onClick:()=>d(C.id),children:"Supprimer"})]},C.id))]}),X==="expenses"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-6 gap-2",onSubmit:C=>{C.preventDefault(),u(je),ft(F=>({...F,description:""}))},children:[n.jsx("input",{type:"number",min:"0",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:je.amount,onChange:C=>ft(F=>({...F,amount:Number(C.target.value||0)}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:je.category,onChange:C=>ft(F=>({...F,category:C.target.value})),children:[n.jsx("option",{value:"plants",children:"plants"}),n.jsx("option",{value:"material",children:"material"}),n.jsx("option",{value:"travel",children:"travel"}),n.jsx("option",{value:"services",children:"services"}),n.jsx("option",{value:"other",children:"other"})]}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:je.phase,onChange:C=>ft(F=>({...F,phase:C.target.value})),children:[n.jsx("option",{children:"offre"}),n.jsx("option",{children:"pre-projet"}),n.jsx("option",{children:"projet-detaille"}),n.jsx("option",{children:"mise-en-oeuvre"}),n.jsx("option",{children:"co-gestion"})]}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Membre",value:je.member_name,onChange:C=>ft(F=>({...F,member_name:C.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Description",value:je.description,onChange:C=>ft(F=>({...F,description:C.target.value})),required:!0}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter"})]}),e.expenses.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune dépense."}):e.expenses.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 flex items-center justify-between text-sm gap-2",children:[n.jsxs("span",{children:[C.date," · ",C.amount,"€ · ",C.category," · ",C.status]}),n.jsxs("div",{className:"flex items-center gap-2",children:[C.status!=="approved"&&n.jsx("button",{className:"text-emerald-700",onClick:()=>c(C.id),children:"Approuver"}),n.jsx("button",{className:"text-red-600",onClick:()=>f(C.id),children:"Supprimer"})]})]},C.id))]}),X==="site-analysis"&&n.jsxs("form",{className:"grid sm:grid-cols-3 gap-2",onSubmit:C=>{C.preventDefault(),p(Qt)},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Zone rusticité",value:Qt.hardinessZone,onChange:C=>dn(F=>({...F,hardinessZone:C.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Type sol",value:Qt.soilType,onChange:C=>dn(F=>({...F,soilType:C.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Notes",value:Qt.notes,onChange:C=>dn(F=>({...F,notes:C.target.value}))}),n.jsx("button",{className:"sm:col-span-3 rounded bg-[#AFBD00] px-3 py-2 text-sm font-medium",children:"Sauvegarder analyse"})]}),X==="palette"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-7 gap-2",onSubmit:C=>{C.preventDefault(),w(Bt),Lt(F=>({...F,species_name:"",common_name:""}))},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Species ID",value:Bt.species_id,onChange:C=>Lt(F=>({...F,species_id:C.target.value})),required:!0}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Nom latin",value:Bt.species_name,onChange:C=>Lt(F=>({...F,species_name:C.target.value})),required:!0}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Nom commun",value:Bt.common_name,onChange:C=>Lt(F=>({...F,common_name:C.target.value}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Bt.layer,onChange:C=>Lt(F=>({...F,layer:C.target.value})),children:[n.jsx("option",{value:"canopy",children:"canopy"}),n.jsx("option",{value:"sub-canopy",children:"sub-canopy"}),n.jsx("option",{value:"shrub",children:"shrub"}),n.jsx("option",{value:"herbaceous",children:"herbaceous"}),n.jsx("option",{value:"ground-cover",children:"ground-cover"}),n.jsx("option",{value:"vine",children:"vine"}),n.jsx("option",{value:"root",children:"root"})]}),n.jsx("input",{type:"number",min:"1",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Bt.quantity,onChange:C=>Lt(F=>({...F,quantity:Number(C.target.value||1)}))}),n.jsx("input",{type:"number",min:"0",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Bt.unit_price,onChange:C=>Lt(F=>({...F,unit_price:Number(C.target.value||0)}))}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Plant Palette ID",value:Ro,onChange:C=>Zi(C.target.value)}),n.jsx("button",{className:"rounded border border-stone-300 px-2 py-1 text-sm",onClick:()=>x(Ro),type:"button",children:"Importer depuis Plant DB"})]}),(Uo=(Wo=e.plantPalette)==null?void 0:Wo.items)!=null&&Uo.length?e.plantPalette.items.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 flex items-center justify-between text-sm",children:[n.jsxs("span",{children:[C.speciesName," · ",C.layer," · x",C.quantity," · ",C.unitPrice,"€"]}),n.jsx("button",{className:"text-red-600",onClick:()=>m(C.id),children:"Supprimer"})]},C.id)):n.jsx("p",{className:"text-sm text-stone-500",children:"Palette vide."})]}),X==="planting-plan"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-3 gap-2",onSubmit:C=>{C.preventDefault(),h(Y)},children:[n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Image plan URL",value:Y.image_url,onChange:C=>se(F=>({...F,image_url:C.target.value}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Y.layout,onChange:C=>se(F=>({...F,layout:C.target.value})),children:[n.jsx("option",{value:"split-3-4-1-4",children:"split-3-4-1-4"}),n.jsx("option",{value:"full",children:"full"})]}),n.jsx("button",{className:"sm:col-span-3 rounded bg-[#AFBD00] px-3 py-2 text-sm font-medium",children:"Sauvegarder plan"})]}),(Cs=e.plantingPlan)!=null&&Cs.imageUrl?n.jsx("a",{className:"text-sm text-indigo-700 underline",href:e.plantingPlan.imageUrl,target:"_blank",rel:"noreferrer",children:"Voir image plan"}):n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune image plan."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",type:"button",onClick:()=>y("pdf"),children:"Exporter PDF"}),n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",type:"button",onClick:()=>y("image"),children:"Exporter image"})]}),n.jsxs("form",{className:"grid sm:grid-cols-5 gap-2",onSubmit:C=>{C.preventDefault(),g(Z),Re({species_name:"",x:.5,y:.5,palette_item_id:""})},children:[n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Espèce",value:Z.species_name,onChange:C=>Re(F=>({...F,species_name:C.target.value})),required:!0}),n.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Z.x,onChange:C=>Re(F=>({...F,x:Number(C.target.value||0)}))}),n.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Z.y,onChange:C=>Re(F=>({...F,y:Number(C.target.value||0)}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Palette item ID (optionnel)",value:Z.palette_item_id,onChange:C=>Re(F=>({...F,palette_item_id:C.target.value}))}),n.jsx("button",{className:"sm:col-span-5 rounded border border-stone-300 px-3 py-2 text-sm",children:"Ajouter marqueur"})]}),(((Or=e.plantingPlan)==null?void 0:Or.markers)||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun marqueur."}):e.plantingPlan.markers.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:["#",C.number," · ",C.speciesName," · (",C.x,", ",C.y,")"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-indigo-700",onClick:()=>{const F=window.prompt("Nouvelle coordonnée x (0..1)",String(C.x)),$e=window.prompt("Nouvelle coordonnée y (0..1)",String(C.y));F==null||$e==null||j(C.id,{x:Number(F),y:Number($e)})},children:"Déplacer"}),n.jsx("button",{className:"text-red-600",onClick:()=>v(C.id),children:"Supprimer"})]})]},C.id))]}),X==="quotes"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded bg-[#AFBD00] px-3 py-2 text-sm font-medium",onClick:N,children:"Nouveau devis"}),n.jsx("a",{className:"rounded border border-stone-300 px-3 py-2 text-sm",href:`/client/design/${xt.id}`,target:"_blank",rel:"noreferrer",children:"Ouvrir portail client"})]}),e.quotes.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun devis."}):e.quotes.map(C=>n.jsxs("div",{className:"rounded-xl border border-stone-200 p-3 space-y-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-sm",children:[n.jsxs("span",{children:[C.title," · v",C.version," · ",C.status," · ",C.total,"€"]}),n.jsxs("div",{className:"flex gap-2",children:[C.status==="draft"&&n.jsx("button",{className:"text-indigo-700",onClick:()=>S(C.id),children:"Envoyer"}),n.jsx("button",{className:"text-red-600",onClick:()=>A(C.id),children:"Supprimer"})]})]}),n.jsxs("form",{className:"grid sm:grid-cols-5 gap-2",onSubmit:F=>{F.preventDefault(),D(C.id,Mt),Ot({description:"",quantity:1,unit:"u",unit_price:0})},children:[n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Description",value:Mt.description,onChange:F=>Ot($e=>({...$e,description:F.target.value})),required:!0}),n.jsx("input",{type:"number",min:"0.01",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Mt.quantity,onChange:F=>Ot($e=>({...$e,quantity:Number(F.target.value||0)}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Unité",value:Mt.unit,onChange:F=>Ot($e=>({...$e,unit:F.target.value}))}),n.jsx("input",{type:"number",min:"0",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Mt.unit_price,onChange:F=>Ot($e=>({...$e,unit_price:Number(F.target.value||0)}))}),n.jsx("button",{className:"sm:col-span-5 rounded border border-stone-300 px-2 py-1 text-sm",children:"Ajouter ligne"})]}),(C.lines||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune ligne."}):C.lines.map(F=>n.jsxs("div",{className:"rounded border border-stone-200 px-2 py-1 text-sm flex items-center justify-between",children:[n.jsxs("span",{children:[F.description," · ",F.quantity," ",F.unit," · ",F.total,"€"]}),n.jsx("button",{className:"text-red-600",onClick:()=>R(F.id),children:"Supprimer"})]},F.id))]},C.id))]}),X==="documents"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-6 gap-2",onSubmit:C=>{C.preventDefault(),P(cn),un(F=>({...F,name:"",url:"",size:0}))},children:[n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:cn.category,onChange:C=>un(F=>({...F,category:C.target.value})),children:[n.jsx("option",{value:"plan",children:"plan"}),n.jsx("option",{value:"quote",children:"quote"}),n.jsx("option",{value:"analysis",children:"analysis"}),n.jsx("option",{value:"other",children:"other"})]}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Nom",value:cn.name,onChange:C=>un(F=>({...F,name:C.target.value})),required:!0}),n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"URL",value:cn.url,onChange:C=>un(F=>({...F,url:C.target.value})),required:!0}),n.jsx("input",{type:"number",min:"0",className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Taille (bytes)",value:cn.size,onChange:C=>un(F=>({...F,size:Number(C.target.value||0)}))}),n.jsx("button",{className:"rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter"})]}),e.documents.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun document."}):e.documents.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:[C.category," · ",C.name]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("a",{href:C.url,target:"_blank",rel:"noreferrer",className:"text-indigo-700",children:"Ouvrir"}),n.jsx("button",{className:"text-red-600",onClick:()=>I(C.id),children:"Supprimer"})]})]},C.id))]}),X==="album"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-6 gap-2",onSubmit:C=>{C.preventDefault(),T(mn),pn(F=>({...F,url:"",thumbnail_url:"",caption:""}))},children:[n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:mn.media_type,onChange:C=>pn(F=>({...F,media_type:C.target.value})),children:[n.jsx("option",{value:"image",children:"image"}),n.jsx("option",{value:"video",children:"video"})]}),n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"URL média",value:mn.url,onChange:C=>pn(F=>({...F,url:C.target.value})),required:!0}),n.jsx("input",{className:"sm:col-span-2 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Thumbnail URL",value:mn.thumbnail_url,onChange:C=>pn(F=>({...F,thumbnail_url:C.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Caption",value:mn.caption,onChange:C=>pn(F=>({...F,caption:C.target.value}))}),n.jsx("button",{className:"sm:col-span-6 rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter média"})]}),e.mediaItems.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Album vide."}):e.mediaItems.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:[C.type," · ",C.caption||"sans légende"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("a",{href:C.url,target:"_blank",rel:"noreferrer",className:"text-indigo-700",children:"Ouvrir"}),n.jsx("button",{className:"text-red-600",onClick:()=>W(C.id),children:"Supprimer"})]})]},C.id))]}),X==="meetings"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("form",{className:"grid sm:grid-cols-5 gap-2",onSubmit:C=>{C.preventDefault(),O(Gt),Kt(F=>({...F,title:"",location:""}))},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Titre",value:Gt.title,onChange:C=>Kt(F=>({...F,title:C.target.value})),required:!0}),n.jsx("input",{type:"date",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Gt.date,onChange:C=>Kt(F=>({...F,date:C.target.value})),required:!0}),n.jsx("input",{type:"time",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Gt.time,onChange:C=>Kt(F=>({...F,time:C.target.value})),required:!0}),n.jsx("input",{type:"number",min:"15",step:"15",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:Gt.duration,onChange:C=>Kt(F=>({...F,duration:Number(C.target.value||60)}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Lieu",value:Gt.location,onChange:C=>Kt(F=>({...F,location:C.target.value}))}),n.jsx("button",{className:"sm:col-span-5 rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Planifier"})]}),e.meetings.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune réunion planifiée."}):e.meetings.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:[C.date," ",C.time," · ",C.title," · ",C.location||"sans lieu"]}),n.jsx("button",{className:"text-red-600",onClick:()=>B(C.id),children:"Supprimer"})]},C.id))]}),X==="co-gestion"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"rounded border border-stone-200 p-3",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800 mb-2",children:"Suivi plantes"}),n.jsxs("form",{className:"grid sm:grid-cols-5 gap-2",onSubmit:C=>{C.preventDefault(),V(wt),Ft({marker_id:"",palette_item_id:"",status:"alive",health_score:100,notes:""})},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Marker ID (optionnel)",value:wt.marker_id,onChange:C=>Ft(F=>({...F,marker_id:C.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Palette item ID (optionnel)",value:wt.palette_item_id,onChange:C=>Ft(F=>({...F,palette_item_id:C.target.value}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:wt.status,onChange:C=>Ft(F=>({...F,status:C.target.value})),children:[n.jsx("option",{value:"alive",children:"alive"}),n.jsx("option",{value:"dead",children:"dead"}),n.jsx("option",{value:"to-replace",children:"to-replace"}),n.jsx("option",{value:"replaced",children:"replaced"})]}),n.jsx("input",{type:"number",min:"0",max:"100",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:wt.health_score,onChange:C=>Ft(F=>({...F,health_score:Number(C.target.value||0)}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Notes",value:wt.notes,onChange:C=>Ft(F=>({...F,notes:C.target.value}))}),n.jsx("button",{className:"sm:col-span-5 rounded border border-stone-300 px-3 py-2 text-sm",children:"Ajouter plant record"})]}),n.jsx("div",{className:"mt-3 space-y-2",children:(((Xt=e.plantFollowUp)==null?void 0:Xt.plantRecords)||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucun plant record."}):e.plantFollowUp.plantRecords.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:[C.status," · santé ",C.healthScore,"/100 · ",C.notes||"sans note"]}),n.jsx("button",{className:"text-indigo-700",onClick:()=>{const F=window.prompt("Nouveau status (alive/dead/to-replace/replaced)",C.status);F&&q(C.id,{status:F})},children:"Changer status"})]},C.id))})]}),n.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"rounded border border-stone-200 p-3 space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800",children:"Visites"}),n.jsxs("form",{className:"grid gap-2",onSubmit:C=>{C.preventDefault(),k(fn),ar(F=>({...F,notes:""}))},children:[n.jsx("input",{type:"date",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:fn.date,onChange:C=>ar(F=>({...F,date:C.target.value})),required:!0}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:fn.visit_type,onChange:C=>ar(F=>({...F,visit_type:C.target.value})),children:[n.jsx("option",{value:"follow-up",children:"follow-up"}),n.jsx("option",{value:"intervention",children:"intervention"}),n.jsx("option",{value:"client-meeting",children:"client-meeting"})]}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Notes",value:fn.notes,onChange:C=>ar(F=>({...F,notes:C.target.value}))}),n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",children:"Ajouter visite"})]}),(((Ho=e.plantFollowUp)==null?void 0:Ho.followUpVisits)||[]).map(C=>n.jsxs("p",{className:"text-sm text-stone-700",children:[C.date," · ",C.type," · ",C.notes||"-"]},C.id))]}),n.jsxs("div",{className:"rounded border border-stone-200 p-3 space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800",children:"Interventions"}),n.jsxs("form",{className:"grid gap-2",onSubmit:C=>{C.preventDefault(),b(An),ir(F=>({...F,notes:""}))},children:[n.jsx("input",{type:"date",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:An.date,onChange:C=>ir(F=>({...F,date:C.target.value})),required:!0}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:An.intervention_type,onChange:C=>ir(F=>({...F,intervention_type:C.target.value})),children:[n.jsx("option",{value:"planting",children:"planting"}),n.jsx("option",{value:"mulching",children:"mulching"}),n.jsx("option",{value:"pruning",children:"pruning"}),n.jsx("option",{value:"watering",children:"watering"}),n.jsx("option",{value:"treatment",children:"treatment"}),n.jsx("option",{value:"replacement",children:"replacement"}),n.jsx("option",{value:"other",children:"other"})]}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Plant record ID (optionnel)",value:An.plant_record_id,onChange:C=>ir(F=>({...F,plant_record_id:C.target.value}))}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Notes",value:An.notes,onChange:C=>ir(F=>({...F,notes:C.target.value}))}),n.jsx("button",{className:"rounded border border-stone-300 px-3 py-2 text-sm",children:"Ajouter intervention"})]}),(((Vo=e.plantFollowUp)==null?void 0:Vo.interventions)||[]).map(C=>n.jsxs("p",{className:"text-sm text-stone-700",children:[C.date," · ",C.type," · ",C.notes||"-"]},C.id))]})]}),n.jsxs("div",{className:"rounded border border-stone-200 p-3",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800 mb-2",children:"Annotations plan"}),n.jsxs("form",{className:"grid sm:grid-cols-6 gap-2",onSubmit:C=>{C.preventDefault(),z(at),H(F=>({...F,content:""}))},children:[n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Document ID",value:at.document_id,onChange:C=>H(F=>({...F,document_id:C.target.value})),required:!0}),n.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:at.x,onChange:C=>H(F=>({...F,x:Number(C.target.value||0)}))}),n.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",className:"rounded border border-stone-300 px-2 py-1 text-sm",value:at.y,onChange:C=>H(F=>({...F,y:Number(C.target.value||0)}))}),n.jsxs("select",{className:"rounded border border-stone-300 px-2 py-1 text-sm",value:at.author_type,onChange:C=>H(F=>({...F,author_type:C.target.value})),children:[n.jsx("option",{value:"team",children:"team"}),n.jsx("option",{value:"client",children:"client"})]}),n.jsx("input",{className:"rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Auteur",value:at.author_name,onChange:C=>H(F=>({...F,author_name:C.target.value}))}),n.jsx("input",{className:"sm:col-span-6 rounded border border-stone-300 px-2 py-1 text-sm",placeholder:"Contenu",value:at.content,onChange:C=>H(F=>({...F,content:C.target.value})),required:!0}),n.jsx("button",{className:"sm:col-span-6 rounded bg-[#AFBD00] px-2 py-1 text-sm font-medium",children:"Ajouter annotation"})]}),n.jsx("div",{className:"mt-3 space-y-2",children:e.annotations.length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Aucune annotation."}):e.annotations.map(C=>n.jsxs("div",{className:"rounded border border-stone-200 p-2 text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:[C.authorType," · ",C.content," · ",C.resolved?"résolue":"ouverte"]}),n.jsxs("div",{className:"flex gap-2",children:[!C.resolved&&n.jsx("button",{className:"text-emerald-700",onClick:()=>J(C.id),children:"Résoudre"}),n.jsx("button",{className:"text-red-600",onClick:()=>L(C.id),children:"Supprimer"})]})]},C.id))})]}),n.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"rounded border border-stone-200 p-3",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800 mb-2",children:"Harvest calendar"}),(((qo=e.harvestCalendar)==null?void 0:qo.months)||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Calendrier vide."}):e.harvestCalendar.months.slice(0,6).map(C=>{var F;return n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-sm text-stone-700",children:[C.name,": ",((F=C.harvests)==null?void 0:F.length)||0," récoltes"]}),n.jsx("button",{className:"text-xs text-indigo-700",onClick:()=>{const $e=window.prompt("Produit récolté (ex: fruits)","fruits"),Fr=window.prompt("Espèce","");if(!$e||!Fr)return;const el=[...C.harvests||[],{product:$e,species:Fr,commonName:"",notes:""}];K(C.month,el)},children:"Ajouter"})]},C.month)})]}),n.jsxs("div",{className:"rounded border border-stone-200 p-3",children:[n.jsx("p",{className:"text-sm font-medium text-stone-800 mb-2",children:"Maintenance calendar"}),(((Jo=e.maintenanceCalendar)==null?void 0:Jo.months)||[]).length===0?n.jsx("p",{className:"text-sm text-stone-500",children:"Calendrier vide."}):e.maintenanceCalendar.months.slice(0,6).map(C=>{var F;return n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("p",{className:"text-sm text-stone-700",children:[C.name,": ",((F=C.tasks)==null?void 0:F.length)||0," tâches"]}),n.jsx("button",{className:"text-xs text-indigo-700",onClick:()=>{const $e=window.prompt("Nouvelle tâche","");if(!$e)return;const Fr=[...C.tasks||[],{title:$e,description:"",videoUrl:null,photos:[]}];re(C.month,Fr)},children:"Ajouter"})]},C.month)})]})]})]})]})]})})}function Xg({initialProjectId:e}){var K,re,ee;const t=new URLSearchParams(window.location.search).get("palette_id"),[r,s]=E.useState(!0),[o,a]=E.useState(!1),[i,l]=E.useState(null),[d,u]=E.useState(null),[c,f]=E.useState([]),[p,w]=E.useState(null),[m,x]=E.useState([]),[h,y]=E.useState(null),[g,j]=E.useState([]),[v,N]=E.useState(!1),[S,A]=E.useState(Au),[D,R]=E.useState(null),P=E.useCallback(async()=>{const $=await ae("/api/v1/design");f($.projects||[]),w($.stats||{activeProjects:0,pendingProjects:0,totalProjects:0,totalHoursThisMonth:0,totalRevenueThisYear:0,quoteConversionRate:0,upcomingMeetings:[]}),x($.templates||[])},[]),I=E.useCallback(async $=>{const X=await ae(`/api/v1/design/${$}`);y(X),j([])},[]);E.useEffect(()=>{let $=!0;async function X(){s(!0),l(null);try{await P(),e?(await I(e),window.history.replaceState({},"",`/app/design/${e}`)):t&&$&&u(`Palette ${t} reçue depuis Plant Database.`)}catch(ce){$&&l(ce.message)}finally{$&&s(!1)}}return X(),()=>{$=!1}},[e,P,I,t]);const T=E.useCallback(async($,X={})=>{a(!0),l(null);try{return await $(),X.refreshDashboard!==!1&&await P(),X.refreshProjectId&&await I(X.refreshProjectId),!0}catch(ce){return l(ce.message),!1}finally{a(!1)}},[P,I]),W=E.useCallback($=>{R($||null),A(Au()),N(!0)},[]),O=E.useCallback(($,X)=>{if($==="template_id"){R(X);return}A(ce=>({...ce,[$]:X}))},[]),B=E.useCallback(async()=>{await T(async()=>{const X=await ae("/api/v1/design",{method:"POST",body:JSON.stringify({template_id:D,name:S.name,client_name:S.client_name,client_email:S.client_email,client_phone:S.client_phone,address:S.address,area:Number(S.area||0)})});await I(X.id),window.history.pushState({},"",`/app/design/${X.id}`),u("Projet créé.")})&&N(!1)},[S,T,D,I]),z=E.useCallback(async $=>{await T(async()=>{await I($),window.history.pushState({},"",`/app/design/${$}`)},{refreshDashboard:!1})},[I,T]),J=E.useCallback($=>{window.confirm("Supprimer ce projet ?")&&T(async()=>{var X;await ae(`/api/v1/design/${$}`,{method:"DELETE"}),((X=h==null?void 0:h.project)==null?void 0:X.id)===$&&(y(null),window.history.pushState({},"","/app/design")),u("Projet supprimé.")})},[(K=h==null?void 0:h.project)==null?void 0:K.id,T]),L=E.useCallback($=>{T(async()=>{const X=await ae(`/api/v1/design/${$}/duplicate`,{method:"POST"});await I(X.id),window.history.pushState({},"",`/app/design/${X.id}`),u("Projet dupliqué.")})},[I,T]),V=E.useCallback($=>{const X=c.find(xe=>xe.id===$);if(!X)return;const ce=window.prompt("Nouveau nom du projet",X.name);!ce||ce.trim()===""||T(async()=>{var xe;await ae(`/api/v1/design/${$}`,{method:"PATCH",body:JSON.stringify({name:ce.trim()})}),((xe=h==null?void 0:h.project)==null?void 0:xe.id)===$&&await I($),u("Projet mis à jour.")})},[I,(re=h==null?void 0:h.project)==null?void 0:re.id,c,T]),q=E.useMemo(()=>({projects:c,stats:p,templates:m,onViewProject:z,onEditProject:V,onDeleteProject:J,onCreateProject:W,onDuplicateProject:L}),[J,L,V,W,c,p,m,z]),k=(ee=h==null?void 0:h.project)==null?void 0:ee.id,b=E.useMemo(()=>k?{refresh:()=>I(k),updateName:()=>V(k),addTeamMember:$=>T(()=>ae(`/api/v1/design/${k}/team-members`,{method:"POST",body:JSON.stringify({member_id:`member-${Math.random().toString(36).slice(2,8)}`,member_name:$.member_name,member_email:$.member_email,role:$.role,is_paid:$.is_paid})}),{refreshProjectId:k}),removeTeamMember:$=>T(()=>ae(`/api/v1/design/${k}/team-members/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addTimesheet:$=>T(()=>ae(`/api/v1/design/${k}/timesheets`,{method:"POST",body:JSON.stringify({member_id:`member-${Math.random().toString(36).slice(2,8)}`,member_name:$.member_name,date:new Date().toISOString().slice(0,10),hours:$.hours,phase:$.phase,mode:$.mode,travel_km:$.travel_km,notes:$.notes})}),{refreshProjectId:k}),deleteTimesheet:$=>T(()=>ae(`/api/v1/design/timesheets/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addExpense:$=>T(()=>ae(`/api/v1/design/${k}/expenses`,{method:"POST",body:JSON.stringify({date:new Date().toISOString().slice(0,10),amount:$.amount,category:$.category,description:$.description,phase:$.phase,member_id:`member-${Math.random().toString(36).slice(2,8)}`,member_name:$.member_name,status:"pending"})}),{refreshProjectId:k}),approveExpense:$=>T(()=>ae(`/api/v1/design/expenses/${$}/approve`,{method:"PATCH"}),{refreshProjectId:k}),deleteExpense:$=>T(()=>ae(`/api/v1/design/expenses/${$}`,{method:"DELETE"}),{refreshProjectId:k}),saveSiteAnalysis:$=>T(()=>ae(`/api/v1/design/${k}/site-analysis`,{method:"PATCH",body:JSON.stringify({climate:{hardinessZone:$.hardinessZone,notes:$.notes},soil:{type:$.soilType}})}),{refreshProjectId:k}),addPaletteItem:$=>T(()=>ae(`/api/v1/design/${k}/palette-items`,{method:"POST",body:JSON.stringify({species_id:$.species_id,species_name:$.species_name,common_name:$.common_name,layer:$.layer,quantity:$.quantity,unit_price:$.unit_price,notes:"",harvest_months:[],harvest_products:[]})}),{refreshProjectId:k}),deletePaletteItem:$=>T(()=>ae(`/api/v1/design/palette-items/${$}`,{method:"DELETE"}),{refreshProjectId:k}),importPlantPalette:$=>{if($)return T(()=>ae(`/api/v1/design/${k}/palette/import/${$}`,{method:"POST"}),{refreshProjectId:k})},savePlantingPlan:$=>T(()=>ae(`/api/v1/design/${k}/planting-plan`,{method:"PATCH",body:JSON.stringify($)}),{refreshProjectId:k}),exportPlan:$=>T(async()=>{const X=await ae(`/api/v1/design/${k}/planting-plan/export`,{method:"POST",body:JSON.stringify({format:$})});X!=null&&X.exportUrl&&window.open(X.exportUrl,"_blank","noopener,noreferrer")},{refreshDashboard:!1,refreshProjectId:null}),addPlantMarker:$=>T(()=>ae(`/api/v1/design/${k}/planting-plan/markers`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),movePlantMarker:($,X)=>T(()=>ae(`/api/v1/design/planting-plan/markers/${$}`,{method:"PATCH",body:JSON.stringify(X)}),{refreshProjectId:k}),deletePlantMarker:$=>T(()=>ae(`/api/v1/design/planting-plan/markers/${$}`,{method:"DELETE"}),{refreshProjectId:k}),createQuote:()=>T(()=>ae(`/api/v1/design/${k}/quotes`,{method:"POST"}),{refreshProjectId:k}),sendQuote:$=>T(()=>ae(`/api/v1/design/quotes/${$}/send`,{method:"PATCH"}),{refreshProjectId:k}),deleteQuote:$=>T(()=>ae(`/api/v1/design/quotes/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addQuoteLine:($,X)=>T(()=>ae(`/api/v1/design/quotes/${$}/lines`,{method:"POST",body:JSON.stringify({description:X.description,quantity:X.quantity,unit:X.unit,unit_price:X.unit_price})}),{refreshProjectId:k}),deleteQuoteLine:$=>T(()=>ae(`/api/v1/design/quote-lines/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addDocument:$=>T(()=>ae(`/api/v1/design/${k}/documents`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),deleteDocument:$=>T(()=>ae(`/api/v1/design/documents/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addMedia:$=>T(()=>ae(`/api/v1/design/${k}/media`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),deleteMedia:$=>T(()=>ae(`/api/v1/design/media/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addMeeting:$=>T(()=>ae(`/api/v1/design/${k}/meetings`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),deleteMeeting:$=>T(()=>ae(`/api/v1/design/meetings/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addAnnotation:$=>T(()=>ae(`/api/v1/design/${k}/annotations`,{method:"POST",body:JSON.stringify({...$,author_id:`member-${Math.random().toString(36).slice(2,8)}`})}),{refreshProjectId:k}),resolveAnnotation:$=>T(()=>ae(`/api/v1/design/annotations/${$}/resolve`,{method:"PATCH"}),{refreshProjectId:k}),deleteAnnotation:$=>T(()=>ae(`/api/v1/design/annotations/${$}`,{method:"DELETE"}),{refreshProjectId:k}),addPlantRecord:$=>T(()=>ae(`/api/v1/design/${k}/plant-records`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),updatePlantRecord:($,X)=>T(()=>ae(`/api/v1/design/plant-records/${$}`,{method:"PATCH",body:JSON.stringify(X)}),{refreshProjectId:k}),addFollowUpVisit:$=>T(()=>ae(`/api/v1/design/${k}/follow-up-visits`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),addIntervention:$=>T(()=>ae(`/api/v1/design/${k}/interventions`,{method:"POST",body:JSON.stringify($)}),{refreshProjectId:k}),updateHarvestCalendar:($,X)=>T(()=>ae(`/api/v1/design/${k}/harvest-calendar`,{method:"PATCH",body:JSON.stringify({month:$,items:X})}),{refreshProjectId:k}),updateMaintenanceCalendar:($,X)=>T(()=>ae(`/api/v1/design/${k}/maintenance-calendar`,{method:"PATCH",body:JSON.stringify({month:$,items:X})}),{refreshProjectId:k}),search:async $=>{if(!$||!$.trim()){j([]);return}const X=await ae(`/api/v1/design/${k}/search?q=${encodeURIComponent($)}`);j(X.results||[])}}:null,[k,V,T,I]);return E.useEffect(()=>{!t||!k||!b||b.importPlantPalette(t)},[k,b,t]),r||!p?n.jsx("main",{className:"min-h-screen bg-stone-50 flex items-center justify-center",children:"Chargement Design Studio..."}):n.jsxs(n.Fragment,{children:[h?n.jsx(Yg,{detail:h,busy:o,onBack:()=>{y(null),window.history.pushState({},"","/app/design")},onRefresh:(b==null?void 0:b.refresh)||(()=>{}),onUpdateName:(b==null?void 0:b.updateName)||(()=>{}),onAddTeamMember:(b==null?void 0:b.addTeamMember)||(()=>{}),onRemoveTeamMember:(b==null?void 0:b.removeTeamMember)||(()=>{}),onAddTimesheet:(b==null?void 0:b.addTimesheet)||(()=>{}),onDeleteTimesheet:(b==null?void 0:b.deleteTimesheet)||(()=>{}),onAddExpense:(b==null?void 0:b.addExpense)||(()=>{}),onApproveExpense:(b==null?void 0:b.approveExpense)||(()=>{}),onDeleteExpense:(b==null?void 0:b.deleteExpense)||(()=>{}),onSaveSiteAnalysis:(b==null?void 0:b.saveSiteAnalysis)||(()=>{}),onAddPaletteItem:(b==null?void 0:b.addPaletteItem)||(()=>{}),onDeletePaletteItem:(b==null?void 0:b.deletePaletteItem)||(()=>{}),onImportPlantPalette:(b==null?void 0:b.importPlantPalette)||(()=>{}),onSavePlantingPlan:(b==null?void 0:b.savePlantingPlan)||(()=>{}),onExportPlan:(b==null?void 0:b.exportPlan)||(()=>{}),onAddPlantMarker:(b==null?void 0:b.addPlantMarker)||(()=>{}),onMovePlantMarker:(b==null?void 0:b.movePlantMarker)||(()=>{}),onDeletePlantMarker:(b==null?void 0:b.deletePlantMarker)||(()=>{}),onCreateQuote:(b==null?void 0:b.createQuote)||(()=>{}),onSendQuote:(b==null?void 0:b.sendQuote)||(()=>{}),onDeleteQuote:(b==null?void 0:b.deleteQuote)||(()=>{}),onAddQuoteLine:(b==null?void 0:b.addQuoteLine)||(()=>{}),onDeleteQuoteLine:(b==null?void 0:b.deleteQuoteLine)||(()=>{}),onAddDocument:(b==null?void 0:b.addDocument)||(()=>{}),onDeleteDocument:(b==null?void 0:b.deleteDocument)||(()=>{}),onAddMedia:(b==null?void 0:b.addMedia)||(()=>{}),onDeleteMedia:(b==null?void 0:b.deleteMedia)||(()=>{}),onAddMeeting:(b==null?void 0:b.addMeeting)||(()=>{}),onDeleteMeeting:(b==null?void 0:b.deleteMeeting)||(()=>{}),onAddAnnotation:(b==null?void 0:b.addAnnotation)||(()=>{}),onResolveAnnotation:(b==null?void 0:b.resolveAnnotation)||(()=>{}),onDeleteAnnotation:(b==null?void 0:b.deleteAnnotation)||(()=>{}),onAddPlantRecord:(b==null?void 0:b.addPlantRecord)||(()=>{}),onUpdatePlantRecord:(b==null?void 0:b.updatePlantRecord)||(()=>{}),onAddFollowUpVisit:(b==null?void 0:b.addFollowUpVisit)||(()=>{}),onAddIntervention:(b==null?void 0:b.addIntervention)||(()=>{}),onUpdateHarvestCalendar:(b==null?void 0:b.updateHarvestCalendar)||(()=>{}),onUpdateMaintenanceCalendar:(b==null?void 0:b.updateMaintenanceCalendar)||(()=>{}),onSearch:(b==null?void 0:b.search)||(()=>{}),searchResults:g}):n.jsx(Jg,{...q}),(i||d||o)&&n.jsxs("div",{className:"fixed bottom-4 right-4 z-40 space-y-2",children:[o&&n.jsx("div",{className:"rounded-lg bg-stone-900 text-white text-xs px-3 py-2",children:"Synchronisation..."}),i&&n.jsx("div",{className:"rounded-lg bg-red-600 text-white text-sm px-3 py-2",children:i}),d&&n.jsxs("div",{className:"rounded-lg bg-emerald-600 text-white text-sm px-3 py-2",children:[d,n.jsx("button",{className:"ml-3 underline",onClick:()=>u(null),children:"Fermer"})]})]}),n.jsx(Kg,{open:v,busy:o,templates:m,selectedTemplateId:D,values:S,onChange:O,onClose:()=>N(!1),onSubmit:B})]})}const Zg=Object.freeze(Object.defineProperty({__proto__:null,default:Xg},Symbol.toStringTag,{value:"Module"}));function up(e,t){return function(){return e.apply(t,arguments)}}const{toString:ev}=Object.prototype,{getPrototypeOf:mc}=Object,{iterator:Ei,toStringTag:mp}=Symbol,Di=(e=>t=>{const r=ev.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Jt=e=>(e=e.toLowerCase(),t=>Di(t)===e),Ai=e=>t=>typeof t===e,{isArray:ks}=Array,cs=Ai("undefined");function So(e){return e!==null&&!cs(e)&&e.constructor!==null&&!cs(e.constructor)&&dt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pp=Jt("ArrayBuffer");function tv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pp(e.buffer),t}const nv=Ai("string"),dt=Ai("function"),fp=Ai("number"),Co=e=>e!==null&&typeof e=="object",rv=e=>e===!0||e===!1,Da=e=>{if(Di(e)!=="object")return!1;const t=mc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(mp in e)&&!(Ei in e)},sv=e=>{if(!Co(e)||So(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ov=Jt("Date"),av=Jt("File"),iv=Jt("Blob"),lv=Jt("FileList"),dv=e=>Co(e)&&dt(e.pipe),cv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dt(e.append)&&((t=Di(e))==="formdata"||t==="object"&&dt(e.toString)&&e.toString()==="[object FormData]"))},uv=Jt("URLSearchParams"),[mv,pv,fv,xv]=["ReadableStream","Request","Response","Headers"].map(Jt),hv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _o(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,o;if(typeof e!="object"&&(e=[e]),ks(e))for(s=0,o=e.length;s<o;s++)t.call(null,e[s],s,e);else{if(So(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let l;for(s=0;s<i;s++)l=a[s],t.call(null,e[l],l,e)}}function xp(e,t){if(So(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,o;for(;s-- >0;)if(o=r[s],t===o.toLowerCase())return o;return null}const hr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hp=e=>!cs(e)&&e!==hr;function rd(){const{caseless:e,skipUndefined:t}=hp(this)&&this||{},r={},s=(o,a)=>{if(a==="__proto__"||a==="constructor"||a==="prototype")return;const i=e&&xp(r,a)||a;Da(r[i])&&Da(o)?r[i]=rd(r[i],o):Da(o)?r[i]=rd({},o):ks(o)?r[i]=o.slice():(!t||!cs(o))&&(r[i]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&_o(arguments[o],s);return r}const gv=(e,t,r,{allOwnKeys:s}={})=>(_o(t,(o,a)=>{r&&dt(o)?Object.defineProperty(e,a,{value:up(o,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,a,{value:o,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),e),vv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yv=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},bv=(e,t,r,s)=>{let o,a,i;const l={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)i=o[a],(!s||s(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=r!==!1&&mc(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},jv=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},kv=e=>{if(!e)return null;if(ks(e))return e;let t=e.length;if(!fp(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},wv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&mc(Uint8Array)),Nv=(e,t)=>{const s=(e&&e[Ei]).call(e);let o;for(;(o=s.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},Sv=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},Cv=Jt("HTMLFormElement"),_v=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,o){return s.toUpperCase()+o}),Pu=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ev=Jt("RegExp"),gp=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};_o(r,(o,a)=>{let i;(i=t(o,a,e))!==!1&&(s[a]=i||o)}),Object.defineProperties(e,s)},Dv=e=>{gp(e,(t,r)=>{if(dt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(dt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Av=(e,t)=>{const r={},s=o=>{o.forEach(a=>{r[a]=!0})};return ks(e)?s(e):s(String(e).split(t)),r},Pv=()=>{},Tv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Bv(e){return!!(e&&dt(e.append)&&e[mp]==="FormData"&&e[Ei])}const Lv=e=>{const t=new Array(10),r=(s,o)=>{if(Co(s)){if(t.indexOf(s)>=0)return;if(So(s))return s;if(!("toJSON"in s)){t[o]=s;const a=ks(s)?[]:{};return _o(s,(i,l)=>{const d=r(i,o+1);!cs(d)&&(a[l]=d)}),t[o]=void 0,a}}return s};return r(e,0)},Mv=Jt("AsyncFunction"),Ov=e=>e&&(Co(e)||dt(e))&&dt(e.then)&&dt(e.catch),vp=((e,t)=>e?setImmediate:t?((r,s)=>(hr.addEventListener("message",({source:o,data:a})=>{o===hr&&a===r&&s.length&&s.shift()()},!1),o=>{s.push(o),hr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",dt(hr.postMessage)),Fv=typeof queueMicrotask<"u"?queueMicrotask.bind(hr):typeof process<"u"&&process.nextTick||vp,Rv=e=>e!=null&&dt(e[Ei]),U={isArray:ks,isArrayBuffer:pp,isBuffer:So,isFormData:cv,isArrayBufferView:tv,isString:nv,isNumber:fp,isBoolean:rv,isObject:Co,isPlainObject:Da,isEmptyObject:sv,isReadableStream:mv,isRequest:pv,isResponse:fv,isHeaders:xv,isUndefined:cs,isDate:ov,isFile:av,isBlob:iv,isRegExp:Ev,isFunction:dt,isStream:dv,isURLSearchParams:uv,isTypedArray:wv,isFileList:lv,forEach:_o,merge:rd,extend:gv,trim:hv,stripBOM:vv,inherits:yv,toFlatObject:bv,kindOf:Di,kindOfTest:Jt,endsWith:jv,toArray:kv,forEachEntry:Nv,matchAll:Sv,isHTMLForm:Cv,hasOwnProperty:Pu,hasOwnProp:Pu,reduceDescriptors:gp,freezeMethods:Dv,toObjectSet:Av,toCamelCase:_v,noop:Pv,toFiniteNumber:Tv,findKey:xp,global:hr,isContextDefined:hp,isSpecCompliantForm:Bv,toJSONObject:Lv,isAsyncFn:Mv,isThenable:Ov,setImmediate:vp,asap:Fv,isIterable:Rv};let oe=class yp extends Error{static from(t,r,s,o,a,i){const l=new yp(t.message,r||t.code,s,o,a);return l.cause=t,l.name=t.name,i&&Object.assign(l,i),l}constructor(t,r,s,o,a){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),s&&(this.config=s),o&&(this.request=o),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}};oe.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";oe.ERR_BAD_OPTION="ERR_BAD_OPTION";oe.ECONNABORTED="ECONNABORTED";oe.ETIMEDOUT="ETIMEDOUT";oe.ERR_NETWORK="ERR_NETWORK";oe.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";oe.ERR_DEPRECATED="ERR_DEPRECATED";oe.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";oe.ERR_BAD_REQUEST="ERR_BAD_REQUEST";oe.ERR_CANCELED="ERR_CANCELED";oe.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";oe.ERR_INVALID_URL="ERR_INVALID_URL";const $v=null;function sd(e){return U.isPlainObject(e)||U.isArray(e)}function bp(e){return U.endsWith(e,"[]")?e.slice(0,-2):e}function Tu(e,t,r){return e?e.concat(t).map(function(o,a){return o=bp(o),!r&&a?"["+o+"]":o}).join(r?".":""):t}function Iv(e){return U.isArray(e)&&!e.some(sd)}const zv=U.toFlatObject(U,{},null,function(t){return/^is[A-Z]/.test(t)});function Pi(e,t,r){if(!U.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=U.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,h){return!U.isUndefined(h[x])});const s=r.metaTokens,o=r.visitor||c,a=r.dots,i=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(o))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(U.isDate(m))return m.toISOString();if(U.isBoolean(m))return m.toString();if(!d&&U.isBlob(m))throw new oe("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(m)||U.isTypedArray(m)?d&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function c(m,x,h){let y=m;if(m&&!h&&typeof m=="object"){if(U.endsWith(x,"{}"))x=s?x:x.slice(0,-2),m=JSON.stringify(m);else if(U.isArray(m)&&Iv(m)||(U.isFileList(m)||U.endsWith(x,"[]"))&&(y=U.toArray(m)))return x=bp(x),y.forEach(function(j,v){!(U.isUndefined(j)||j===null)&&t.append(i===!0?Tu([x],v,a):i===null?x:x+"[]",u(j))}),!1}return sd(m)?!0:(t.append(Tu(h,x,a),u(m)),!1)}const f=[],p=Object.assign(zv,{defaultVisitor:c,convertValue:u,isVisitable:sd});function w(m,x){if(!U.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+x.join("."));f.push(m),U.forEach(m,function(y,g){(!(U.isUndefined(y)||y===null)&&o.call(t,y,U.isString(g)?g.trim():g,x,p))===!0&&w(y,x?x.concat(g):[g])}),f.pop()}}if(!U.isObject(e))throw new TypeError("data must be an object");return w(e),t}function Bu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function pc(e,t){this._pairs=[],e&&Pi(e,this,t)}const jp=pc.prototype;jp.append=function(t,r){this._pairs.push([t,r])};jp.toString=function(t){const r=t?function(s){return t.call(this,s,Bu)}:Bu;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function Wv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function kp(e,t,r){if(!t)return e;const s=r&&r.encode||Wv,o=U.isFunction(r)?{serialize:r}:r,a=o&&o.serialize;let i;if(a?i=a(t,o):i=U.isURLSearchParams(t)?t.toString():new pc(t,o).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Lu{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){U.forEach(this.handlers,function(s){s!==null&&t(s)})}}const fc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},Uv=typeof URLSearchParams<"u"?URLSearchParams:pc,Hv=typeof FormData<"u"?FormData:null,Vv=typeof Blob<"u"?Blob:null,qv={isBrowser:!0,classes:{URLSearchParams:Uv,FormData:Hv,Blob:Vv},protocols:["http","https","file","blob","url","data"]},xc=typeof window<"u"&&typeof document<"u",od=typeof navigator=="object"&&navigator||void 0,Jv=xc&&(!od||["ReactNative","NativeScript","NS"].indexOf(od.product)<0),Qv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gv=xc&&window.location.href||"http://localhost",Kv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xc,hasStandardBrowserEnv:Jv,hasStandardBrowserWebWorkerEnv:Qv,navigator:od,origin:Gv},Symbol.toStringTag,{value:"Module"})),et={...Kv,...qv};function Yv(e,t){return Pi(e,new et.classes.URLSearchParams,{visitor:function(r,s,o,a){return et.isNode&&U.isBuffer(r)?(this.append(s,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function Xv(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Zv(e){const t={},r=Object.keys(e);let s;const o=r.length;let a;for(s=0;s<o;s++)a=r[s],t[a]=e[a];return t}function wp(e){function t(r,s,o,a){let i=r[a++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),d=a>=r.length;return i=!i&&U.isArray(o)?o.length:i,d?(U.hasOwnProp(o,i)?o[i]=[o[i],s]:o[i]=s,!l):((!o[i]||!U.isObject(o[i]))&&(o[i]=[]),t(r,s,o[i],a)&&U.isArray(o[i])&&(o[i]=Zv(o[i])),!l)}if(U.isFormData(e)&&U.isFunction(e.entries)){const r={};return U.forEachEntry(e,(s,o)=>{t(Xv(s),o,r,0)}),r}return null}function e1(e,t,r){if(U.isString(e))try{return(t||JSON.parse)(e),U.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Eo={transitional:fc,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",o=s.indexOf("application/json")>-1,a=U.isObject(t);if(a&&U.isHTMLForm(t)&&(t=new FormData(t)),U.isFormData(t))return o?JSON.stringify(wp(t)):t;if(U.isArrayBuffer(t)||U.isBuffer(t)||U.isStream(t)||U.isFile(t)||U.isBlob(t)||U.isReadableStream(t))return t;if(U.isArrayBufferView(t))return t.buffer;if(U.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Yv(t,this.formSerializer).toString();if((l=U.isFileList(t))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Pi(l?{"files[]":t}:t,d&&new d,this.formSerializer)}}return a||o?(r.setContentType("application/json",!1),e1(t)):t}],transformResponse:[function(t){const r=this.transitional||Eo.transitional,s=r&&r.forcedJSONParsing,o=this.responseType==="json";if(U.isResponse(t)||U.isReadableStream(t))return t;if(t&&U.isString(t)&&(s&&!this.responseType||o)){const i=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?oe.from(l,oe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:et.classes.FormData,Blob:et.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],e=>{Eo.headers[e]={}});const t1=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n1=e=>{const t={};let r,s,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),r=i.substring(0,o).trim().toLowerCase(),s=i.substring(o+1).trim(),!(!r||t[r]&&t1[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Mu=Symbol("internals");function Ds(e){return e&&String(e).trim().toLowerCase()}function Aa(e){return e===!1||e==null?e:U.isArray(e)?e.map(Aa):String(e)}function r1(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const s1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rl(e,t,r,s,o){if(U.isFunction(s))return s.call(this,t,r);if(o&&(t=r),!!U.isString(t)){if(U.isString(s))return t.indexOf(s)!==-1;if(U.isRegExp(s))return s.test(t)}}function o1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function a1(e,t){const r=U.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(o,a,i){return this[s].call(this,t,o,a,i)},configurable:!0})})}let ct=class{constructor(t){t&&this.set(t)}set(t,r,s){const o=this;function a(l,d,u){const c=Ds(d);if(!c)throw new Error("header name must be a non-empty string");const f=U.findKey(o,c);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||d]=Aa(l))}const i=(l,d)=>U.forEach(l,(u,c)=>a(u,c,d));if(U.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(U.isString(t)&&(t=t.trim())&&!s1(t))i(n1(t),r);else if(U.isObject(t)&&U.isIterable(t)){let l={},d,u;for(const c of t){if(!U.isArray(c))throw TypeError("Object iterator must return a key-value pair");l[u=c[0]]=(d=l[u])?U.isArray(d)?[...d,c[1]]:[d,c[1]]:c[1]}i(l,r)}else t!=null&&a(r,t,s);return this}get(t,r){if(t=Ds(t),t){const s=U.findKey(this,t);if(s){const o=this[s];if(!r)return o;if(r===!0)return r1(o);if(U.isFunction(r))return r.call(this,o,s);if(U.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ds(t),t){const s=U.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||rl(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let o=!1;function a(i){if(i=Ds(i),i){const l=U.findKey(s,i);l&&(!r||rl(s,s[l],l,r))&&(delete s[l],o=!0)}}return U.isArray(t)?t.forEach(a):a(t),o}clear(t){const r=Object.keys(this);let s=r.length,o=!1;for(;s--;){const a=r[s];(!t||rl(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const r=this,s={};return U.forEach(this,(o,a)=>{const i=U.findKey(s,a);if(i){r[i]=Aa(o),delete r[a];return}const l=t?o1(a):String(a).trim();l!==a&&delete r[a],r[l]=Aa(o),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return U.forEach(this,(s,o)=>{s!=null&&s!==!1&&(r[o]=t&&U.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(o=>s.set(o)),s}static accessor(t){const s=(this[Mu]=this[Mu]={accessors:{}}).accessors,o=this.prototype;function a(i){const l=Ds(i);s[l]||(a1(o,i),s[l]=!0)}return U.isArray(t)?t.forEach(a):a(t),this}};ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(ct.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});U.freezeMethods(ct);function sl(e,t){const r=this||Eo,s=t||r,o=ct.from(s.headers);let a=s.data;return U.forEach(e,function(l){a=l.call(r,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function Np(e){return!!(e&&e.__CANCEL__)}let Do=class extends oe{constructor(t,r,s){super(t??"canceled",oe.ERR_CANCELED,r,s),this.name="CanceledError",this.__CANCEL__=!0}};function Sp(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new oe("Request failed with status code "+r.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function i1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function l1(e,t){e=e||10;const r=new Array(e),s=new Array(e);let o=0,a=0,i;return t=t!==void 0?t:1e3,function(d){const u=Date.now(),c=s[a];i||(i=u),r[o]=d,s[o]=u;let f=a,p=0;for(;f!==o;)p+=r[f++],f=f%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),u-i<t)return;const w=c&&u-c;return w?Math.round(p*1e3/w):void 0}}function d1(e,t){let r=0,s=1e3/t,o,a;const i=(u,c=Date.now())=>{r=c,o=null,a&&(clearTimeout(a),a=null),e(...u)};return[(...u)=>{const c=Date.now(),f=c-r;f>=s?i(u,c):(o=u,a||(a=setTimeout(()=>{a=null,i(o)},s-f)))},()=>o&&i(o)]}const Ga=(e,t,r=3)=>{let s=0;const o=l1(50,250);return d1(a=>{const i=a.loaded,l=a.lengthComputable?a.total:void 0,d=i-s,u=o(d),c=i<=l;s=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:d,rate:u||void 0,estimated:u&&l&&c?(l-i)/u:void 0,event:a,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},Ou=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Fu=e=>(...t)=>U.asap(()=>e(...t)),c1=et.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,et.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(et.origin),et.navigator&&/(msie|trident)/i.test(et.navigator.userAgent)):()=>!0,u1=et.hasStandardBrowserEnv?{write(e,t,r,s,o,a,i){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];U.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),U.isString(s)&&l.push(`path=${s}`),U.isString(o)&&l.push(`domain=${o}`),a===!0&&l.push("secure"),U.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function m1(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function p1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Cp(e,t,r){let s=!m1(t);return e&&(s||r==!1)?p1(e,t):t}const Ru=e=>e instanceof ct?{...e}:e;function Nr(e,t){t=t||{};const r={};function s(u,c,f,p){return U.isPlainObject(u)&&U.isPlainObject(c)?U.merge.call({caseless:p},u,c):U.isPlainObject(c)?U.merge({},c):U.isArray(c)?c.slice():c}function o(u,c,f,p){if(U.isUndefined(c)){if(!U.isUndefined(u))return s(void 0,u,f,p)}else return s(u,c,f,p)}function a(u,c){if(!U.isUndefined(c))return s(void 0,c)}function i(u,c){if(U.isUndefined(c)){if(!U.isUndefined(u))return s(void 0,u)}else return s(void 0,c)}function l(u,c,f){if(f in t)return s(u,c);if(f in e)return s(void 0,u)}const d={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,c,f)=>o(Ru(u),Ru(c),f,!0)};return U.forEach(Object.keys({...e,...t}),function(c){if(c==="__proto__"||c==="constructor"||c==="prototype")return;const f=U.hasOwnProp(d,c)?d[c]:o,p=f(e[c],t[c],c);U.isUndefined(p)&&f!==l||(r[c]=p)}),r}const _p=e=>{const t=Nr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:a,headers:i,auth:l}=t;if(t.headers=i=ct.from(i),t.url=kp(Cp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),U.isFormData(r)){if(et.hasStandardBrowserEnv||et.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(U.isFunction(r.getHeaders)){const d=r.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([c,f])=>{u.includes(c.toLowerCase())&&i.set(c,f)})}}if(et.hasStandardBrowserEnv&&(s&&U.isFunction(s)&&(s=s(t)),s||s!==!1&&c1(t.url))){const d=o&&a&&u1.read(a);d&&i.set(o,d)}return t},f1=typeof XMLHttpRequest<"u",x1=f1&&function(e){return new Promise(function(r,s){const o=_p(e);let a=o.data;const i=ct.from(o.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:u}=o,c,f,p,w,m;function x(){w&&w(),m&&m(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let h=new XMLHttpRequest;h.open(o.method.toUpperCase(),o.url,!0),h.timeout=o.timeout;function y(){if(!h)return;const j=ct.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:j,config:e,request:h};Sp(function(A){r(A),x()},function(A){s(A),x()},N),h=null}"onloadend"in h?h.onloadend=y:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(y)},h.onabort=function(){h&&(s(new oe("Request aborted",oe.ECONNABORTED,e,h)),h=null)},h.onerror=function(v){const N=v&&v.message?v.message:"Network Error",S=new oe(N,oe.ERR_NETWORK,e,h);S.event=v||null,s(S),h=null},h.ontimeout=function(){let v=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const N=o.transitional||fc;o.timeoutErrorMessage&&(v=o.timeoutErrorMessage),s(new oe(v,N.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,e,h)),h=null},a===void 0&&i.setContentType(null),"setRequestHeader"in h&&U.forEach(i.toJSON(),function(v,N){h.setRequestHeader(N,v)}),U.isUndefined(o.withCredentials)||(h.withCredentials=!!o.withCredentials),l&&l!=="json"&&(h.responseType=o.responseType),u&&([p,m]=Ga(u,!0),h.addEventListener("progress",p)),d&&h.upload&&([f,w]=Ga(d),h.upload.addEventListener("progress",f),h.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(c=j=>{h&&(s(!j||j.type?new Do(null,e,h):j),h.abort(),h=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const g=i1(o.url);if(g&&et.protocols.indexOf(g)===-1){s(new oe("Unsupported protocol "+g+":",oe.ERR_BAD_REQUEST,e));return}h.send(a||null)})},h1=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,o;const a=function(u){if(!o){o=!0,l();const c=u instanceof Error?u:this.reason;s.abort(c instanceof oe?c:new Do(c instanceof Error?c.message:c))}};let i=t&&setTimeout(()=>{i=null,a(new oe(`timeout of ${t}ms exceeded`,oe.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:d}=s;return d.unsubscribe=()=>U.asap(l),d}},g1=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,o;for(;s<r;)o=s+t,yield e.slice(s,o),s=o},v1=async function*(e,t){for await(const r of y1(e))yield*g1(r,t)},y1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},$u=(e,t,r,s)=>{const o=v1(e,t);let a=0,i,l=d=>{i||(i=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:u,value:c}=await o.next();if(u){l(),d.close();return}let f=c.byteLength;if(r){let p=a+=f;r(p)}d.enqueue(new Uint8Array(c))}catch(u){throw l(u),u}},cancel(d){return l(d),o.return()}},{highWaterMark:2})},Iu=64*1024,{isFunction:na}=U,b1=(({Request:e,Response:t})=>({Request:e,Response:t}))(U.global),{ReadableStream:zu,TextEncoder:Wu}=U.global,Uu=(e,...t)=>{try{return!!e(...t)}catch{return!1}},j1=e=>{e=U.merge.call({skipUndefined:!0},b1,e);const{fetch:t,Request:r,Response:s}=e,o=t?na(t):typeof fetch=="function",a=na(r),i=na(s);if(!o)return!1;const l=o&&na(zu),d=o&&(typeof Wu=="function"?(m=>x=>m.encode(x))(new Wu):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=a&&l&&Uu(()=>{let m=!1;const x=new r(et.origin,{body:new zu,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!x}),c=i&&l&&Uu(()=>U.isReadableStream(new s("").body)),f={stream:c&&(m=>m.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(x,h)=>{let y=x&&x[m];if(y)return y.call(x);throw new oe(`Response type '${m}' is not supported`,oe.ERR_NOT_SUPPORT,h)})});const p=async m=>{if(m==null)return 0;if(U.isBlob(m))return m.size;if(U.isSpecCompliantForm(m))return(await new r(et.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(U.isArrayBufferView(m)||U.isArrayBuffer(m))return m.byteLength;if(U.isURLSearchParams(m)&&(m=m+""),U.isString(m))return(await d(m)).byteLength},w=async(m,x)=>{const h=U.toFiniteNumber(m.getContentLength());return h??p(x)};return async m=>{let{url:x,method:h,data:y,signal:g,cancelToken:j,timeout:v,onDownloadProgress:N,onUploadProgress:S,responseType:A,headers:D,withCredentials:R="same-origin",fetchOptions:P}=_p(m),I=t||fetch;A=A?(A+"").toLowerCase():"text";let T=h1([g,j&&j.toAbortSignal()],v),W=null;const O=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let B;try{if(S&&u&&h!=="get"&&h!=="head"&&(B=await w(D,y))!==0){let k=new r(x,{method:"POST",body:y,duplex:"half"}),b;if(U.isFormData(y)&&(b=k.headers.get("content-type"))&&D.setContentType(b),k.body){const[K,re]=Ou(B,Ga(Fu(S)));y=$u(k.body,Iu,K,re)}}U.isString(R)||(R=R?"include":"omit");const z=a&&"credentials"in r.prototype,J={...P,signal:T,method:h.toUpperCase(),headers:D.normalize().toJSON(),body:y,duplex:"half",credentials:z?R:void 0};W=a&&new r(x,J);let L=await(a?I(W,P):I(x,J));const V=c&&(A==="stream"||A==="response");if(c&&(N||V&&O)){const k={};["status","statusText","headers"].forEach(ee=>{k[ee]=L[ee]});const b=U.toFiniteNumber(L.headers.get("content-length")),[K,re]=N&&Ou(b,Ga(Fu(N),!0))||[];L=new s($u(L.body,Iu,K,()=>{re&&re(),O&&O()}),k)}A=A||"text";let q=await f[U.findKey(f,A)||"text"](L,m);return!V&&O&&O(),await new Promise((k,b)=>{Sp(k,b,{data:q,headers:ct.from(L.headers),status:L.status,statusText:L.statusText,config:m,request:W})})}catch(z){throw O&&O(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,m,W,z&&z.response),{cause:z.cause||z}):oe.from(z,z&&z.code,m,W,z&&z.response)}}},k1=new Map,Ep=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:o}=t,a=[s,o,r];let i=a.length,l=i,d,u,c=k1;for(;l--;)d=a[l],u=c.get(d),u===void 0&&c.set(d,u=l?new Map:j1(t)),c=u;return u};Ep();const hc={http:$v,xhr:x1,fetch:{get:Ep}};U.forEach(hc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Hu=e=>`- ${e}`,w1=e=>U.isFunction(e)||e===null||e===!1;function N1(e,t){e=U.isArray(e)?e:[e];const{length:r}=e;let s,o;const a={};for(let i=0;i<r;i++){s=e[i];let l;if(o=s,!w1(s)&&(o=hc[(l=String(s)).toLowerCase()],o===void 0))throw new oe(`Unknown adapter '${l}'`);if(o&&(U.isFunction(o)||(o=o.get(t))))break;a[l||"#"+i]=o}if(!o){const i=Object.entries(a).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?i.length>1?`since :
`+i.map(Hu).join(`
`):" "+Hu(i[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return o}const Dp={getAdapter:N1,adapters:hc};function ol(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Do(null,e)}function Vu(e){return ol(e),e.headers=ct.from(e.headers),e.data=sl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Dp.getAdapter(e.adapter||Eo.adapter,e)(e).then(function(s){return ol(e),s.data=sl.call(e,e.transformResponse,s),s.headers=ct.from(s.headers),s},function(s){return Np(s)||(ol(e),s&&s.response&&(s.response.data=sl.call(e,e.transformResponse,s.response),s.response.headers=ct.from(s.response.headers))),Promise.reject(s)})}const Ap="1.13.5",Ti={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ti[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const qu={};Ti.transitional=function(t,r,s){function o(a,i){return"[Axios v"+Ap+"] Transitional option '"+a+"'"+i+(s?". "+s:"")}return(a,i,l)=>{if(t===!1)throw new oe(o(i," has been removed"+(r?" in "+r:"")),oe.ERR_DEPRECATED);return r&&!qu[i]&&(qu[i]=!0,console.warn(o(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,i,l):!0}};Ti.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function S1(e,t,r){if(typeof e!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let o=s.length;for(;o-- >0;){const a=s[o],i=t[a];if(i){const l=e[a],d=l===void 0||i(l,a,e);if(d!==!0)throw new oe("option "+a+" must be "+d,oe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new oe("Unknown option "+a,oe.ERR_BAD_OPTION)}}const Pa={assertOptions:S1,validators:Ti},Ct=Pa.validators;let br=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Lu,response:new Lu}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Nr(this.defaults,r);const{transitional:s,paramsSerializer:o,headers:a}=r;s!==void 0&&Pa.assertOptions(s,{silentJSONParsing:Ct.transitional(Ct.boolean),forcedJSONParsing:Ct.transitional(Ct.boolean),clarifyTimeoutError:Ct.transitional(Ct.boolean),legacyInterceptorReqResOrdering:Ct.transitional(Ct.boolean)},!1),o!=null&&(U.isFunction(o)?r.paramsSerializer={serialize:o}:Pa.assertOptions(o,{encode:Ct.function,serialize:Ct.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Pa.assertOptions(r,{baseUrl:Ct.spelling("baseURL"),withXsrfToken:Ct.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=a&&U.merge(a.common,a[r.method]);a&&U.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),r.headers=ct.concat(i,a);const l=[];let d=!0;this.interceptors.request.forEach(function(x){if(typeof x.runWhen=="function"&&x.runWhen(r)===!1)return;d=d&&x.synchronous;const h=r.transitional||fc;h&&h.legacyInterceptorReqResOrdering?l.unshift(x.fulfilled,x.rejected):l.push(x.fulfilled,x.rejected)});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let c,f=0,p;if(!d){const m=[Vu.bind(this),void 0];for(m.unshift(...l),m.push(...u),p=m.length,c=Promise.resolve(r);f<p;)c=c.then(m[f++],m[f++]);return c}p=l.length;let w=r;for(;f<p;){const m=l[f++],x=l[f++];try{w=m(w)}catch(h){x.call(this,h);break}}try{c=Vu.call(this,w)}catch(m){return Promise.reject(m)}for(f=0,p=u.length;f<p;)c=c.then(u[f++],u[f++]);return c}getUri(t){t=Nr(this.defaults,t);const r=Cp(t.baseURL,t.url,t.allowAbsoluteUrls);return kp(r,t.params,t.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(t){br.prototype[t]=function(r,s){return this.request(Nr(s||{},{method:t,url:r,data:(s||{}).data}))}});U.forEach(["post","put","patch"],function(t){function r(s){return function(a,i,l){return this.request(Nr(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}br.prototype[t]=r(),br.prototype[t+"Form"]=r(!0)});let C1=class Pp{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const s=this;this.promise.then(o=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](o);s._listeners=null}),this.promise.then=o=>{let a;const i=new Promise(l=>{s.subscribe(l),a=l}).then(o);return i.cancel=function(){s.unsubscribe(a)},i},t(function(a,i,l){s.reason||(s.reason=new Do(a,i,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Pp(function(o){t=o}),cancel:t}}};function _1(e){return function(r){return e.apply(null,r)}}function E1(e){return U.isObject(e)&&e.isAxiosError===!0}const ad={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ad).forEach(([e,t])=>{ad[t]=e});function Tp(e){const t=new br(e),r=up(br.prototype.request,t);return U.extend(r,br.prototype,t,{allOwnKeys:!0}),U.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return Tp(Nr(e,o))},r}const Ae=Tp(Eo);Ae.Axios=br;Ae.CanceledError=Do;Ae.CancelToken=C1;Ae.isCancel=Np;Ae.VERSION=Ap;Ae.toFormData=Pi;Ae.AxiosError=oe;Ae.Cancel=Ae.CanceledError;Ae.all=function(t){return Promise.all(t)};Ae.spread=_1;Ae.isAxiosError=E1;Ae.mergeConfig=Nr;Ae.AxiosHeaders=ct;Ae.formToJSON=e=>wp(U.isHTMLForm(e)?new FormData(e):e);Ae.getAdapter=Dp.getAdapter;Ae.HttpStatusCode=ad;Ae.default=Ae;const{Axios:b5,AxiosError:j5,CanceledError:k5,isCancel:w5,CancelToken:N5,VERSION:S5,all:C5,Cancel:_5,isAxiosError:E5,spread:D5,toFormData:A5,AxiosHeaders:P5,HttpStatusCode:T5,formToJSON:B5,getAdapter:L5,mergeConfig:M5}=Ae;var D1=function(t){return A1(t)&&!P1(t)};function A1(e){return!!e&&typeof e=="object"}function P1(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||L1(e)}var T1=typeof Symbol=="function"&&Symbol.for,B1=T1?Symbol.for("react.element"):60103;function L1(e){return e.$$typeof===B1}function M1(e){return Array.isArray(e)?[]:{}}function so(e,t){return t.clone!==!1&&t.isMergeableObject(e)?us(M1(e),e,t):e}function O1(e,t,r){return e.concat(t).map(function(s){return so(s,r)})}function F1(e,t){if(!t.customMerge)return us;var r=t.customMerge(e);return typeof r=="function"?r:us}function R1(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Ju(e){return Object.keys(e).concat(R1(e))}function Bp(e,t){try{return t in e}catch{return!1}}function $1(e,t){return Bp(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function I1(e,t,r){var s={};return r.isMergeableObject(e)&&Ju(e).forEach(function(o){s[o]=so(e[o],r)}),Ju(t).forEach(function(o){$1(e,o)||(Bp(e,o)&&r.isMergeableObject(t[o])?s[o]=F1(o,r)(e[o],t[o],r):s[o]=so(t[o],r))}),s}function us(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||O1,r.isMergeableObject=r.isMergeableObject||D1,r.cloneUnlessOtherwiseSpecified=so;var s=Array.isArray(t),o=Array.isArray(e),a=s===o;return a?s?r.arrayMerge(e,t,r):I1(e,t,r):so(t,r)}us.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,o){return us(s,o,r)},{})};var z1=us,W1=z1;const U1=ic(W1);var ws=TypeError;const H1={},V1=Object.freeze(Object.defineProperty({__proto__:null,default:H1},Symbol.toStringTag,{value:"Module"})),q1=fg(V1);var gc=typeof Map=="function"&&Map.prototype,al=Object.getOwnPropertyDescriptor&&gc?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ka=gc&&al&&typeof al.get=="function"?al.get:null,Qu=gc&&Map.prototype.forEach,vc=typeof Set=="function"&&Set.prototype,il=Object.getOwnPropertyDescriptor&&vc?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ya=vc&&il&&typeof il.get=="function"?il.get:null,Gu=vc&&Set.prototype.forEach,J1=typeof WeakMap=="function"&&WeakMap.prototype,Vs=J1?WeakMap.prototype.has:null,Q1=typeof WeakSet=="function"&&WeakSet.prototype,qs=Q1?WeakSet.prototype.has:null,G1=typeof WeakRef=="function"&&WeakRef.prototype,Ku=G1?WeakRef.prototype.deref:null,K1=Boolean.prototype.valueOf,Y1=Object.prototype.toString,X1=Function.prototype.toString,Z1=String.prototype.match,yc=String.prototype.slice,Wn=String.prototype.replace,ey=String.prototype.toUpperCase,Yu=String.prototype.toLowerCase,Lp=RegExp.prototype.test,Xu=Array.prototype.concat,rn=Array.prototype.join,ty=Array.prototype.slice,Zu=Math.floor,id=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ll=Object.getOwnPropertySymbols,ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ms=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Js=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ms||!0)?Symbol.toStringTag:null,Mp=Object.prototype.propertyIsEnumerable,e0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function t0(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Lp.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var s=e<0?-Zu(-e):Zu(e);if(s!==e){var o=String(s),a=yc.call(t,o.length+1);return Wn.call(o,r,"$&_")+"."+Wn.call(Wn.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Wn.call(t,r,"$&_")}var dd=q1,n0=dd.custom,r0=Rp(n0)?n0:null,Op={__proto__:null,double:'"',single:"'"},ny={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Bi=function e(t,r,s,o){var a=r||{};if(vn(a,"quoteStyle")&&!vn(Op,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(vn(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var i=vn(a,"customInspect")?a.customInspect:!0;if(typeof i!="boolean"&&i!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(vn(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(vn(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Ip(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var d=String(t);return l?t0(t,d):d}if(typeof t=="bigint"){var u=String(t)+"n";return l?t0(t,u):u}var c=typeof a.depth>"u"?5:a.depth;if(typeof s>"u"&&(s=0),s>=c&&c>0&&typeof t=="object")return cd(t)?"[Array]":"[Object]";var f=by(a,s);if(typeof o>"u")o=[];else if($p(o,t)>=0)return"[Circular]";function p(W,O,B){if(O&&(o=ty.call(o),o.push(O)),B){var z={depth:a.depth};return vn(a,"quoteStyle")&&(z.quoteStyle=a.quoteStyle),e(W,z,s+1,o)}return e(W,a,s+1,o)}if(typeof t=="function"&&!s0(t)){var w=uy(t),m=ra(t,p);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(m.length>0?" { "+rn.call(m,", ")+" }":"")}if(Rp(t)){var x=ms?Wn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):ld.call(t);return typeof t=="object"&&!ms?As(x):x}if(gy(t)){for(var h="<"+Yu.call(String(t.nodeName)),y=t.attributes||[],g=0;g<y.length;g++)h+=" "+y[g].name+"="+Fp(ry(y[g].value),"double",a);return h+=">",t.childNodes&&t.childNodes.length&&(h+="..."),h+="</"+Yu.call(String(t.nodeName))+">",h}if(cd(t)){if(t.length===0)return"[]";var j=ra(t,p);return f&&!yy(j)?"["+ud(j,f)+"]":"[ "+rn.call(j,", ")+" ]"}if(oy(t)){var v=ra(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!Mp.call(t,"cause")?"{ ["+String(t)+"] "+rn.call(Xu.call("[cause]: "+p(t.cause),v),", ")+" }":v.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+rn.call(v,", ")+" }"}if(typeof t=="object"&&i){if(r0&&typeof t[r0]=="function"&&dd)return dd(t,{depth:c-s});if(i!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(my(t)){var N=[];return Qu&&Qu.call(t,function(W,O){N.push(p(O,t,!0)+" => "+p(W,t))}),o0("Map",Ka.call(t),N,f)}if(xy(t)){var S=[];return Gu&&Gu.call(t,function(W){S.push(p(W,t))}),o0("Set",Ya.call(t),S,f)}if(py(t))return dl("WeakMap");if(hy(t))return dl("WeakSet");if(fy(t))return dl("WeakRef");if(iy(t))return As(p(Number(t)));if(dy(t))return As(p(id.call(t)));if(ly(t))return As(K1.call(t));if(ay(t))return As(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof xr<"u"&&t===xr)return"{ [object globalThis] }";if(!sy(t)&&!s0(t)){var A=ra(t,p),D=e0?e0(t)===Object.prototype:t instanceof Object||t.constructor===Object,R=t instanceof Object?"":"null prototype",P=!D&&Js&&Object(t)===t&&Js in t?yc.call(nr(t),8,-1):R?"Object":"",I=D||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",T=I+(P||R?"["+rn.call(Xu.call([],P||[],R||[]),": ")+"] ":"");return A.length===0?T+"{}":f?T+"{"+ud(A,f)+"}":T+"{ "+rn.call(A,", ")+" }"}return String(t)};function Fp(e,t,r){var s=r.quoteStyle||t,o=Op[s];return o+e+o}function ry(e){return Wn.call(String(e),/"/g,"&quot;")}function Ar(e){return!Js||!(typeof e=="object"&&(Js in e||typeof e[Js]<"u"))}function cd(e){return nr(e)==="[object Array]"&&Ar(e)}function sy(e){return nr(e)==="[object Date]"&&Ar(e)}function s0(e){return nr(e)==="[object RegExp]"&&Ar(e)}function oy(e){return nr(e)==="[object Error]"&&Ar(e)}function ay(e){return nr(e)==="[object String]"&&Ar(e)}function iy(e){return nr(e)==="[object Number]"&&Ar(e)}function ly(e){return nr(e)==="[object Boolean]"&&Ar(e)}function Rp(e){if(ms)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!ld)return!1;try{return ld.call(e),!0}catch{}return!1}function dy(e){if(!e||typeof e!="object"||!id)return!1;try{return id.call(e),!0}catch{}return!1}var cy=Object.prototype.hasOwnProperty||function(e){return e in this};function vn(e,t){return cy.call(e,t)}function nr(e){return Y1.call(e)}function uy(e){if(e.name)return e.name;var t=Z1.call(X1.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function $p(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1}function my(e){if(!Ka||!e||typeof e!="object")return!1;try{Ka.call(e);try{Ya.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function py(e){if(!Vs||!e||typeof e!="object")return!1;try{Vs.call(e,Vs);try{qs.call(e,qs)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function fy(e){if(!Ku||!e||typeof e!="object")return!1;try{return Ku.call(e),!0}catch{}return!1}function xy(e){if(!Ya||!e||typeof e!="object")return!1;try{Ya.call(e);try{Ka.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function hy(e){if(!qs||!e||typeof e!="object")return!1;try{qs.call(e,qs);try{Vs.call(e,Vs)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function gy(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Ip(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,s="... "+r+" more character"+(r>1?"s":"");return Ip(yc.call(e,0,t.maxStringLength),t)+s}var o=ny[t.quoteStyle||"single"];o.lastIndex=0;var a=Wn.call(Wn.call(e,o,"\\$1"),/[\x00-\x1f]/g,vy);return Fp(a,"single",t)}function vy(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+ey.call(t.toString(16))}function As(e){return"Object("+e+")"}function dl(e){return e+" { ? }"}function o0(e,t,r,s){var o=s?ud(r,s):rn.call(r,", ");return e+" ("+t+") {"+o+"}"}function yy(e){for(var t=0;t<e.length;t++)if($p(e[t],`
`)>=0)return!1;return!0}function by(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=rn.call(Array(e.indent+1)," ");else return null;return{base:r,prev:rn.call(Array(t+1),r)}}function ud(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+rn.call(e,","+r)+`
`+t.prev}function ra(e,t){var r=cd(e),s=[];if(r){s.length=e.length;for(var o=0;o<e.length;o++)s[o]=vn(e,o)?t(e[o],e):""}var a=typeof ll=="function"?ll(e):[],i;if(ms){i={};for(var l=0;l<a.length;l++)i["$"+a[l]]=a[l]}for(var d in e)vn(e,d)&&(r&&String(Number(d))===d&&d<e.length||ms&&i["$"+d]instanceof Symbol||(Lp.call(/[^\w$]/,d)?s.push(t(d,e)+": "+t(e[d],e)):s.push(d+": "+t(e[d],e))));if(typeof ll=="function")for(var u=0;u<a.length;u++)Mp.call(e,a[u])&&s.push("["+t(a[u])+"]: "+t(e[a[u]],e));return s}var jy=Bi,ky=ws,Li=function(e,t,r){for(var s=e,o;(o=s.next)!=null;s=o)if(o.key===t)return s.next=o.next,r||(o.next=e.next,e.next=o),o},wy=function(e,t){if(e){var r=Li(e,t);return r&&r.value}},Ny=function(e,t,r){var s=Li(e,t);s?s.value=r:e.next={key:t,next:e.next,value:r}},Sy=function(e,t){return e?!!Li(e,t):!1},Cy=function(e,t){if(e)return Li(e,t,!0)},_y=function(){var t,r={assert:function(s){if(!r.has(s))throw new ky("Side channel does not contain "+jy(s))},delete:function(s){var o=t&&t.next,a=Cy(t,s);return a&&o&&o===a&&(t=void 0),!!a},get:function(s){return wy(t,s)},has:function(s){return Sy(t,s)},set:function(s,o){t||(t={next:void 0}),Ny(t,s,o)}};return r},zp=Object,Ey=Error,Dy=EvalError,Ay=RangeError,Py=ReferenceError,Ty=SyntaxError,By=URIError,Ly=Math.abs,My=Math.floor,Oy=Math.max,Fy=Math.min,Ry=Math.pow,$y=Math.round,Iy=Number.isNaN||function(t){return t!==t},zy=Iy,Wy=function(t){return zy(t)||t===0?t:t<0?-1:1},Uy=Object.getOwnPropertyDescriptor,Ta=Uy;if(Ta)try{Ta([],"length")}catch{Ta=null}var Wp=Ta,Ba=Object.defineProperty||!1;if(Ba)try{Ba({},"a",{value:1})}catch{Ba=!1}var Hy=Ba,cl,a0;function Vy(){return a0||(a0=1,cl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(var a in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(t,r);if(l.value!==o||l.enumerable!==!0)return!1}return!0}),cl}var ul,i0;function qy(){if(i0)return ul;i0=1;var e=typeof Symbol<"u"&&Symbol,t=Vy();return ul=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},ul}var ml,l0;function Up(){return l0||(l0=1,ml=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ml}var pl,d0;function Hp(){if(d0)return pl;d0=1;var e=zp;return pl=e.getPrototypeOf||null,pl}var Jy="Function.prototype.bind called on incompatible ",Qy=Object.prototype.toString,Gy=Math.max,Ky="[object Function]",c0=function(t,r){for(var s=[],o=0;o<t.length;o+=1)s[o]=t[o];for(var a=0;a<r.length;a+=1)s[a+t.length]=r[a];return s},Yy=function(t,r){for(var s=[],o=r,a=0;o<t.length;o+=1,a+=1)s[a]=t[o];return s},Xy=function(e,t){for(var r="",s=0;s<e.length;s+=1)r+=e[s],s+1<e.length&&(r+=t);return r},Zy=function(t){var r=this;if(typeof r!="function"||Qy.apply(r)!==Ky)throw new TypeError(Jy+r);for(var s=Yy(arguments,1),o,a=function(){if(this instanceof o){var c=r.apply(this,c0(s,arguments));return Object(c)===c?c:this}return r.apply(t,c0(s,arguments))},i=Gy(0,r.length-s.length),l=[],d=0;d<i;d++)l[d]="$"+d;if(o=Function("binder","return function ("+Xy(l,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},eb=Zy,Mi=Function.prototype.bind||eb,fl,u0;function bc(){return u0||(u0=1,fl=Function.prototype.call),fl}var xl,m0;function Vp(){return m0||(m0=1,xl=Function.prototype.apply),xl}var tb=typeof Reflect<"u"&&Reflect&&Reflect.apply,nb=Mi,rb=Vp(),sb=bc(),ob=tb,ab=ob||nb.call(sb,rb),ib=Mi,lb=ws,db=bc(),cb=ab,qp=function(t){if(t.length<1||typeof t[0]!="function")throw new lb("a function is required");return cb(ib,db,t)},hl,p0;function ub(){if(p0)return hl;p0=1;var e=qp,t=Wp,r;try{r=[].__proto__===Array.prototype}catch(i){if(!i||typeof i!="object"||!("code"in i)||i.code!=="ERR_PROTO_ACCESS")throw i}var s=!!r&&t&&t(Object.prototype,"__proto__"),o=Object,a=o.getPrototypeOf;return hl=s&&typeof s.get=="function"?e([s.get]):typeof a=="function"?function(l){return a(l==null?l:o(l))}:!1,hl}var gl,f0;function mb(){if(f0)return gl;f0=1;var e=Up(),t=Hp(),r=ub();return gl=e?function(o){return e(o)}:t?function(o){if(!o||typeof o!="object"&&typeof o!="function")throw new TypeError("getProto: not an object");return t(o)}:r?function(o){return r(o)}:null,gl}var vl,x0;function pb(){if(x0)return vl;x0=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Mi;return vl=r.call(e,t),vl}var le,fb=zp,xb=Ey,hb=Dy,gb=Ay,vb=Py,ps=Ty,rs=ws,yb=By,bb=Ly,jb=My,kb=Oy,wb=Fy,Nb=Ry,Sb=$y,Cb=Wy,Jp=Function,yl=function(e){try{return Jp('"use strict"; return ('+e+").constructor;")()}catch{}},oo=Wp,_b=Hy,bl=function(){throw new rs},Eb=oo?function(){try{return arguments.callee,bl}catch{try{return oo(arguments,"callee").get}catch{return bl}}}():bl,Ir=qy()(),ze=mb(),Db=Hp(),Ab=Up(),Qp=Vp(),Ao=bc(),Hr={},Pb=typeof Uint8Array>"u"||!ze?le:ze(Uint8Array),jr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?le:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?le:ArrayBuffer,"%ArrayIteratorPrototype%":Ir&&ze?ze([][Symbol.iterator]()):le,"%AsyncFromSyncIteratorPrototype%":le,"%AsyncFunction%":Hr,"%AsyncGenerator%":Hr,"%AsyncGeneratorFunction%":Hr,"%AsyncIteratorPrototype%":Hr,"%Atomics%":typeof Atomics>"u"?le:Atomics,"%BigInt%":typeof BigInt>"u"?le:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?le:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?le:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?le:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":xb,"%eval%":eval,"%EvalError%":hb,"%Float16Array%":typeof Float16Array>"u"?le:Float16Array,"%Float32Array%":typeof Float32Array>"u"?le:Float32Array,"%Float64Array%":typeof Float64Array>"u"?le:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?le:FinalizationRegistry,"%Function%":Jp,"%GeneratorFunction%":Hr,"%Int8Array%":typeof Int8Array>"u"?le:Int8Array,"%Int16Array%":typeof Int16Array>"u"?le:Int16Array,"%Int32Array%":typeof Int32Array>"u"?le:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ir&&ze?ze(ze([][Symbol.iterator]())):le,"%JSON%":typeof JSON=="object"?JSON:le,"%Map%":typeof Map>"u"?le:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ir||!ze?le:ze(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":fb,"%Object.getOwnPropertyDescriptor%":oo,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?le:Promise,"%Proxy%":typeof Proxy>"u"?le:Proxy,"%RangeError%":gb,"%ReferenceError%":vb,"%Reflect%":typeof Reflect>"u"?le:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?le:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ir||!ze?le:ze(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?le:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ir&&ze?ze(""[Symbol.iterator]()):le,"%Symbol%":Ir?Symbol:le,"%SyntaxError%":ps,"%ThrowTypeError%":Eb,"%TypedArray%":Pb,"%TypeError%":rs,"%Uint8Array%":typeof Uint8Array>"u"?le:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?le:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?le:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?le:Uint32Array,"%URIError%":yb,"%WeakMap%":typeof WeakMap>"u"?le:WeakMap,"%WeakRef%":typeof WeakRef>"u"?le:WeakRef,"%WeakSet%":typeof WeakSet>"u"?le:WeakSet,"%Function.prototype.call%":Ao,"%Function.prototype.apply%":Qp,"%Object.defineProperty%":_b,"%Object.getPrototypeOf%":Db,"%Math.abs%":bb,"%Math.floor%":jb,"%Math.max%":kb,"%Math.min%":wb,"%Math.pow%":Nb,"%Math.round%":Sb,"%Math.sign%":Cb,"%Reflect.getPrototypeOf%":Ab};if(ze)try{null.error}catch(e){var Tb=ze(ze(e));jr["%Error.prototype%"]=Tb}var Bb=function e(t){var r;if(t==="%AsyncFunction%")r=yl("async function () {}");else if(t==="%GeneratorFunction%")r=yl("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=yl("async function* () {}");else if(t==="%AsyncGenerator%"){var s=e("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&ze&&(r=ze(o.prototype))}return jr[t]=r,r},h0={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Po=Mi,Xa=pb(),Lb=Po.call(Ao,Array.prototype.concat),Mb=Po.call(Qp,Array.prototype.splice),g0=Po.call(Ao,String.prototype.replace),Za=Po.call(Ao,String.prototype.slice),Ob=Po.call(Ao,RegExp.prototype.exec),Fb=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rb=/\\(\\)?/g,$b=function(t){var r=Za(t,0,1),s=Za(t,-1);if(r==="%"&&s!=="%")throw new ps("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new ps("invalid intrinsic syntax, expected opening `%`");var o=[];return g0(t,Fb,function(a,i,l,d){o[o.length]=l?g0(d,Rb,"$1"):i||a}),o},Ib=function(t,r){var s=t,o;if(Xa(h0,s)&&(o=h0[s],s="%"+o[0]+"%"),Xa(jr,s)){var a=jr[s];if(a===Hr&&(a=Bb(s)),typeof a>"u"&&!r)throw new rs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:s,value:a}}throw new ps("intrinsic "+t+" does not exist!")},jc=function(t,r){if(typeof t!="string"||t.length===0)throw new rs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new rs('"allowMissing" argument must be a boolean');if(Ob(/^%?[^%]*%?$/,t)===null)throw new ps("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=$b(t),o=s.length>0?s[0]:"",a=Ib("%"+o+"%",r),i=a.name,l=a.value,d=!1,u=a.alias;u&&(o=u[0],Mb(s,Lb([0,1],u)));for(var c=1,f=!0;c<s.length;c+=1){var p=s[c],w=Za(p,0,1),m=Za(p,-1);if((w==='"'||w==="'"||w==="`"||m==='"'||m==="'"||m==="`")&&w!==m)throw new ps("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(d=!0),o+="."+p,i="%"+o+"%",Xa(jr,i))l=jr[i];else if(l!=null){if(!(p in l)){if(!r)throw new rs("base intrinsic for "+t+" exists, but the property is not available.");return}if(oo&&c+1>=s.length){var x=oo(l,p);f=!!x,f&&"get"in x&&!("originalValue"in x.get)?l=x.get:l=l[p]}else f=Xa(l,p),l=l[p];f&&!d&&(jr[i]=l)}}return l},Gp=jc,Kp=qp,zb=Kp([Gp("%String.prototype.indexOf%")]),Yp=function(t,r){var s=Gp(t,!!r);return typeof s=="function"&&zb(t,".prototype.")>-1?Kp([s]):s},Wb=jc,To=Yp,Ub=Bi,Hb=ws,v0=Wb("%Map%",!0),Vb=To("Map.prototype.get",!0),qb=To("Map.prototype.set",!0),Jb=To("Map.prototype.has",!0),Qb=To("Map.prototype.delete",!0),Gb=To("Map.prototype.size",!0),Xp=!!v0&&function(){var t,r={assert:function(s){if(!r.has(s))throw new Hb("Side channel does not contain "+Ub(s))},delete:function(s){if(t){var o=Qb(t,s);return Gb(t)===0&&(t=void 0),o}return!1},get:function(s){if(t)return Vb(t,s)},has:function(s){return t?Jb(t,s):!1},set:function(s,o){t||(t=new v0),qb(t,s,o)}};return r},Kb=jc,Oi=Yp,Yb=Bi,sa=Xp,Xb=ws,zr=Kb("%WeakMap%",!0),Zb=Oi("WeakMap.prototype.get",!0),e2=Oi("WeakMap.prototype.set",!0),t2=Oi("WeakMap.prototype.has",!0),n2=Oi("WeakMap.prototype.delete",!0),r2=zr?function(){var t,r,s={assert:function(o){if(!s.has(o))throw new Xb("Side channel does not contain "+Yb(o))},delete:function(o){if(zr&&o&&(typeof o=="object"||typeof o=="function")){if(t)return n2(t,o)}else if(sa&&r)return r.delete(o);return!1},get:function(o){return zr&&o&&(typeof o=="object"||typeof o=="function")&&t?Zb(t,o):r&&r.get(o)},has:function(o){return zr&&o&&(typeof o=="object"||typeof o=="function")&&t?t2(t,o):!!r&&r.has(o)},set:function(o,a){zr&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new zr),e2(t,o,a)):sa&&(r||(r=sa()),r.set(o,a))}};return s}:sa,s2=ws,o2=Bi,a2=_y,i2=Xp,l2=r2,d2=l2||i2||a2,Zp=function(){var t,r={assert:function(s){if(!r.has(s))throw new s2("Side channel does not contain "+o2(s))},delete:function(s){return!!t&&t.delete(s)},get:function(s){return t&&t.get(s)},has:function(s){return!!t&&t.has(s)},set:function(s,o){t||(t=d2()),t.set(s,o)}};return r},c2=String.prototype.replace,u2=/%20/g,y0={RFC1738:"RFC1738",RFC3986:"RFC3986"},ef={default:y0.RFC3986,formatters:{RFC1738:function(e){return c2.call(e,u2,"+")},RFC3986:function(e){return String(e)}},RFC1738:y0.RFC1738},m2=ef,p2=Zp,jl=Object.prototype.hasOwnProperty,fr=Array.isArray,Fi=p2(),tf=function(t,r){return Fi.set(t,r),t},ei=function(t){return Fi.has(t)},md=function(t){return Fi.get(t)},nf=function(t,r){Fi.set(t,r)},Zt=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),f2=function(t){for(;t.length>1;){var r=t.pop(),s=r.obj[r.prop];if(fr(s)){for(var o=[],a=0;a<s.length;++a)typeof s[a]<"u"&&o.push(s[a]);r.obj[r.prop]=o}}},kc=function(t,r){for(var s=r&&r.plainObjects?{__proto__:null}:{},o=0;o<t.length;++o)typeof t[o]<"u"&&(s[o]=t[o]);return s},x2=function e(t,r,s){if(!r)return t;if(typeof r!="object"&&typeof r!="function"){if(fr(t))t.push(r);else if(t&&typeof t=="object")if(ei(t)){var o=md(t)+1;t[o]=r,nf(t,o)}else(s&&(s.plainObjects||s.allowPrototypes)||!jl.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object"){if(ei(r)){for(var a=Object.keys(r),i=s&&s.plainObjects?{__proto__:null,0:t}:{0:t},l=0;l<a.length;l++){var d=parseInt(a[l],10);i[d+1]=r[a[l]]}return tf(i,md(r)+1)}return[t].concat(r)}var u=t;return fr(t)&&!fr(r)&&(u=kc(t,s)),fr(t)&&fr(r)?(r.forEach(function(c,f){if(jl.call(t,f)){var p=t[f];p&&typeof p=="object"&&c&&typeof c=="object"?t[f]=e(p,c,s):t.push(c)}else t[f]=c}),t):Object.keys(r).reduce(function(c,f){var p=r[f];return jl.call(c,f)?c[f]=e(c[f],p,s):c[f]=p,c},u)},h2=function(t,r){return Object.keys(r).reduce(function(s,o){return s[o]=r[o],s},t)},g2=function(e,t,r){var s=e.replace(/\+/g," ");if(r==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},kl=1024,v2=function(t,r,s,o,a){if(t.length===0)return t;var i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),s==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(w){return"%26%23"+parseInt(w.slice(2),16)+"%3B"});for(var l="",d=0;d<i.length;d+=kl){for(var u=i.length>=kl?i.slice(d,d+kl):i,c=[],f=0;f<u.length;++f){var p=u.charCodeAt(f);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||a===m2.RFC1738&&(p===40||p===41)){c[c.length]=u.charAt(f);continue}if(p<128){c[c.length]=Zt[p];continue}if(p<2048){c[c.length]=Zt[192|p>>6]+Zt[128|p&63];continue}if(p<55296||p>=57344){c[c.length]=Zt[224|p>>12]+Zt[128|p>>6&63]+Zt[128|p&63];continue}f+=1,p=65536+((p&1023)<<10|u.charCodeAt(f)&1023),c[c.length]=Zt[240|p>>18]+Zt[128|p>>12&63]+Zt[128|p>>6&63]+Zt[128|p&63]}l+=c.join("")}return l},y2=function(t){for(var r=[{obj:{o:t},prop:"o"}],s=[],o=0;o<r.length;++o)for(var a=r[o],i=a.obj[a.prop],l=Object.keys(i),d=0;d<l.length;++d){var u=l[d],c=i[u];typeof c=="object"&&c!==null&&s.indexOf(c)===-1&&(r.push({obj:i,prop:u}),s.push(c))}return f2(r),t},b2=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},j2=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},k2=function(t,r,s,o){if(ei(t)){var a=md(t)+1;return t[a]=r,nf(t,a),t}var i=[].concat(t,r);return i.length>s?tf(kc(i,{plainObjects:o}),i.length-1):i},w2=function(t,r){if(fr(t)){for(var s=[],o=0;o<t.length;o+=1)s.push(r(t[o]));return s}return r(t)},rf={arrayToObject:kc,assign:h2,combine:k2,compact:y2,decode:g2,encode:v2,isBuffer:j2,isOverflow:ei,isRegExp:b2,maybeMap:w2,merge:x2},sf=Zp,La=rf,Qs=ef,N2=Object.prototype.hasOwnProperty,of={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},nn=Array.isArray,S2=Array.prototype.push,af=function(e,t){S2.apply(e,nn(t)?t:[t])},C2=Date.prototype.toISOString,b0=Qs.default,Me={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:La.encode,encodeValuesOnly:!1,filter:void 0,format:b0,formatter:Qs.formatters[b0],indices:!1,serializeDate:function(t){return C2.call(t)},skipNulls:!1,strictNullHandling:!1},_2=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},wl={},E2=function e(t,r,s,o,a,i,l,d,u,c,f,p,w,m,x,h,y,g){for(var j=t,v=g,N=0,S=!1;(v=v.get(wl))!==void 0&&!S;){var A=v.get(t);if(N+=1,typeof A<"u"){if(A===N)throw new RangeError("Cyclic object value");S=!0}typeof v.get(wl)>"u"&&(N=0)}if(typeof c=="function"?j=c(r,j):j instanceof Date?j=w(j):s==="comma"&&nn(j)&&(j=La.maybeMap(j,function(q){return q instanceof Date?w(q):q})),j===null){if(i)return u&&!h?u(r,Me.encoder,y,"key",m):r;j=""}if(_2(j)||La.isBuffer(j)){if(u){var D=h?r:u(r,Me.encoder,y,"key",m);return[x(D)+"="+x(u(j,Me.encoder,y,"value",m))]}return[x(r)+"="+x(String(j))]}var R=[];if(typeof j>"u")return R;var P;if(s==="comma"&&nn(j))h&&u&&(j=La.maybeMap(j,u)),P=[{value:j.length>0?j.join(",")||null:void 0}];else if(nn(c))P=c;else{var I=Object.keys(j);P=f?I.sort(f):I}var T=d?String(r).replace(/\./g,"%2E"):String(r),W=o&&nn(j)&&j.length===1?T+"[]":T;if(a&&nn(j)&&j.length===0)return W+"[]";for(var O=0;O<P.length;++O){var B=P[O],z=typeof B=="object"&&B&&typeof B.value<"u"?B.value:j[B];if(!(l&&z===null)){var J=p&&d?String(B).replace(/\./g,"%2E"):String(B),L=nn(j)?typeof s=="function"?s(W,J):W:W+(p?"."+J:"["+J+"]");g.set(t,N);var V=sf();V.set(wl,g),af(R,e(z,L,s,o,a,i,l,d,s==="comma"&&h&&nn(j)?null:u,c,f,p,w,m,x,h,y,V))}}return R},D2=function(t){if(!t)return Me;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||Me.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=Qs.default;if(typeof t.format<"u"){if(!N2.call(Qs.formatters,t.format))throw new TypeError("Unknown format option provided.");s=t.format}var o=Qs.formatters[s],a=Me.filter;(typeof t.filter=="function"||nn(t.filter))&&(a=t.filter);var i;if(t.arrayFormat in of?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Me.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Me.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Me.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Me.allowEmptyArrays,arrayFormat:i,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Me.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Me.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Me.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Me.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Me.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Me.encodeValuesOnly,filter:a,format:s,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Me.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Me.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Me.strictNullHandling}},A2=function(e,t){var r=e,s=D2(t),o,a;typeof s.filter=="function"?(a=s.filter,r=a("",r)):nn(s.filter)&&(a=s.filter,o=a);var i=[];if(typeof r!="object"||r===null)return"";var l=of[s.arrayFormat],d=l==="comma"&&s.commaRoundTrip;o||(o=Object.keys(r)),s.sort&&o.sort(s.sort);for(var u=sf(),c=0;c<o.length;++c){var f=o[c],p=r[f];s.skipNulls&&p===null||af(i,E2(p,f,l,d,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}var w=i.join(s.delimiter),m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),w.length>0?m+w:""},Zn=rf,Ma=Object.prototype.hasOwnProperty,j0=Array.isArray,Ee={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Zn.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},P2=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},lf=function(e,t,r){if(e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(t.arrayLimit===1?"":"s")+" allowed in an array.");return e},T2="utf8=%26%2310003%3B",B2="utf8=%E2%9C%93",L2=function(t,r){var s={__proto__:null},o=r.ignoreQueryPrefix?t.replace(/^\?/,""):t;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var a=r.parameterLimit===1/0?void 0:r.parameterLimit,i=o.split(r.delimiter,r.throwOnLimitExceeded?a+1:a);if(r.throwOnLimitExceeded&&i.length>a)throw new RangeError("Parameter limit exceeded. Only "+a+" parameter"+(a===1?"":"s")+" allowed.");var l=-1,d,u=r.charset;if(r.charsetSentinel)for(d=0;d<i.length;++d)i[d].indexOf("utf8=")===0&&(i[d]===B2?u="utf-8":i[d]===T2&&(u="iso-8859-1"),l=d,d=i.length);for(d=0;d<i.length;++d)if(d!==l){var c=i[d],f=c.indexOf("]="),p=f===-1?c.indexOf("="):f+1,w,m;if(p===-1?(w=r.decoder(c,Ee.decoder,u,"key"),m=r.strictNullHandling?null:""):(w=r.decoder(c.slice(0,p),Ee.decoder,u,"key"),w!==null&&(m=Zn.maybeMap(lf(c.slice(p+1),r,j0(s[w])?s[w].length:0),function(h){return r.decoder(h,Ee.decoder,u,"value")}))),m&&r.interpretNumericEntities&&u==="iso-8859-1"&&(m=P2(String(m))),c.indexOf("[]=")>-1&&(m=j0(m)?[m]:m),w!==null){var x=Ma.call(s,w);x&&r.duplicates==="combine"?s[w]=Zn.combine(s[w],m,r.arrayLimit,r.plainObjects):(!x||r.duplicates==="last")&&(s[w]=m)}}return s},M2=function(e,t,r,s){var o=0;if(e.length>0&&e[e.length-1]==="[]"){var a=e.slice(0,-1).join("");o=Array.isArray(t)&&t[a]?t[a].length:0}for(var i=s?t:lf(t,r,o),l=e.length-1;l>=0;--l){var d,u=e[l];if(u==="[]"&&r.parseArrays)Zn.isOverflow(i)?d=i:d=r.allowEmptyArrays&&(i===""||r.strictNullHandling&&i===null)?[]:Zn.combine([],i,r.arrayLimit,r.plainObjects);else{d=r.plainObjects?{__proto__:null}:{};var c=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,f=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,p=parseInt(f,10);!r.parseArrays&&f===""?d={0:i}:!isNaN(p)&&u!==f&&String(p)===f&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(d=[],d[p]=i):f!=="__proto__"&&(d[f]=i)}i=d}return i},O2=function(t,r){var s=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t;if(r.depth<=0)return!r.plainObjects&&Ma.call(Object.prototype,s)&&!r.allowPrototypes?void 0:[s];var o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,i=o.exec(s),l=i?s.slice(0,i.index):s,d=[];if(l){if(!r.plainObjects&&Ma.call(Object.prototype,l)&&!r.allowPrototypes)return;d.push(l)}for(var u=0;(i=a.exec(s))!==null&&u<r.depth;){u+=1;var c=i[1].slice(1,-1);if(!r.plainObjects&&Ma.call(Object.prototype,c)&&!r.allowPrototypes)return;d.push(i[1])}if(i){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");d.push("["+s.slice(i.index)+"]")}return d},F2=function(t,r,s,o){if(t){var a=O2(t,s);if(a)return M2(a,r,s,o)}},R2=function(t){if(!t)return Ee;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof t.throwOnLimitExceeded<"u"&&typeof t.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof t.charset>"u"?Ee.charset:t.charset,s=typeof t.duplicates>"u"?Ee.duplicates:t.duplicates;if(s!=="combine"&&s!=="first"&&s!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ee.allowDots:!!t.allowDots;return{allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ee.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ee.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ee.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ee.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ee.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ee.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ee.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ee.decoder,delimiter:typeof t.delimiter=="string"||Zn.isRegExp(t.delimiter)?t.delimiter:Ee.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ee.depth,duplicates:s,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ee.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ee.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ee.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:Ee.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ee.strictNullHandling,throwOnLimitExceeded:typeof t.throwOnLimitExceeded=="boolean"?t.throwOnLimitExceeded:!1}},$2=function(e,t){var r=R2(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?{__proto__:null}:{};for(var s=typeof e=="string"?L2(e,r):e,o=r.plainObjects?{__proto__:null}:{},a=Object.keys(s),i=0;i<a.length;++i){var l=a[i],d=F2(l,s[l],r,typeof e=="string");o=Zn.merge(o,d,r)}return r.allowSparse===!0?o:Zn.compact(o)},I2=A2,z2=$2,k0={parse:z2,stringify:I2},df={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,t){(function(r,s){e.exports=s()})(xr,function(){var r={};r.version="0.2.0";var s=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};r.configure=function(m){var x,h;for(x in m)h=m[x],h!==void 0&&m.hasOwnProperty(x)&&(s[x]=h);return this},r.status=null,r.set=function(m){var x=r.isStarted();m=o(m,s.minimum,1),r.status=m===1?null:m;var h=r.render(!x),y=h.querySelector(s.barSelector),g=s.speed,j=s.easing;return h.offsetWidth,l(function(v){s.positionUsing===""&&(s.positionUsing=r.getPositioningCSS()),d(y,i(m,g,j)),m===1?(d(h,{transition:"none",opacity:1}),h.offsetWidth,setTimeout(function(){d(h,{transition:"all "+g+"ms linear",opacity:0}),setTimeout(function(){r.remove(),v()},g)},g)):setTimeout(v,g)}),this},r.isStarted=function(){return typeof r.status=="number"},r.start=function(){r.status||r.set(0);var m=function(){setTimeout(function(){r.status&&(r.trickle(),m())},s.trickleSpeed)};return s.trickle&&m(),this},r.done=function(m){return!m&&!r.status?this:r.inc(.3+.5*Math.random()).set(1)},r.inc=function(m){var x=r.status;return x?(typeof m!="number"&&(m=(1-x)*o(Math.random()*x,.1,.95)),x=o(x+m,0,.994),r.set(x)):r.start()},r.trickle=function(){return r.inc(Math.random()*s.trickleRate)},function(){var m=0,x=0;r.promise=function(h){return!h||h.state()==="resolved"?this:(x===0&&r.start(),m++,x++,h.always(function(){x--,x===0?(m=0,r.done()):r.set((m-x)/m)}),this)}}(),r.render=function(m){if(r.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var x=document.createElement("div");x.id="nprogress",x.innerHTML=s.template;var h=x.querySelector(s.barSelector),y=m?"-100":a(r.status||0),g=document.querySelector(s.parent),j;return d(h,{transition:"all 0 linear",transform:"translate3d("+y+"%,0,0)"}),s.showSpinner||(j=x.querySelector(s.spinnerSelector),j&&w(j)),g!=document.body&&c(g,"nprogress-custom-parent"),g.appendChild(x),x},r.remove=function(){f(document.documentElement,"nprogress-busy"),f(document.querySelector(s.parent),"nprogress-custom-parent");var m=document.getElementById("nprogress");m&&w(m)},r.isRendered=function(){return!!document.getElementById("nprogress")},r.getPositioningCSS=function(){var m=document.body.style,x="WebkitTransform"in m?"Webkit":"MozTransform"in m?"Moz":"msTransform"in m?"ms":"OTransform"in m?"O":"";return x+"Perspective"in m?"translate3d":x+"Transform"in m?"translate":"margin"};function o(m,x,h){return m<x?x:m>h?h:m}function a(m){return(-1+m)*100}function i(m,x,h){var y;return s.positionUsing==="translate3d"?y={transform:"translate3d("+a(m)+"%,0,0)"}:s.positionUsing==="translate"?y={transform:"translate("+a(m)+"%,0)"}:y={"margin-left":a(m)+"%"},y.transition="all "+x+"ms "+h,y}var l=function(){var m=[];function x(){var h=m.shift();h&&h(x)}return function(h){m.push(h),m.length==1&&x()}}(),d=function(){var m=["Webkit","O","Moz","ms"],x={};function h(v){return v.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(N,S){return S.toUpperCase()})}function y(v){var N=document.body.style;if(v in N)return v;for(var S=m.length,A=v.charAt(0).toUpperCase()+v.slice(1),D;S--;)if(D=m[S]+A,D in N)return D;return v}function g(v){return v=h(v),x[v]||(x[v]=y(v))}function j(v,N,S){N=g(N),v.style[N]=S}return function(v,N){var S=arguments,A,D;if(S.length==2)for(A in N)D=N[A],D!==void 0&&N.hasOwnProperty(A)&&j(v,A,D);else j(v,S[1],S[2])}}();function u(m,x){var h=typeof m=="string"?m:p(m);return h.indexOf(" "+x+" ")>=0}function c(m,x){var h=p(m),y=h+x;u(h,x)||(m.className=y.substring(1))}function f(m,x){var h=p(m),y;u(m,x)&&(y=h.replace(" "+x+" "," "),m.className=y.substring(1,y.length-1))}function p(m){return(" "+(m.className||"")+" ").replace(/\s+/gi," ")}function w(m){m&&m.parentNode&&m.parentNode.removeChild(m)}return r})})(df);var W2=df.exports;const sn=ic(W2);function cf(e,t){let r;return function(...s){clearTimeout(r),r=setTimeout(()=>e.apply(this,s),t)}}function En(e,t){return document.dispatchEvent(new CustomEvent(`inertia:${e}`,t))}var U2=e=>En("before",{cancelable:!0,detail:{visit:e}}),H2=e=>En("error",{detail:{errors:e}}),V2=e=>En("exception",{cancelable:!0,detail:{exception:e}}),w0=e=>En("finish",{detail:{visit:e}}),q2=e=>En("invalid",{cancelable:!0,detail:{response:e}}),Ps=e=>En("navigate",{detail:{page:e}}),J2=e=>En("progress",{detail:{progress:e}}),Q2=e=>En("start",{detail:{visit:e}}),G2=e=>En("success",{detail:{page:e}});function pd(e){return e instanceof File||e instanceof Blob||e instanceof FileList&&e.length>0||e instanceof FormData&&Array.from(e.values()).some(t=>pd(t))||typeof e=="object"&&e!==null&&Object.values(e).some(t=>pd(t))}function uf(e,t=new FormData,r=null){e=e||{};for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&pf(t,mf(r,s),e[s]);return t}function mf(e,t){return e?e+"["+t+"]":t}function pf(e,t,r){if(Array.isArray(r))return Array.from(r.keys()).forEach(s=>pf(e,mf(t,s.toString()),r[s]));if(r instanceof Date)return e.append(t,r.toISOString());if(r instanceof File)return e.append(t,r,r.name);if(r instanceof Blob)return e.append(t,r);if(typeof r=="boolean")return e.append(t,r?"1":"0");if(typeof r=="string")return e.append(t,r);if(typeof r=="number")return e.append(t,`${r}`);if(r==null)return e.append(t,"");uf(r,e,t)}var K2={modal:null,listener:null,show(e){typeof e=="object"&&(e=`All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>${JSON.stringify(e)}`);let t=document.createElement("html");t.innerHTML=e,t.querySelectorAll("a").forEach(s=>s.setAttribute("target","_top")),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",()=>this.hide());let r=document.createElement("iframe");if(r.style.backgroundColor="white",r.style.borderRadius="5px",r.style.width="100%",r.style.height="100%",this.modal.appendChild(r),document.body.prepend(this.modal),document.body.style.overflow="hidden",!r.contentWindow)throw new Error("iframe not yet ready.");r.contentWindow.document.open(),r.contentWindow.document.write(t.outerHTML),r.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape(e){e.keyCode===27&&this.hide()}};function Wr(e){return new URL(e.toString(),window.location.toString())}function ff(e,t,r,s="brackets"){let o=/^https?:\/\//.test(t.toString()),a=o||t.toString().startsWith("/"),i=!a&&!t.toString().startsWith("#")&&!t.toString().startsWith("?"),l=t.toString().includes("?")||e==="get"&&Object.keys(r).length,d=t.toString().includes("#"),u=new URL(t.toString(),"http://localhost");return e==="get"&&Object.keys(r).length&&(u.search=k0.stringify(U1(k0.parse(u.search,{ignoreQueryPrefix:!0}),r),{encodeValuesOnly:!0,arrayFormat:s}),r={}),[[o?`${u.protocol}//${u.host}`:"",a?u.pathname:"",i?u.pathname.substring(1):"",l?u.search:"",d?u.hash:""].join(""),r]}function Ts(e){return e=new URL(e.href),e.hash="",e}var Oa=typeof window>"u",N0=!Oa&&/CriOS/.test(window.navigator.userAgent),S0=e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})},Y2=class{constructor(){this.visitId=null}init({initialPage:e,resolveComponent:t,swapComponent:r}){this.page=e,this.resolveComponent=t,this.swapComponent=r,this.setNavigationType(),this.clearRememberedStateOnReload(),this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.isLocationVisit()?this.handleLocationVisit(this.page):this.handleInitialPageVisit(this.page),this.setupEventListeners()}setNavigationType(){this.navigationType=window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation").length>0?window.performance.getEntriesByType("navigation")[0].type:"navigate"}clearRememberedStateOnReload(){var e;this.navigationType==="reload"&&((e=window.history.state)!=null&&e.rememberedState)&&delete window.history.state.rememberedState}handleInitialPageVisit(e){let t=window.location.hash;this.page.url.includes(t)||(this.page.url+=t),this.setPage(e,{preserveScroll:!0,preserveState:!0}).then(()=>Ps(e))}setupEventListeners(){window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",cf(this.handleScrollEvent.bind(this),100),!0)}scrollRegions(){return document.querySelectorAll("[scroll-region]")}handleScrollEvent(e){typeof e.target.hasAttribute=="function"&&e.target.hasAttribute("scroll-region")&&this.saveScrollPositions()}saveScrollPositions(){this.replaceState({...this.page,scrollRegions:Array.from(this.scrollRegions()).map(e=>({top:e.scrollTop,left:e.scrollLeft}))})}resetScrollPositions(){S0(()=>{var e;window.scrollTo(0,0),this.scrollRegions().forEach(t=>{typeof t.scrollTo=="function"?t.scrollTo(0,0):(t.scrollTop=0,t.scrollLeft=0)}),this.saveScrollPositions(),window.location.hash&&((e=document.getElementById(window.location.hash.slice(1)))==null||e.scrollIntoView())})}restoreScrollPositions(){S0(()=>{this.page.scrollRegions&&this.scrollRegions().forEach((e,t)=>{let r=this.page.scrollRegions[t];if(r)typeof e.scrollTo=="function"?e.scrollTo(r.left,r.top):(e.scrollTop=r.top,e.scrollLeft=r.left);else return})})}isBackForwardVisit(){return window.history.state&&this.navigationType==="back_forward"}handleBackForwardVisit(e){window.history.state.version=e.version,this.setPage(window.history.state,{preserveScroll:!0,preserveState:!0}).then(()=>{this.restoreScrollPositions(),Ps(e)})}locationVisit(e,t){try{let r={preserveScroll:t};window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify(r)),window.location.href=e.href,Ts(window.location).href===Ts(e).href&&window.location.reload()}catch{return!1}}isLocationVisit(){try{return window.sessionStorage.getItem("inertiaLocationVisit")!==null}catch{return!1}}handleLocationVisit(e){var r,s;let t=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit")||"");window.sessionStorage.removeItem("inertiaLocationVisit"),e.url+=window.location.hash,e.rememberedState=((r=window.history.state)==null?void 0:r.rememberedState)??{},e.scrollRegions=((s=window.history.state)==null?void 0:s.scrollRegions)??[],this.setPage(e,{preserveScroll:t.preserveScroll,preserveState:!0}).then(()=>{t.preserveScroll&&this.restoreScrollPositions(),Ps(e)})}isLocationVisitResponse(e){return!!(e&&e.status===409&&e.headers["x-inertia-location"])}isInertiaResponse(e){return!!(e!=null&&e.headers["x-inertia"])}createVisitId(){return this.visitId={},this.visitId}cancelVisit(e,{cancelled:t=!1,interrupted:r=!1}){e&&!e.completed&&!e.cancelled&&!e.interrupted&&(e.cancelToken.abort(),e.onCancel(),e.completed=!1,e.cancelled=t,e.interrupted=r,w0(e),e.onFinish(e))}finishVisit(e){!e.cancelled&&!e.interrupted&&(e.completed=!0,e.cancelled=!1,e.interrupted=!1,w0(e),e.onFinish(e))}resolvePreserveOption(e,t){return typeof e=="function"?e(t):e==="errors"?Object.keys(t.props.errors||{}).length>0:e}cancel(){this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}visit(e,{method:t="get",data:r={},replace:s=!1,preserveScroll:o=!1,preserveState:a=!1,only:i=[],except:l=[],headers:d={},errorBag:u="",forceFormData:c=!1,onCancelToken:f=()=>{},onBefore:p=()=>{},onStart:w=()=>{},onProgress:m=()=>{},onFinish:x=()=>{},onCancel:h=()=>{},onSuccess:y=()=>{},onError:g=()=>{},queryStringArrayFormat:j="brackets"}={}){let v=typeof e=="string"?Wr(e):e;if((pd(r)||c)&&!(r instanceof FormData)&&(r=uf(r)),!(r instanceof FormData)){let[D,R]=ff(t,v,r,j);v=Wr(D),r=R}let N={url:v,method:t,data:r,replace:s,preserveScroll:o,preserveState:a,only:i,except:l,headers:d,errorBag:u,forceFormData:c,queryStringArrayFormat:j,cancelled:!1,completed:!1,interrupted:!1};if(p(N)===!1||!U2(N))return;this.activeVisit&&this.cancelVisit(this.activeVisit,{interrupted:!0}),this.saveScrollPositions();let S=this.createVisitId();this.activeVisit={...N,onCancelToken:f,onBefore:p,onStart:w,onProgress:m,onFinish:x,onCancel:h,onSuccess:y,onError:g,queryStringArrayFormat:j,cancelToken:new AbortController},f({cancel:()=>{this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}}),Q2(N),w(N);let A=!!(i.length||l.length);Ae({method:t,url:Ts(v).href,data:t==="get"?{}:r,params:t==="get"?r:{},signal:this.activeVisit.cancelToken.signal,headers:{...d,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0,...A?{"X-Inertia-Partial-Component":this.page.component}:{},...i.length?{"X-Inertia-Partial-Data":i.join(",")}:{},...l.length?{"X-Inertia-Partial-Except":l.join(",")}:{},...u&&u.length?{"X-Inertia-Error-Bag":u}:{},...this.page.version?{"X-Inertia-Version":this.page.version}:{}},onUploadProgress:D=>{r instanceof FormData&&(D.percentage=D.progress?Math.round(D.progress*100):0,J2(D),m(D))}}).then(D=>{var T;if(!this.isInertiaResponse(D))return Promise.reject({response:D});let R=D.data;A&&R.component===this.page.component&&(R.props={...this.page.props,...R.props}),o=this.resolvePreserveOption(o,R),a=this.resolvePreserveOption(a,R),a&&((T=window.history.state)!=null&&T.rememberedState)&&R.component===this.page.component&&(R.rememberedState=window.history.state.rememberedState);let P=v,I=Wr(R.url);return P.hash&&!I.hash&&Ts(P).href===I.href&&(I.hash=P.hash,R.url=I.href),this.setPage(R,{visitId:S,replace:s,preserveScroll:o,preserveState:a})}).then(()=>{let D=this.page.props.errors||{};if(Object.keys(D).length>0){let R=u?D[u]?D[u]:{}:D;return H2(R),g(R)}return G2(this.page),y(this.page)}).catch(D=>{if(this.isInertiaResponse(D.response))return this.setPage(D.response.data,{visitId:S});if(this.isLocationVisitResponse(D.response)){let R=Wr(D.response.headers["x-inertia-location"]),P=v;P.hash&&!R.hash&&Ts(P).href===R.href&&(R.hash=P.hash),this.locationVisit(R,o===!0)}else if(D.response)q2(D.response)&&K2.show(D.response.data);else return Promise.reject(D)}).then(()=>{this.activeVisit&&this.finishVisit(this.activeVisit)}).catch(D=>{if(!Ae.isCancel(D)){let R=V2(D);if(this.activeVisit&&this.finishVisit(this.activeVisit),R)return Promise.reject(D)}})}setPage(e,{visitId:t=this.createVisitId(),replace:r=!1,preserveScroll:s=!1,preserveState:o=!1}={}){return Promise.resolve(this.resolveComponent(e.component)).then(a=>{t===this.visitId&&(e.scrollRegions=this.page.scrollRegions||[],e.rememberedState=e.rememberedState||{},r=r||Wr(e.url).href===window.location.href,r?this.replaceState(e):this.pushState(e),this.swapComponent({component:a,page:e,preserveState:o}).then(()=>{s?this.restoreScrollPositions():this.resetScrollPositions(),r||Ps(e)}))})}pushState(e){this.page=e,N0?setTimeout(()=>window.history.pushState(e,"",e.url)):window.history.pushState(e,"",e.url)}replaceState(e){this.page=e,N0?setTimeout(()=>window.history.replaceState(e,"",e.url)):window.history.replaceState(e,"",e.url)}handlePopstateEvent(e){if(e.state!==null){let t=e.state,r=this.createVisitId();Promise.resolve(this.resolveComponent(t.component)).then(s=>{r===this.visitId&&(this.page=t,this.swapComponent({component:s,page:t,preserveState:!1}).then(()=>{this.restoreScrollPositions(),Ps(t)}))})}else{let t=Wr(this.page.url);t.hash=window.location.hash,this.replaceState({...this.page,url:t.href}),this.resetScrollPositions()}}get(e,t={},r={}){return this.visit(e,{...r,method:"get",data:t})}reload(e={}){return this.visit(window.location.href,{...e,preserveScroll:!0,preserveState:!0})}replace(e,t={}){return console.warn(`Inertia.replace() has been deprecated and will be removed in a future release. Please use Inertia.${t.method??"get"}() instead.`),this.visit(e,{preserveState:!0,...t,replace:!0})}post(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"post",data:t})}put(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"put",data:t})}patch(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"patch",data:t})}delete(e,t={}){return this.visit(e,{preserveState:!0,...t,method:"delete"})}remember(e,t="default"){var r;Oa||this.replaceState({...this.page,rememberedState:{...(r=this.page)==null?void 0:r.rememberedState,[t]:e}})}restore(e="default"){var t,r;if(!Oa)return(r=(t=window.history.state)==null?void 0:t.rememberedState)==null?void 0:r[e]}on(e,t){if(Oa)return()=>{};let r=s=>{let o=t(s);s.cancelable&&!s.defaultPrevented&&o===!1&&s.preventDefault()};return document.addEventListener(`inertia:${e}`,r),()=>document.removeEventListener(`inertia:${e}`,r)}},X2={buildDOMElement(e){let t=document.createElement("template");t.innerHTML=e;let r=t.content.firstChild;if(!e.startsWith("<script "))return r;let s=document.createElement("script");return s.innerHTML=r.innerHTML,r.getAttributeNames().forEach(o=>{s.setAttribute(o,r.getAttribute(o)||"")}),s},isInertiaManagedElement(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute("inertia")!==null},findMatchingElementIndex(e,t){let r=e.getAttribute("inertia");return r!==null?t.findIndex(s=>s.getAttribute("inertia")===r):-1},update:cf(function(e){let t=e.map(r=>this.buildDOMElement(r));Array.from(document.head.childNodes).filter(r=>this.isInertiaManagedElement(r)).forEach(r=>{var a,i;let s=this.findMatchingElementIndex(r,t);if(s===-1){(a=r==null?void 0:r.parentNode)==null||a.removeChild(r);return}let o=t.splice(s,1)[0];o&&!r.isEqualNode(o)&&((i=r==null?void 0:r.parentNode)==null||i.replaceChild(o,r))}),t.forEach(r=>document.head.appendChild(r))},1)};function Z2(e,t,r){let s={},o=0;function a(){let c=o+=1;return s[c]=[],c.toString()}function i(c){c===null||Object.keys(s).indexOf(c)===-1||(delete s[c],u())}function l(c,f=[]){c!==null&&Object.keys(s).indexOf(c)>-1&&(s[c]=f),u()}function d(){let c=t(""),f={...c?{title:`<title inertia="">${c}</title>`}:{}},p=Object.values(s).reduce((w,m)=>w.concat(m),[]).reduce((w,m)=>{if(m.indexOf("<")===-1)return w;if(m.indexOf("<title ")===0){let h=m.match(/(<title [^>]+>)(.*?)(<\/title>)/);return w.title=h?`${h[1]}${t(h[2])}${h[3]}`:m,w}let x=m.match(/ inertia="[^"]+"/);return x?w[x[0]]=m:w[Object.keys(w).length]=m,w},f);return Object.values(p)}function u(){e?r(d()):X2.update(d())}return u(),{forceUpdate:u,createProvider:function(){let c=a();return{update:f=>l(c,f),disconnect:()=>i(c)}}}}var xf=null;function ej(e){document.addEventListener("inertia:start",tj.bind(null,e)),document.addEventListener("inertia:progress",nj),document.addEventListener("inertia:finish",rj)}function tj(e){xf=setTimeout(()=>sn.start(),e)}function nj(e){var t;sn.isStarted()&&((t=e.detail.progress)!=null&&t.percentage)&&sn.set(Math.max(sn.status,e.detail.progress.percentage/100*.9))}function rj(e){if(clearTimeout(xf),sn.isStarted())e.detail.visit.completed?sn.done():e.detail.visit.interrupted?sn.set(0):e.detail.visit.cancelled&&(sn.done(),sn.remove());else return}function sj(e){let t=document.createElement("style");t.type="text/css",t.textContent=`
    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: ${e};

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px ${e}, 0 0 5px ${e};
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: ${e};
      border-left-color: ${e};
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  `,document.head.appendChild(t)}function oj({delay:e=250,color:t="#29d",includeCSS:r=!0,showSpinner:s=!1}={}){ej(e),sn.configure({showSpinner:s}),r&&sj(t)}function aj(e){let t=e.currentTarget.tagName.toLowerCase()==="a";return!(e.target&&(e==null?void 0:e.target).isContentEditable||e.defaultPrevented||t&&e.altKey||t&&e.ctrlKey||t&&e.metaKey||t&&e.shiftKey||t&&"button"in e&&e.button!==0)}var fd=new Y2,ti={exports:{}};ti.exports;(function(e,t){var r=200,s="__lodash_hash_undefined__",o=1,a=2,i=9007199254740991,l="[object Arguments]",d="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",p="[object Error]",w="[object Function]",m="[object GeneratorFunction]",x="[object Map]",h="[object Number]",y="[object Null]",g="[object Object]",j="[object Promise]",v="[object Proxy]",N="[object RegExp]",S="[object Set]",A="[object String]",D="[object Symbol]",R="[object Undefined]",P="[object WeakMap]",I="[object ArrayBuffer]",T="[object DataView]",W="[object Float32Array]",O="[object Float64Array]",B="[object Int8Array]",z="[object Int16Array]",J="[object Int32Array]",L="[object Uint8Array]",V="[object Uint8ClampedArray]",q="[object Uint16Array]",k="[object Uint32Array]",b=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,ee={};ee[W]=ee[O]=ee[B]=ee[z]=ee[J]=ee[L]=ee[V]=ee[q]=ee[k]=!0,ee[l]=ee[d]=ee[I]=ee[c]=ee[T]=ee[f]=ee[p]=ee[w]=ee[x]=ee[h]=ee[g]=ee[N]=ee[S]=ee[A]=ee[P]=!1;var $=typeof xr=="object"&&xr&&xr.Object===Object&&xr,X=typeof self=="object"&&self&&self.Object===Object&&self,ce=$||X||Function("return this")(),xe=t&&!t.nodeType&&t,Pe=xe&&!0&&e&&!e.nodeType&&e,pe=Pe&&Pe.exports===xe,Ge=pe&&$.process,je=function(){try{return Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),ft=je&&je.isTypedArray;function Qt(_,M){for(var Q=-1,te=_==null?0:_.length,ve=0,ie=[];++Q<te;){var _e=_[Q];M(_e,Q,_)&&(ie[ve++]=_e)}return ie}function dn(_,M){for(var Q=-1,te=M.length,ve=_.length;++Q<te;)_[ve+Q]=M[Q];return _}function Bt(_,M){for(var Q=-1,te=_==null?0:_.length;++Q<te;)if(M(_[Q],Q,_))return!0;return!1}function Lt(_,M){for(var Q=-1,te=Array(_);++Q<_;)te[Q]=M(Q);return te}function Mt(_){return function(M){return _(M)}}function Ot(_,M){return _.has(M)}function cn(_,M){return _==null?void 0:_[M]}function un(_){var M=-1,Q=Array(_.size);return _.forEach(function(te,ve){Q[++M]=[ve,te]}),Q}function mn(_,M){return function(Q){return _(M(Q))}}function pn(_){var M=-1,Q=Array(_.size);return _.forEach(function(te){Q[++M]=te}),Q}var Gt=Array.prototype,Kt=Function.prototype,at=Object.prototype,H=ce["__core-js_shared__"],Y=Kt.toString,se=at.hasOwnProperty,Z=function(){var _=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Re=at.toString,wt=RegExp("^"+Y.call(se).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ft=pe?ce.Buffer:void 0,fn=ce.Symbol,ar=ce.Uint8Array,An=at.propertyIsEnumerable,ir=Gt.splice,Yt=fn?fn.toStringTag:void 0,Fo=Object.getOwnPropertySymbols,Ro=Ft?Ft.isBuffer:void 0,Zi=mn(Object.keys,Object),xt=Rr(ce,"DataView"),Pn=Rr(ce,"Map"),Br=Rr(ce,"Promise"),Lr=Rr(ce,"Set"),Mr=Rr(ce,"WeakMap"),Tn=Rr(Object,"create"),$o=dr(xt),Io=dr(Pn),zo=dr(Br),Wo=dr(Lr),Uo=dr(Mr),Cs=fn?fn.prototype:void 0,Or=Cs?Cs.valueOf:void 0;function Xt(_){var M=-1,Q=_==null?0:_.length;for(this.clear();++M<Q;){var te=_[M];this.set(te[0],te[1])}}function Ho(){this.__data__=Tn?Tn(null):{},this.size=0}function Vo(_){var M=this.has(_)&&delete this.__data__[_];return this.size-=M?1:0,M}function qo(_){var M=this.__data__;if(Tn){var Q=M[_];return Q===s?void 0:Q}return se.call(M,_)?M[_]:void 0}function Jo(_){var M=this.__data__;return Tn?M[_]!==void 0:se.call(M,_)}function C(_,M){var Q=this.__data__;return this.size+=this.has(_)?0:1,Q[_]=Tn&&M===void 0?s:M,this}Xt.prototype.clear=Ho,Xt.prototype.delete=Vo,Xt.prototype.get=qo,Xt.prototype.has=Jo,Xt.prototype.set=C;function F(_){var M=-1,Q=_==null?0:_.length;for(this.clear();++M<Q;){var te=_[M];this.set(te[0],te[1])}}function $e(){this.__data__=[],this.size=0}function Fr(_){var M=this.__data__,Q=Go(M,_);if(Q<0)return!1;var te=M.length-1;return Q==te?M.pop():ir.call(M,Q,1),--this.size,!0}function el(_){var M=this.__data__,Q=Go(M,_);return Q<0?void 0:M[Q][1]}function Bh(_){return Go(this.__data__,_)>-1}function Lh(_,M){var Q=this.__data__,te=Go(Q,_);return te<0?(++this.size,Q.push([_,M])):Q[te][1]=M,this}F.prototype.clear=$e,F.prototype.delete=Fr,F.prototype.get=el,F.prototype.has=Bh,F.prototype.set=Lh;function lr(_){var M=-1,Q=_==null?0:_.length;for(this.clear();++M<Q;){var te=_[M];this.set(te[0],te[1])}}function Mh(){this.size=0,this.__data__={hash:new Xt,map:new(Pn||F),string:new Xt}}function Oh(_){var M=Ko(this,_).delete(_);return this.size-=M?1:0,M}function Fh(_){return Ko(this,_).get(_)}function Rh(_){return Ko(this,_).has(_)}function $h(_,M){var Q=Ko(this,_),te=Q.size;return Q.set(_,M),this.size+=Q.size==te?0:1,this}lr.prototype.clear=Mh,lr.prototype.delete=Oh,lr.prototype.get=Fh,lr.prototype.has=Rh,lr.prototype.set=$h;function Qo(_){var M=-1,Q=_==null?0:_.length;for(this.__data__=new lr;++M<Q;)this.add(_[M])}function Ih(_){return this.__data__.set(_,s),this}function zh(_){return this.__data__.has(_)}Qo.prototype.add=Qo.prototype.push=Ih,Qo.prototype.has=zh;function Bn(_){var M=this.__data__=new F(_);this.size=M.size}function Wh(){this.__data__=new F,this.size=0}function Uh(_){var M=this.__data__,Q=M.delete(_);return this.size=M.size,Q}function Hh(_){return this.__data__.get(_)}function Vh(_){return this.__data__.has(_)}function qh(_,M){var Q=this.__data__;if(Q instanceof F){var te=Q.__data__;if(!Pn||te.length<r-1)return te.push([_,M]),this.size=++Q.size,this;Q=this.__data__=new lr(te)}return Q.set(_,M),this.size=Q.size,this}Bn.prototype.clear=Wh,Bn.prototype.delete=Uh,Bn.prototype.get=Hh,Bn.prototype.has=Vh,Bn.prototype.set=qh;function Jh(_,M){var Q=Yo(_),te=!Q&&lg(_),ve=!Q&&!te&&tl(_),ie=!Q&&!te&&!ve&&Su(_),_e=Q||te||ve||ie,Ie=_e?Lt(_.length,String):[],Ve=Ie.length;for(var we in _)se.call(_,we)&&!(_e&&(we=="length"||ve&&(we=="offset"||we=="parent")||ie&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||rg(we,Ve)))&&Ie.push(we);return Ie}function Go(_,M){for(var Q=_.length;Q--;)if(ju(_[Q][0],M))return Q;return-1}function Qh(_,M,Q){var te=M(_);return Yo(_)?te:dn(te,Q(_))}function _s(_){return _==null?_===void 0?R:y:Yt&&Yt in Object(_)?tg(_):ig(_)}function gu(_){return Es(_)&&_s(_)==l}function vu(_,M,Q,te,ve){return _===M?!0:_==null||M==null||!Es(_)&&!Es(M)?_!==_&&M!==M:Gh(_,M,Q,te,vu,ve)}function Gh(_,M,Q,te,ve,ie){var _e=Yo(_),Ie=Yo(M),Ve=_e?d:Ln(_),we=Ie?d:Ln(M);Ve=Ve==l?g:Ve,we=we==l?g:we;var ht=Ve==g,Rt=we==g,Ke=Ve==we;if(Ke&&tl(_)){if(!tl(M))return!1;_e=!0,ht=!1}if(Ke&&!ht)return ie||(ie=new Bn),_e||Su(_)?yu(_,M,Q,te,ve,ie):Zh(_,M,Ve,Q,te,ve,ie);if(!(Q&o)){var Nt=ht&&se.call(_,"__wrapped__"),St=Rt&&se.call(M,"__wrapped__");if(Nt||St){var Mn=Nt?_.value():_,xn=St?M.value():M;return ie||(ie=new Bn),ve(Mn,xn,Q,te,ie)}}return Ke?(ie||(ie=new Bn),eg(_,M,Q,te,ve,ie)):!1}function Kh(_){if(!Nu(_)||og(_))return!1;var M=ku(_)?wt:K;return M.test(dr(_))}function Yh(_){return Es(_)&&wu(_.length)&&!!ee[_s(_)]}function Xh(_){if(!ag(_))return Zi(_);var M=[];for(var Q in Object(_))se.call(_,Q)&&Q!="constructor"&&M.push(Q);return M}function yu(_,M,Q,te,ve,ie){var _e=Q&o,Ie=_.length,Ve=M.length;if(Ie!=Ve&&!(_e&&Ve>Ie))return!1;var we=ie.get(_);if(we&&ie.get(M))return we==M;var ht=-1,Rt=!0,Ke=Q&a?new Qo:void 0;for(ie.set(_,M),ie.set(M,_);++ht<Ie;){var Nt=_[ht],St=M[ht];if(te)var Mn=_e?te(St,Nt,ht,M,_,ie):te(Nt,St,ht,_,M,ie);if(Mn!==void 0){if(Mn)continue;Rt=!1;break}if(Ke){if(!Bt(M,function(xn,cr){if(!Ot(Ke,cr)&&(Nt===xn||ve(Nt,xn,Q,te,ie)))return Ke.push(cr)})){Rt=!1;break}}else if(!(Nt===St||ve(Nt,St,Q,te,ie))){Rt=!1;break}}return ie.delete(_),ie.delete(M),Rt}function Zh(_,M,Q,te,ve,ie,_e){switch(Q){case T:if(_.byteLength!=M.byteLength||_.byteOffset!=M.byteOffset)return!1;_=_.buffer,M=M.buffer;case I:return!(_.byteLength!=M.byteLength||!ie(new ar(_),new ar(M)));case c:case f:case h:return ju(+_,+M);case p:return _.name==M.name&&_.message==M.message;case N:case A:return _==M+"";case x:var Ie=un;case S:var Ve=te&o;if(Ie||(Ie=pn),_.size!=M.size&&!Ve)return!1;var we=_e.get(_);if(we)return we==M;te|=a,_e.set(_,M);var ht=yu(Ie(_),Ie(M),te,ve,ie,_e);return _e.delete(_),ht;case D:if(Or)return Or.call(_)==Or.call(M)}return!1}function eg(_,M,Q,te,ve,ie){var _e=Q&o,Ie=bu(_),Ve=Ie.length,we=bu(M),ht=we.length;if(Ve!=ht&&!_e)return!1;for(var Rt=Ve;Rt--;){var Ke=Ie[Rt];if(!(_e?Ke in M:se.call(M,Ke)))return!1}var Nt=ie.get(_);if(Nt&&ie.get(M))return Nt==M;var St=!0;ie.set(_,M),ie.set(M,_);for(var Mn=_e;++Rt<Ve;){Ke=Ie[Rt];var xn=_[Ke],cr=M[Ke];if(te)var Cu=_e?te(cr,xn,Ke,M,_,ie):te(xn,cr,Ke,_,M,ie);if(!(Cu===void 0?xn===cr||ve(xn,cr,Q,te,ie):Cu)){St=!1;break}Mn||(Mn=Ke=="constructor")}if(St&&!Mn){var Xo=_.constructor,Zo=M.constructor;Xo!=Zo&&"constructor"in _&&"constructor"in M&&!(typeof Xo=="function"&&Xo instanceof Xo&&typeof Zo=="function"&&Zo instanceof Zo)&&(St=!1)}return ie.delete(_),ie.delete(M),St}function bu(_){return Qh(_,ug,ng)}function Ko(_,M){var Q=_.__data__;return sg(M)?Q[typeof M=="string"?"string":"hash"]:Q.map}function Rr(_,M){var Q=cn(_,M);return Kh(Q)?Q:void 0}function tg(_){var M=se.call(_,Yt),Q=_[Yt];try{_[Yt]=void 0;var te=!0}catch{}var ve=Re.call(_);return te&&(M?_[Yt]=Q:delete _[Yt]),ve}var ng=Fo?function(_){return _==null?[]:(_=Object(_),Qt(Fo(_),function(M){return An.call(_,M)}))}:mg,Ln=_s;(xt&&Ln(new xt(new ArrayBuffer(1)))!=T||Pn&&Ln(new Pn)!=x||Br&&Ln(Br.resolve())!=j||Lr&&Ln(new Lr)!=S||Mr&&Ln(new Mr)!=P)&&(Ln=function(_){var M=_s(_),Q=M==g?_.constructor:void 0,te=Q?dr(Q):"";if(te)switch(te){case $o:return T;case Io:return x;case zo:return j;case Wo:return S;case Uo:return P}return M});function rg(_,M){return M=M??i,!!M&&(typeof _=="number"||re.test(_))&&_>-1&&_%1==0&&_<M}function sg(_){var M=typeof _;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?_!=="__proto__":_===null}function og(_){return!!Z&&Z in _}function ag(_){var M=_&&_.constructor,Q=typeof M=="function"&&M.prototype||at;return _===Q}function ig(_){return Re.call(_)}function dr(_){if(_!=null){try{return Y.call(_)}catch{}try{return _+""}catch{}}return""}function ju(_,M){return _===M||_!==_&&M!==M}var lg=gu(function(){return arguments}())?gu:function(_){return Es(_)&&se.call(_,"callee")&&!An.call(_,"callee")},Yo=Array.isArray;function dg(_){return _!=null&&wu(_.length)&&!ku(_)}var tl=Ro||pg;function cg(_,M){return vu(_,M)}function ku(_){if(!Nu(_))return!1;var M=_s(_);return M==w||M==m||M==u||M==v}function wu(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=i}function Nu(_){var M=typeof _;return _!=null&&(M=="object"||M=="function")}function Es(_){return _!=null&&typeof _=="object"}var Su=ft?Mt(ft):Yh;function ug(_){return dg(_)?Jh(_):Xh(_)}function mg(){return[]}function pg(){return!1}e.exports=cg})(ti,ti.exports);ti.exports;var hf=E.createContext(void 0);hf.displayName="InertiaHeadContext";var C0=hf,gf=E.createContext(void 0);gf.displayName="InertiaPageContext";var _0=gf;function vf({children:e,initialPage:t,initialComponent:r,resolveComponent:s,titleCallback:o,onHeadUpdate:a}){let[i,l]=E.useState({component:r||null,page:t,key:null}),d=E.useMemo(()=>Z2(typeof window>"u",o||(c=>c),a||(()=>{})),[]);if(E.useEffect(()=>{fd.init({initialPage:t,resolveComponent:s,swapComponent:async({component:c,page:f,preserveState:p})=>{l(w=>({component:c,page:f,key:p?w.key:Date.now()}))}}),fd.on("navigate",()=>d.forceUpdate())},[]),!i.component)return E.createElement(C0.Provider,{value:d},E.createElement(_0.Provider,{value:i.page},null));let u=e||(({Component:c,props:f,key:p})=>{let w=E.createElement(c,{key:p,...f});return typeof c.layout=="function"?c.layout(w):Array.isArray(c.layout)?c.layout.concat(w).reverse().reduce((m,x)=>E.createElement(x,{children:m,...f})):w});return E.createElement(C0.Provider,{value:d},E.createElement(_0.Provider,{value:i.page},u({Component:i.component,key:i.key,props:i.page.props})))}vf.displayName="Inertia";async function ij({id:e="app",resolve:t,setup:r,title:s,progress:o={},page:a,render:i}){let l=typeof window>"u",d=l?null:document.getElementById(e),u=a||JSON.parse(d.dataset.page),c=w=>Promise.resolve(t(w)).then(m=>m.default||m),f=[],p=await c(u.component).then(w=>r({el:d,App:vf,props:{initialPage:u,initialComponent:w,resolveComponent:c,titleCallback:s,onHeadUpdate:l?m=>f=m:null}}));if(!l&&o&&oj(o),l){let w=await i(E.createElement("div",{id:e,"data-page":JSON.stringify(u)},p));return{head:f,body:w}}}var hn=()=>{},yf=E.forwardRef(({children:e,as:t="a",data:r={},href:s,method:o="get",preserveScroll:a=!1,preserveState:i=null,replace:l=!1,only:d=[],except:u=[],headers:c={},queryStringArrayFormat:f="brackets",onClick:p=hn,onCancelToken:w=hn,onBefore:m=hn,onStart:x=hn,onProgress:h=hn,onFinish:y=hn,onCancel:g=hn,onSuccess:j=hn,onError:v=hn,...N},S)=>{let A=E.useCallback(P=>{p(P),aj(P)&&(P.preventDefault(),fd.visit(s,{data:r,method:o,preserveScroll:a,preserveState:i??o!=="get",replace:l,only:d,except:u,headers:c,onCancelToken:w,onBefore:m,onStart:x,onProgress:h,onFinish:y,onCancel:g,onSuccess:j,onError:v}))},[r,s,o,a,i,l,d,u,c,p,w,m,x,h,y,g,j,v]);t=t.toLowerCase(),o=o.toLowerCase();let[D,R]=ff(o,s||"",r,f);return s=D,r=R,t==="a"&&o!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${s}" method="${o}" as="button">...</Link>`),E.createElement(t,{...N,...t==="a"?{href:s}:{},ref:S,onClick:A},e)});yf.displayName="InertiaLink";var Nl=yf;function lj({message:e,milestone:t}){return n.jsxs("main",{style:{fontFamily:"Inter, system-ui, sans-serif",padding:"2rem"},children:[n.jsx("p",{style:{margin:0,color:"#5B5781",fontWeight:700},children:"Inertia.js"}),n.jsx("h1",{style:{marginTop:"0.5rem"},children:"Terranova Application"}),n.jsx("p",{children:e}),n.jsxs("p",{children:["Milestone actif: ",t]}),n.jsx("p",{children:n.jsx(Nl,{href:"/app/lab",children:"Aller au Milestone 2 (Lab Management)"})}),n.jsx("p",{children:n.jsx(Nl,{href:"/plants",children:"Aller au Milestone 3 (Plant Database)"})}),n.jsx("p",{children:n.jsx(Nl,{href:"/app/design",children:"Aller au Milestone 4 (Design Studio)"})})]})}const dj=Object.freeze(Object.defineProperty({__proto__:null,default:lj},Symbol.toStringTag,{value:"Module"})),oa=[{fill:"#8b5cf6",label:"text-violet-700 dark:text-violet-300"},{fill:"#f59e0b",label:"text-amber-700 dark:text-amber-300"},{fill:"#10b981",label:"text-emerald-700 dark:text-emerald-300"},{fill:"#f43f5e",label:"text-rose-700 dark:text-rose-300"},{fill:"#0ea5e9",label:"text-sky-700 dark:text-sky-300"}];function bf({scopes:e,pitchTitle:t,onUpdatePosition:r,onViewScope:s,compact:o=!1}){const a=o?60:120,i="M 0 85 C 15 85, 25 25, 45 20 C 55 18, 55 18, 65 25 C 85 40, 95 85, 100 85",l=(c,f,p,w,m)=>{const x=1-c;return x*x*x*f+3*x*x*c*p+3*x*c*c*w+c*c*c*m},d=(c,f,p,w,m)=>{let x=0,h=1;for(let y=0;y<20;y++){const g=(x+h)/2;l(g,f,p,w,m)<c?x=g:h=g}return(x+h)/2},u=c=>{const f=c;if(f<=45){const p=d(f,0,15,25,45);return l(p,85,85,25,20)}else if(f<=65){const p=d(f,45,55,55,65);return l(p,20,18,18,25)}else{const p=d(f,65,85,95,100);return l(p,25,40,85,85)}};return n.jsxs("div",{className:"w-full",children:[!o&&n.jsx("h4",{className:"font-medium text-stone-800 dark:text-stone-100 mb-3 truncate",children:t}),n.jsxs("div",{className:"relative",style:{height:a},children:[n.jsxs("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 w-full h-full",preserveAspectRatio:"none",children:[n.jsx("path",{d:i,fill:"none",stroke:"currentColor",strokeWidth:"2",vectorEffect:"non-scaling-stroke",className:"text-stone-300 dark:text-stone-600"}),n.jsx("line",{x1:"50",y1:"15",x2:"50",y2:"92",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"2,3",vectorEffect:"non-scaling-stroke",className:"text-stone-300 dark:text-stone-500"})]}),e.map((c,f)=>{const p=c.hillPosition,w=u(p),m=oa[f%oa.length],x=o?10:14;return n.jsx("button",{onClick:()=>s==null?void 0:s(c.id),className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-transform hover:scale-125 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 rounded-full",style:{left:`${p}%`,top:`${w}%`,width:x,height:x,backgroundColor:m.fill,boxShadow:`0 0 0 3px ${m.fill}33`},title:c.name},c.id)})]}),!o&&n.jsxs("div",{className:"flex justify-between text-[10px] text-stone-400 dark:text-stone-500 mt-1 px-1",children:[n.jsx("span",{children:"Figuring it out"}),n.jsx("span",{children:"Making it happen"})]}),n.jsx("div",{className:`flex flex-wrap gap-x-4 gap-y-1 ${o?"mt-2":"mt-3"}`,children:e.map((c,f)=>{const p=oa[f%oa.length],w=c.tasks.filter(x=>x.completed).length,m=c.tasks.length;return n.jsxs("button",{onClick:()=>s==null?void 0:s(c.id),className:"flex items-center gap-1.5 text-xs hover:opacity-80 transition-opacity",children:[n.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:p.fill}}),n.jsx("span",{className:`${p.label} font-medium`,children:c.name}),!o&&n.jsxs("span",{className:"text-stone-400 dark:text-stone-500",children:[w,"/",m]})]},c.id)})})]})}const cj={project_meeting:{label:"Réunion projet",icon:"📋",color:"text-blue-700 dark:text-blue-300",bgColor:"bg-blue-50 dark:bg-blue-900/30"},stakeholder_meeting:{label:"Porteurs de projet",icon:"👥",color:"text-purple-700 dark:text-purple-300",bgColor:"bg-purple-50 dark:bg-purple-900/30"},design_day:{label:"Design Day",icon:"🎨",color:"text-lime-700 dark:text-lime-300",bgColor:"bg-lime-50 dark:bg-lime-900/30"},guild_meeting:{label:"Guilde",icon:"⚙️",color:"text-stone-700 dark:text-stone-300",bgColor:"bg-stone-100 dark:bg-stone-800"},betting:{label:"Betting Table",icon:"🎲",color:"text-amber-700 dark:text-amber-300",bgColor:"bg-amber-50 dark:bg-amber-900/30"},semisto_day:{label:"Semisto Day",icon:"🌳",color:"text-emerald-700 dark:text-emerald-300",bgColor:"bg-emerald-50 dark:bg-emerald-900/30"},semos_fest:{label:"Semos Fest",icon:"🎉",color:"text-rose-700 dark:text-rose-300",bgColor:"bg-rose-50 dark:bg-rose-900/30"},training:{label:"Formation",icon:"📚",color:"text-orange-700 dark:text-orange-300",bgColor:"bg-orange-50 dark:bg-orange-900/30"}};function uj(e,t){const r=new Date(e),s=new Date(t),o={weekday:"short",day:"numeric",month:"short"},a={hour:"2-digit",minute:"2-digit"},i=r.toLocaleDateString("fr-FR",o),l=r.toLocaleTimeString("fr-FR",a),d=s.toLocaleTimeString("fr-FR",a);if(r.toDateString()!==s.toDateString()){const u=s.toLocaleDateString("fr-FR",o);return`${i} - ${u}`}return`${i} · ${l} - ${d}`}function mj({event:e,members:t,onView:r}){const s=cj[e.type],o=t.filter(a=>e.attendeeIds.includes(a.id));return n.jsxs("button",{onClick:r,className:`
        w-full text-left p-3 rounded-lg border border-stone-200 dark:border-stone-700
        hover:border-stone-300 dark:hover:border-stone-600
        hover:shadow-sm transition-all
        bg-white dark:bg-stone-800/50
      `,children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("span",{className:`
          inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium
          ${s.bgColor} ${s.color}
        `,children:[n.jsx("span",{children:s.icon}),n.jsx("span",{children:s.label})]})}),n.jsx("h4",{className:"font-medium text-stone-800 dark:text-stone-100 mb-1 line-clamp-1",children:e.title}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:uj(e.startDate,e.endDate)}),n.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-stone-500 dark:text-stone-400 mb-2",children:[n.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),n.jsx("span",{className:"truncate",children:e.location})]}),o.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex -space-x-2",children:o.slice(0,4).map(a=>n.jsx("img",{src:a.avatar,alt:`${a.firstName} ${a.lastName}`,className:"w-6 h-6 rounded-full border-2 border-white dark:border-stone-800 bg-stone-100"},a.id))}),o.length>4&&n.jsxs("span",{className:"text-xs text-stone-400 dark:text-stone-500 ml-1",children:["+",o.length-4]})]})]})}function E0(e){return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:1}).format(e)}function pj(e){return new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}function D0(e,t,r){const s=t.find(o=>o.id===e);return s&&r.find(o=>o.id===s.memberId)||null}function fj({wallet:e,member:t,transactions:r,emissions:s,allMembers:o,allWallets:a,onTransfer:i,onViewHistory:l}){const d=[...r.filter(f=>f.fromWalletId===e.id||f.toWalletId===e.id).map(f=>({id:f.id,type:"transaction",date:f.createdAt,description:f.description,amount:f.toWalletId===e.id?f.amount:-f.amount,isIncoming:f.toWalletId===e.id,otherParty:f.toWalletId===e.id?D0(f.fromWalletId,a,o):D0(f.toWalletId,a,o)})),...s.filter(f=>f.walletId===e.id).map(f=>({id:f.id,type:"emission",date:f.createdAt,description:f.description,amount:f.amount,isIncoming:!0,otherParty:null}))].sort((f,p)=>new Date(p.date).getTime()-new Date(f.date).getTime()).slice(0,3),u=e.ceiling-e.floor,c=(e.balance-e.floor)/u*100;return n.jsxs("div",{className:"bg-gradient-to-br from-[#5B5781] to-[#4a4670] rounded-xl p-5 text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-lg",children:"Ⓢ"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white/70 text-xs",children:"Mon portefeuille"}),n.jsxs("p",{className:"font-medium",children:[t.firstName," ",t.lastName]})]})]}),n.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors",children:"Transférer"})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("p",{className:"text-3xl font-bold tracking-tight",children:[E0(e.balance),n.jsx("span",{className:"text-lg font-normal text-white/70 ml-1",children:"Semos"})]})}),n.jsxs("div",{className:"mb-5",children:[n.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-[#AFBD00] rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,c))}%`}})}),n.jsxs("div",{className:"flex justify-between text-[10px] text-white/50 mt-1",children:[n.jsxs("span",{children:["Plancher: ",e.floor,"S"]}),n.jsxs("span",{children:["Plafond: ",e.ceiling,"S"]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-xs font-medium text-white/70 uppercase tracking-wide",children:"Activité récente"}),n.jsx("button",{onClick:l,className:"text-xs text-white/50 hover:text-white/80 transition-colors",children:"Voir tout →"})]}),d.length===0?n.jsx("p",{className:"text-sm text-white/50 py-2",children:"Aucune activité récente"}):n.jsx("div",{className:"space-y-2",children:d.map(f=>n.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-white/10 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx("span",{className:`
                    w-5 h-5 rounded-full flex items-center justify-center text-xs
                    ${f.isIncoming?"bg-emerald-500/30 text-emerald-300":"bg-rose-500/30 text-rose-300"}
                  `,children:f.isIncoming?"↓":"↑"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-sm truncate",children:f.description}),f.otherParty&&n.jsxs("p",{className:"text-[10px] text-white/50",children:[f.isIncoming?"De":"À"," ",f.otherParty.firstName," ",f.otherParty.lastName[0],"."]})]})]}),n.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[n.jsxs("p",{className:`text-sm font-medium ${f.isIncoming?"text-emerald-300":"text-rose-300"}`,children:[f.isIncoming?"+":"",E0(f.amount),"S"]}),n.jsx("p",{className:"text-[10px] text-white/50",children:pj(f.date)})]})]},f.id))})]})]})}function Sl(e){return new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}function xj(e){const t=new Date,r=new Date(e.startDate),s=new Date(e.endDate),o=new Date(e.cooldownStart),a=new Date(e.cooldownEnd);if(t>=o&&t<=a){const u=a.getTime()-o.getTime(),c=t.getTime()-o.getTime(),f=Math.ceil((a.getTime()-t.getTime())/(1e3*60*60*24));return{percent:Math.min(100,c/u*100),daysRemaining:f,phase:"cooldown"}}const i=s.getTime()-r.getTime(),l=t.getTime()-r.getTime(),d=Math.ceil((s.getTime()-t.getTime())/(1e3*60*60*24));return{percent:Math.min(100,Math.max(0,l/i*100)),daysRemaining:Math.max(0,d),phase:"work"}}function hj({cycle:e,onViewCycle:t}){const r=xj(e);return n.jsxs("button",{onClick:t,className:"w-full text-left bg-white dark:bg-stone-800/50 rounded-xl p-5 border border-stone-200 dark:border-stone-700 hover:border-stone-300 dark:hover:border-stone-600 transition-all hover:shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`
              inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium uppercase tracking-wide
              ${r.phase==="work"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"}
            `,children:r.phase==="work"?"En cours":"Cooldown"})}),n.jsx("h3",{className:"text-lg font-semibold text-stone-800 dark:text-stone-100 mt-1",children:e.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:r.daysRemaining}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"jours restants"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"h-3 bg-stone-100 dark:bg-stone-700 rounded-full overflow-hidden flex",children:[n.jsxs("div",{className:"w-3/4 relative",children:[r.phase==="work"&&n.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-[#5B5781] to-[#7B75A1] rounded-l-full transition-all",style:{width:`${r.percent}%`}}),r.phase==="cooldown"&&n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#5B5781] to-[#7B75A1] rounded-l-full"})]}),n.jsx("div",{className:"w-1/4 relative border-l-2 border-white dark:border-stone-800",children:r.phase==="cooldown"&&n.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-amber-400 to-amber-500 rounded-r-full transition-all",style:{width:`${r.percent}%`}})})]}),n.jsxs("div",{className:"flex justify-between mt-2 text-[10px] text-stone-400 dark:text-stone-500",children:[n.jsx("span",{children:Sl(e.startDate)}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-stone-300 dark:bg-stone-600"}),Sl(e.cooldownStart)]}),n.jsx("span",{children:Sl(e.cooldownEnd)})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-stone-500 dark:text-stone-400",children:[n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-[#5B5781]"}),"Travail (6 sem.)"]}),n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),"Cooldown (2 sem.)"]})]})]})}function gj({members:e,cycles:t,guilds:r,pitches:s,bets:o,scopes:a,events:i,wallets:l,semosTransactions:d,semosEmissions:u,currentMemberId:c,onViewPitch:f,onViewScope:p,onViewEvent:w,onViewCycle:m,onCreateEvent:x,onTransferSemos:h,onViewSemosHistory:y,onViewMember:g}){const j=e.find(T=>T.id===c),v=l.find(T=>T.memberId===c),N=t.find(T=>T.status==="active"||T.status==="cooldown"),A=o.filter(T=>T.status==="in_progress").map(T=>{const W=s.find(z=>z.id===T.pitchId),O=a.filter(z=>z.pitchId===T.pitchId),B=T.teamMemberIds.map(z=>e.find(J=>J.id===z)).filter(Boolean);return W?{pitch:W,scopes:O,bet:T,team:B}:null}).filter(Boolean),D=new Date,R=new Date(D.getTime()+7*24*60*60*1e3),P=i.filter(T=>{const W=new Date(T.startDate);return W>=D&&W<=R}).sort((T,W)=>new Date(T.startDate).getTime()-new Date(W.startDate).getTime()).slice(0,4),I=r.filter(T=>j==null?void 0:j.guildIds.includes(T.id));return n.jsx("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-stone-800 dark:text-stone-100",children:["Bonjour, ",j==null?void 0:j.firstName," 👋"]}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:"Voici ce qui se passe dans le Lab aujourd'hui"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[N&&n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-3",children:"Cycle actif"}),n.jsx(hj,{cycle:N,onViewCycle:()=>m==null?void 0:m(N.id)})]}),n.jsxs("section",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Projets en cours"}),n.jsxs("span",{className:"text-xs text-stone-400 dark:text-stone-500",children:[A.length," projet",A.length>1?"s":""]})]}),A.length===0?n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl p-8 border border-stone-200 dark:border-stone-700 text-center",children:n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Aucun projet en cours pour ce cycle"})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(({pitch:T,scopes:W,team:O})=>n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl p-5 border border-stone-200 dark:border-stone-700 hover:border-stone-300 dark:hover:border-stone-600 transition-all hover:shadow-sm",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("button",{onClick:()=>f==null?void 0:f(T.id),className:"text-left hover:opacity-80 transition-opacity",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 line-clamp-2",children:T.title}),n.jsx("span",{className:"inline-flex items-center mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-[#5B5781]/10 text-[#5B5781] dark:bg-[#5B5781]/30 dark:text-[#c8bfd2]",children:T.appetite})]}),n.jsx("div",{className:"flex -space-x-2 flex-shrink-0 ml-2",children:O.slice(0,3).map(B=>n.jsx("img",{src:B.avatar,alt:`${B.firstName} ${B.lastName}`,title:`${B.firstName} ${B.lastName}`,className:"w-7 h-7 rounded-full border-2 border-white dark:border-stone-800 bg-stone-100 cursor-pointer hover:z-10 hover:scale-110 transition-transform",onClick:()=>g==null?void 0:g(B.id)},B.id))})]}),W.length>0?n.jsx(bf,{scopes:W,pitchTitle:T.title,compact:!0,onViewScope:p}):n.jsx("div",{className:"py-4 text-center text-sm text-stone-400 dark:text-stone-500 bg-stone-50 dark:bg-stone-800 rounded-lg",children:"Aucun scope défini"})]},T.id))})]}),n.jsxs("section",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Prochains événements"}),n.jsx("button",{onClick:x,className:"text-xs text-[#5B5781] hover:text-[#4a4670] dark:text-[#c8bfd2] dark:hover:text-white font-medium transition-colors",children:"+ Créer"})]}),P.length===0?n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl p-8 border border-stone-200 dark:border-stone-700 text-center",children:n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Aucun événement prévu cette semaine"})}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:P.map(T=>n.jsx(mj,{event:T,members:e,onView:()=>w==null?void 0:w(T.id)},T.id))})]})]}),n.jsxs("div",{className:"space-y-6",children:[v&&j&&n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-3",children:"Mon portefeuille"}),n.jsx(fj,{wallet:v,member:j,transactions:d,emissions:u,allMembers:e,allWallets:l,onTransfer:h,onViewHistory:y})]}),I.length>0&&n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-3",children:"Mes guildes"}),n.jsx("div",{className:"space-y-2",children:I.map(T=>{const W=e.find(z=>z.id===T.leaderId),O=e.filter(z=>T.memberIds.includes(z.id)),B={blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",green:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",orange:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",red:"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300"};return n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${B[T.color]}`,children:T.name}),(W==null?void 0:W.id)===c&&n.jsx("span",{className:"text-[10px] text-stone-400 dark:text-stone-500",children:"(Lead)"})]}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 line-clamp-2 mb-2",children:T.description}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex -space-x-1.5",children:O.slice(0,4).map(z=>n.jsx("img",{src:z.avatar,alt:`${z.firstName} ${z.lastName}`,className:"w-5 h-5 rounded-full border border-white dark:border-stone-800 bg-stone-100"},z.id))}),n.jsxs("span",{className:"text-[10px] text-stone-400 dark:text-stone-500",children:[O.length," membre",O.length>1?"s":""]})]})]},T.id)})})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-3",children:"Statistiques"}),n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl p-4 border border-stone-200 dark:border-stone-700",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-stone-50 dark:bg-stone-800 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-[#5B5781] dark:text-[#c8bfd2]",children:e.filter(T=>T.status==="active").length}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Membres actifs"})]}),n.jsxs("div",{className:"text-center p-3 bg-stone-50 dark:bg-stone-800 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-[#AFBD00]",children:A.length}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Projets en cours"})]}),n.jsxs("div",{className:"text-center p-3 bg-stone-50 dark:bg-stone-800 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-stone-700 dark:text-stone-300",children:r.length}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Guildes"})]}),n.jsxs("div",{className:"text-center p-3 bg-stone-50 dark:bg-stone-800 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-stone-700 dark:text-stone-300",children:s.filter(T=>T.status==="shaped").length}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Pitches prêts"})]})]})})]})]})]})]})})}function vj({tasks:e,onToggleTask:t,onAddTask:r}){const s=e.filter(a=>!a.isNiceToHave),o=e.filter(a=>a.isNiceToHave);return n.jsxs("div",{className:"space-y-3",children:[s.length>0&&n.jsx("div",{className:"space-y-1",children:s.map(a=>n.jsxs("label",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-800/50 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:a.completed,onChange:()=>t==null?void 0:t(a.id),className:"mt-0.5 w-4 h-4 rounded border-stone-300 dark:border-stone-600 text-[#5B5781] focus:ring-[#5B5781] cursor-pointer"}),n.jsx("span",{className:`text-sm ${a.completed?"line-through text-stone-400 dark:text-stone-500":"text-stone-700 dark:text-stone-300"}`,children:a.title})]},a.id))}),o.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] uppercase tracking-wide text-stone-400 dark:text-stone-500 font-medium px-2 pt-2",children:"Nice-to-have ~"}),o.map(a=>n.jsxs("label",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-800/50 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:a.completed,onChange:()=>t==null?void 0:t(a.id),className:"mt-0.5 w-4 h-4 rounded border-stone-300 dark:border-stone-600 text-stone-400 focus:ring-stone-400 cursor-pointer"}),n.jsxs("span",{className:`text-sm italic ${a.completed?"line-through text-stone-400 dark:text-stone-500":"text-stone-500 dark:text-stone-400"}`,children:["~ ",a.title]})]},a.id))]}),r&&n.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-2 py-1.5 text-sm text-stone-400 dark:text-stone-500 hover:text-stone-600 dark:hover:text-stone-300 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Ajouter une tâche"]})]})}function yj({scope:e,color:t,isSelected:r,onSelect:s,onToggleTask:o,onAddTask:a}){const i=e.tasks.filter(f=>f.completed).length,l=e.tasks.length,d=l>0?i/l*100:0,u=e.hillPosition<=50?"uphill":"downhill",c=u==="uphill"?"Figuring it out":"Making it happen";return n.jsxs("div",{className:`
        bg-white dark:bg-stone-800/50 rounded-xl border-2 transition-all
        ${r?"border-[#5B5781] shadow-lg":"border-stone-200 dark:border-stone-700 hover:border-stone-300 dark:hover:border-stone-600"}
      `,children:[n.jsxs("button",{onClick:s,className:"w-full text-left p-4 focus:outline-none",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[n.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:t}}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 truncate",children:e.name}),n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 line-clamp-2 mt-0.5",children:e.description})]})]}),n.jsxs("div",{className:"text-right flex-shrink-0",children:[n.jsxs("p",{className:"text-lg font-bold text-stone-800 dark:text-stone-100",children:[i,"/",l]}),n.jsx("p",{className:"text-[10px] text-stone-400 dark:text-stone-500",children:"tâches"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsx("div",{className:"h-1.5 bg-stone-100 dark:bg-stone-700 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${d}%`,backgroundColor:t}})})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("span",{className:`
              inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-medium
              ${u==="uphill"?"bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-300":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300"}
            `,children:[n.jsx("span",{children:u==="uphill"?"⛰️":"🏃"}),c]}),n.jsxs("span",{className:"text-xs text-stone-400 dark:text-stone-500",children:["Position: ",e.hillPosition,"%"]})]})]}),r&&n.jsx("div",{className:"border-t border-stone-200 dark:border-stone-700 p-4",children:n.jsx(vj,{tasks:e.tasks,onToggleTask:o,onAddTask:a})})]})}function bj(e){return new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}function jj({items:e,members:t,onMoveToScope:r,onDelete:s,onAdd:o}){const a=i=>t.find(l=>l.id===i);return n.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800/50 overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-3 bg-amber-100/50 dark:bg-amber-900/30 border-b border-amber-200 dark:border-amber-800/50",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:"🍲"}),n.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Chowder"}),n.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400 bg-amber-200/50 dark:bg-amber-800/50 px-1.5 py-0.5 rounded-full",children:e.length})]}),o&&n.jsx("button",{onClick:o,className:"text-xs text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100 font-medium transition-colors",children:"+ Ajouter"})]}),n.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"Tâches découvertes en cours de route, pas encore assignées à un scope"})]}),n.jsx("div",{className:"p-2",children:e.length===0?n.jsx("p",{className:"text-sm text-amber-600/70 dark:text-amber-400/70 text-center py-4",children:"Aucune tâche dans le chowder"}):n.jsx("div",{className:"space-y-1",children:e.map(i=>{const l=a(i.createdBy);return n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 rounded-lg bg-white/50 dark:bg-stone-800/30 hover:bg-white dark:hover:bg-stone-800/50 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx("span",{className:"text-amber-500",children:"•"}),n.jsx("span",{className:"text-sm text-stone-700 dark:text-stone-300 truncate",children:i.title})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l&&n.jsx("img",{src:l.avatar,alt:l.firstName,className:"w-5 h-5 rounded-full opacity-60",title:`Ajouté par ${l.firstName} ${l.lastName}`}),n.jsx("span",{className:"text-[10px] text-stone-400 dark:text-stone-500",children:bj(i.createdAt)}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r&&n.jsx("button",{onClick:()=>r(i.id),className:"p-1 text-stone-400 hover:text-[#5B5781] transition-colors",title:"Déplacer vers un scope",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),s&&n.jsx("button",{onClick:()=>s(i.id),className:"p-1 text-stone-400 hover:text-red-500 transition-colors",title:"Supprimer",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]},i.id)})})})]})}const A0=["#8b5cf6","#f59e0b","#10b981","#f43f5e","#0ea5e9"];function kj({pitches:e,bets:t,scopes:r,chowderItems:s,members:o,cycles:a,hillChartSnapshots:i,onUpdateHillPosition:l,onToggleTask:d,onAddTask:u,onCreateScope:c,onAddChowderItem:f,onMoveChowderToScope:p,onDeleteChowderItem:w,onViewHistory:m}){var O;const h=t.filter(B=>B.status==="in_progress").map(B=>{const z=e.find(L=>L.id===B.pitchId),J=a.find(L=>L.id===B.cycleId);return z?{pitch:z,bet:B,cycle:J}:null}).filter(Boolean),[y,g]=E.useState(((O=h[0])==null?void 0:O.pitch.id)||null),[j,v]=E.useState(null),N=h.find(B=>B.pitch.id===y),S=N==null?void 0:N.pitch,A=N==null?void 0:N.bet,D=N==null?void 0:N.cycle,R=r.filter(B=>B.pitchId===y),P=s.filter(B=>B.pitchId===y),I=(A==null?void 0:A.teamMemberIds.map(B=>o.find(z=>z.id===B)).filter(Boolean))||[],W=(()=>{if(!D)return null;const B=new Date,J=new Date(D.endDate).getTime()-B.getTime();return Math.max(0,Math.ceil(J/(1e3*60*60*24)))})();return h.length===0?n.jsx("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md px-4",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🏗️"}),n.jsx("h2",{className:"text-xl font-semibold text-stone-800 dark:text-stone-100 mb-2",children:"Aucun projet en construction"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Les projets apparaîtront ici une fois qu'ils auront été sélectionnés lors d'une Betting Table."})]})}):n.jsx("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-stone-800 dark:text-stone-100",children:"Building Track"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:"Suivez l'avancement des projets en construction"})]}),h.length>1&&n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:y||"",onChange:B=>{g(B.target.value),v(null)},className:"appearance-none bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-lg px-4 py-2 pr-10 text-sm font-medium text-stone-700 dark:text-stone-300 hover:border-stone-300 dark:hover:border-stone-600 focus:outline-none focus:ring-2 focus:ring-[#5B5781] focus:border-transparent cursor-pointer min-w-[200px]",children:h.map(({pitch:B,cycle:z})=>n.jsx("option",{value:B.id,children:B.title},B.id))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),n.jsx("span",{className:"absolute -top-2 -right-2 bg-[#5B5781] text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:h.length})]})]})}),S&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-800 dark:text-stone-100",children:S.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#5B5781]/10 text-[#5B5781] dark:bg-[#5B5781]/30 dark:text-[#c8bfd2]",children:S.appetite}),D&&n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:D.name})]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Équipe:"}),n.jsx("div",{className:"flex -space-x-2",children:I.map(B=>n.jsx("img",{src:B.avatar,alt:`${B.firstName} ${B.lastName}`,title:`${B.firstName} ${B.lastName}`,className:"w-8 h-8 rounded-full border-2 border-white dark:border-stone-800 bg-stone-100"},B.id))})]}),W!==null&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:`text-2xl font-bold ${W<=7?"text-red-500":"text-stone-800 dark:text-stone-100"}`,children:W}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"jours restants"})]}),m&&n.jsxs("button",{onClick:()=>m(S.id),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-200 border border-stone-200 dark:border-stone-700 rounded-lg hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Historique"]})]})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100",children:"Hill Chart"}),n.jsx("p",{className:"text-xs text-stone-400 dark:text-stone-500",children:"Cliquez sur un point pour voir le scope"})]}),n.jsx(bf,{scopes:R,pitchTitle:S.title,onViewScope:B=>v(B===j?null:B),onUpdatePosition:l})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100",children:"Scopes"}),c&&n.jsx("button",{onClick:()=>c(S.id),className:"text-sm text-[#5B5781] hover:text-[#4a4670] dark:text-[#c8bfd2] dark:hover:text-white font-medium transition-colors",children:"+ Nouveau scope"})]}),R.length===0?n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 p-8 text-center",children:n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Aucun scope défini. Créez des scopes pour organiser le travail."})}):n.jsx("div",{className:"space-y-4",children:R.map((B,z)=>n.jsx(yj,{scope:B,color:A0[z%A0.length],isSelected:j===B.id,onSelect:()=>v(B.id===j?null:B.id),onToggleTask:J=>d==null?void 0:d(B.id,J),onAddTask:()=>u==null?void 0:u(B.id)},B.id))})]}),n.jsx(jj,{items:P,members:o,onMoveToScope:B=>p==null?void 0:p(B,""),onDelete:w,onAdd:()=>f==null?void 0:f(S.id)})]})]})]})})}const wj={"2-weeks":{label:"2 semaines",color:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300"},"3-weeks":{label:"3 semaines",color:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"},"6-weeks":{label:"6 semaines",color:"bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-300"}},P0={raw:{label:"Brouillon",color:"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300",icon:"📝"},shaped:{label:"Cadré",color:"bg-[#AFBD00]/20 text-[#7a8200] dark:bg-[#AFBD00]/30 dark:text-[#AFBD00]",icon:"✅"},betting:{label:"En évaluation",color:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",icon:"🎲"},building:{label:"En construction",color:"bg-[#5B5781]/20 text-[#5B5781] dark:bg-[#5B5781]/30 dark:text-[#c8bfd2]",icon:"🏗️"},completed:{label:"Terminé",color:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",icon:"🎉"},cancelled:{label:"Annulé",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",icon:"❌"}};function T0({pitch:e,author:t,onView:r,onEdit:s,onDelete:o,showActions:a=!1,compact:i=!1}){const l=wj[e.appetite],d=P0[e.status]||P0.raw;return e.problem&&e.solution&&e.rabbitHoles.length>0&&e.noGos.length>0&&(e.breadboard||e.fatMarkerSketch),i?n.jsx("div",{onClick:r,className:"bg-white dark:bg-stone-800/50 rounded-lg border border-stone-200 dark:border-stone-700 p-3 hover:border-stone-300 dark:hover:border-stone-600 transition-all cursor-pointer",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-lg",children:d.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-stone-800 dark:text-stone-100 truncate",children:e.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${l.color}`,children:l.label}),t&&n.jsx("span",{className:"text-xs text-stone-400 dark:text-stone-500",children:t.firstName})]})]})]})}):n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 overflow-hidden hover:border-stone-300 dark:hover:border-stone-600 transition-all",children:[n.jsxs("div",{className:"p-4 border-b border-stone-100 dark:border-stone-700/50",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsx("button",{onClick:r,className:"flex-1 text-left hover:opacity-80 transition-opacity",children:n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 line-clamp-2",children:e.title})}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${l.color}`,children:l.label}),n.jsxs("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${d.color}`,children:[d.icon," ",d.label]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[t&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:t.avatar,alt:`${t.firstName} ${t.lastName}`,className:"w-6 h-6 rounded-full bg-stone-100"}),n.jsxs("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:[t.firstName," ",t.lastName]}),n.jsx("span",{className:"text-stone-300 dark:text-stone-600",children:"•"})]}),n.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-500",children:new Date(e.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})})]})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-1",children:"Problème"}),n.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-300 line-clamp-3",children:e.problem||n.jsx("span",{className:"text-stone-400 dark:text-stone-500 italic",children:"Non défini"})})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[{key:"problem",label:"Problem",filled:!!e.problem},{key:"appetite",label:"Appetite",filled:!!e.appetite},{key:"solution",label:"Solution",filled:!!e.solution},{key:"rabbitHoles",label:"Rabbit Holes",filled:e.rabbitHoles.length>0},{key:"noGos",label:"No-Gos",filled:e.noGos.length>0}].map(u=>n.jsxs("div",{className:`
                flex flex-col items-center p-2 rounded-lg text-center
                ${u.filled?"bg-[#AFBD00]/10 text-[#7a8200] dark:bg-[#AFBD00]/20 dark:text-[#AFBD00]":"bg-stone-50 text-stone-400 dark:bg-stone-800 dark:text-stone-500"}
              `,children:[n.jsx("span",{className:"text-lg mb-0.5",children:u.filled?"✓":"○"}),n.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wider",children:u.label})]},u.key))}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:`
              flex items-center gap-1.5 px-2 py-1 rounded text-xs
              ${e.breadboard?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"bg-stone-50 text-stone-400 dark:bg-stone-800 dark:text-stone-500"}
            `,children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Breadboard"]}),n.jsxs("div",{className:`
              flex items-center gap-1.5 px-2 py-1 rounded text-xs
              ${e.fatMarkerSketch?"bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400":"bg-stone-50 text-stone-400 dark:bg-stone-800 dark:text-stone-500"}
            `,children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Fat Marker"]})]})]}),a&&n.jsxs("div",{className:"px-4 py-3 bg-stone-50 dark:bg-stone-800/30 border-t border-stone-100 dark:border-stone-700/50 flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-stone-600 dark:text-stone-300 hover:text-stone-800 dark:hover:text-white hover:bg-stone-100 dark:hover:bg-stone-700 rounded-lg transition-colors",children:"Voir détails"}),s&&e.status!=="building"&&e.status!=="completed"&&n.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm text-[#5B5781] dark:text-[#c8bfd2] font-medium hover:bg-[#5B5781]/10 rounded-lg transition-colors",children:"Modifier"}),o&&e.status==="raw"&&n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Supprimer"})]})]})}const Cl={"2-weeks":{label:"2 semaines",weeks:2,color:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300"},"3-weeks":{label:"3 semaines",weeks:3,color:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"},"6-weeks":{label:"6 semaines",weeks:6,color:"bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-300"}};function Nj({pitches:e,bets:t,members:r,cycles:s,currentMemberId:o,isCooldown:a,onPlaceBet:i,onRemoveBet:l,onViewPitch:d}){const[u,c]=E.useState(null),[f,p]=E.useState([]),w=s.find(A=>A.status==="active"||A.status==="cooldown"),m=e.filter(A=>A.status==="shaped"||A.status==="betting"),x=t.filter(A=>A.cycleId===(w==null?void 0:w.id)),h=x.reduce((A,D)=>{var P;const R=e.find(I=>I.id===D.pitchId);return R?A+(((P=Cl[R.appetite])==null?void 0:P.weeks)||0):A},0),y=r.filter(A=>A.status==="active"),g=r.find(A=>A.id===o),j=g==null?void 0:g.isAdmin,v=A=>{p(D=>D.includes(A)?D.filter(R=>R!==A):[...D,A])},N=()=>{u&&f.length>0&&(i==null||i(u,f),c(null),p([]))},S=()=>{c(null),p([])};return a?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-medium text-stone-800 dark:text-stone-100",children:"Capacité du cycle"}),n.jsxs("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:[h," / 6 semaines utilisées"]})]}),n.jsx("div",{className:"h-2 bg-stone-100 dark:bg-stone-700 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${h>6?"bg-red-500":h===6?"bg-[#AFBD00]":"bg-[#5B5781]"}`,style:{width:`${Math.min(h/6*100,100)}%`}})}),h>6&&n.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:"⚠️ La capacité dépasse 6 semaines. Retirez des projets ou réduisez les appetites."})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 mb-4",children:"Pitches disponibles"}),m.length===0?n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-dashed border-stone-300 dark:border-stone-600 p-8 text-center",children:n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm",children:"Aucun pitch prêt pour le betting"})}):n.jsx("div",{className:"space-y-3",children:m.map(A=>{const D=r.find(T=>T.id===A.authorId),R=Cl[A.appetite],P=x.some(T=>T.pitchId===A.id),I=u===A.id;return n.jsxs("div",{className:`
                      bg-white dark:bg-stone-800/50 rounded-xl border-2 transition-all
                      ${I?"border-[#5B5781] shadow-lg":P?"border-[#AFBD00]/50 opacity-60":"border-stone-200 dark:border-stone-700 hover:border-stone-300 dark:hover:border-stone-600"}
                    `,children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("button",{onClick:()=>d==null?void 0:d(A.id),className:"text-left hover:opacity-80 transition-opacity",children:[n.jsx("h4",{className:"font-semibold text-stone-800 dark:text-stone-100",children:A.title}),n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 line-clamp-2 mt-1",children:A.problem})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium flex-shrink-0 ${R.color}`,children:R.label})]}),n.jsx("div",{className:"flex items-center gap-2 mt-3",children:D&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:D.avatar,alt:D.firstName,className:"w-5 h-5 rounded-full bg-stone-100"}),n.jsxs("span",{className:"text-xs text-stone-400 dark:text-stone-500",children:[D.firstName," ",D.lastName]})]})}),n.jsx("div",{className:"mt-4 flex items-center gap-2",children:P?n.jsx("span",{className:"text-sm text-[#AFBD00] font-medium",children:"✓ Pari placé"}):I?n.jsx("button",{onClick:S,className:"px-3 py-1.5 text-sm text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700 rounded-lg transition-colors",children:"Annuler"}):n.jsx("button",{onClick:()=>c(A.id),className:"px-3 py-1.5 text-sm bg-[#5B5781] hover:bg-[#4a4670] text-white rounded-lg font-medium transition-colors",children:"Parier sur ce pitch"})})]}),I&&n.jsxs("div",{className:"border-t border-stone-200 dark:border-stone-700 p-4 bg-stone-50 dark:bg-stone-800/50 rounded-b-xl",children:[n.jsx("h5",{className:"text-sm font-medium text-stone-700 dark:text-stone-300 mb-3",children:"Sélectionner l'équipe"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:y.map(T=>{const W=f.includes(T.id);return n.jsxs("button",{onClick:()=>v(T.id),className:`
                                  flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all
                                  ${W?"bg-[#5B5781] text-white":"bg-white dark:bg-stone-700 text-stone-600 dark:text-stone-300 border border-stone-200 dark:border-stone-600 hover:border-[#5B5781]"}
                                `,children:[n.jsx("img",{src:T.avatar,alt:T.firstName,className:"w-5 h-5 rounded-full bg-stone-100"}),T.firstName,W&&n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},T.id)})}),n.jsx("button",{onClick:N,disabled:f.length===0,className:`
                            w-full px-4 py-2 rounded-lg font-medium transition-colors
                            ${f.length>0?"bg-[#AFBD00] hover:bg-[#9aaa00] text-white":"bg-stone-200 dark:bg-stone-700 text-stone-400 dark:text-stone-500 cursor-not-allowed"}
                          `,children:f.length>0?`Confirmer le pari (${f.length} membre${f.length>1?"s":""})`:"Sélectionnez au moins 1 membre"})]})]},A.id)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 mb-4",children:"Paris du cycle"}),x.length===0?n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-dashed border-stone-300 dark:border-stone-600 p-8 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:"🎲"}),n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm",children:"Aucun pari placé pour ce cycle"})]}):n.jsx("div",{className:"space-y-3",children:x.map(A=>{const D=e.find(T=>T.id===A.pitchId);if(!D)return null;const R=Cl[D.appetite],P=A.teamMemberIds.map(T=>r.find(W=>W.id===T)).filter(Boolean),I=r.find(T=>T.id===A.placedBy);return n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-[#AFBD00]/30 dark:border-[#AFBD00]/20 overflow-hidden",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsx("button",{onClick:()=>d==null?void 0:d(D.id),className:"text-left hover:opacity-80 transition-opacity",children:n.jsx("h4",{className:"font-semibold text-stone-800 dark:text-stone-100",children:D.title})}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium flex-shrink-0 ${R.color}`,children:R.label})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[n.jsx("span",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Équipe:"}),n.jsx("div",{className:"flex -space-x-2",children:P.map(T=>n.jsx("img",{src:T.avatar,alt:`${T.firstName} ${T.lastName}`,title:`${T.firstName} ${T.lastName}`,className:"w-6 h-6 rounded-full border-2 border-white dark:border-stone-800 bg-stone-100"},T.id))})]}),n.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-stone-400 dark:text-stone-500",children:[n.jsxs("span",{children:["Pari placé par ",I==null?void 0:I.firstName," le"," ",new Date(A.placedAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]}),j&&l&&n.jsx("button",{onClick:()=>l(A.id),className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 font-medium",children:"Retirer"})]})]})},A.id)})})]})]})]}):n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 p-8 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:"⏳"}),n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 mb-2",children:"Betting non disponible"}),n.jsxs("p",{className:"text-stone-500 dark:text-stone-400 text-sm max-w-md mx-auto",children:["Le betting s'ouvre pendant la période de cooldown, entre deux cycles de construction.",w&&n.jsxs("span",{className:"block mt-2",children:["Prochain cooldown:"," ",n.jsx("span",{className:"font-medium text-stone-700 dark:text-stone-300",children:new Date(w.cooldownStart).toLocaleDateString("fr-FR",{day:"numeric",month:"long"})})]})]})]})}const aa={Requests:{icon:"💬",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20"},Bugs:{icon:"🐛",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20"},Ideas:{icon:"💡",color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-900/20"}};function Sj({ideaLists:e,onAddIdea:t,onVoteIdea:r}){var w;const[s,o]=E.useState(((w=e[0])==null?void 0:w.id)||null),[a,i]=E.useState(""),[l,d]=E.useState(!1),u=e.find(m=>m.id===s),c=u?aa[u.name]||aa.Ideas:null,f=m=>{m.preventDefault(),s&&a.trim()&&(t==null||t(s,a.trim()),i(""),d(!1))},p=[...(u==null?void 0:u.items)||[]].sort((m,x)=>x.votes-m.votes);return n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 overflow-hidden",children:[n.jsx("div",{className:"flex border-b border-stone-200 dark:border-stone-700",children:e.map(m=>{const x=aa[m.name]||aa.Ideas,h=m.id===s;return n.jsxs("button",{onClick:()=>o(m.id),className:`
                relative flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-all
                ${h?"text-stone-800 dark:text-stone-100":"text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-800"}
              `,children:[n.jsx("span",{children:x.icon}),n.jsx("span",{className:"hidden sm:inline",children:m.name}),n.jsx("span",{className:`
                  min-w-[20px] h-5 px-1.5 flex items-center justify-center text-xs font-bold rounded-full
                  ${h?x.bgColor+" "+x.color:"bg-stone-100 dark:bg-stone-700 text-stone-500 dark:text-stone-400"}
                `,children:m.items.length}),h&&n.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-stone-800 dark:bg-stone-100"})]},m.id)})}),n.jsx("div",{className:"p-4",children:u&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mb-4",children:u.description}),l?n.jsx("form",{onSubmit:f,className:"mb-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:a,onChange:m=>i(m.target.value),placeholder:"Décrivez votre idée...",autoFocus:!0,className:"flex-1 px-3 py-2 bg-white dark:bg-stone-700 border border-stone-200 dark:border-stone-600 rounded-lg text-sm text-stone-800 dark:text-stone-100 placeholder:text-stone-400 dark:placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-[#5B5781] focus:border-transparent"}),n.jsx("button",{type:"submit",disabled:!a.trim(),className:`
                      px-4 py-2 rounded-lg text-sm font-medium transition-colors
                      ${a.trim()?"bg-[#5B5781] hover:bg-[#4a4670] text-white":"bg-stone-200 dark:bg-stone-700 text-stone-400 dark:text-stone-500 cursor-not-allowed"}
                    `,children:"Ajouter"}),n.jsx("button",{type:"button",onClick:()=>{d(!1),i("")},className:"px-3 py-2 text-sm text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-300 transition-colors",children:"Annuler"})]})}):n.jsx("button",{onClick:()=>d(!0),className:"w-full mb-4 px-4 py-2.5 border-2 border-dashed border-stone-200 dark:border-stone-700 rounded-lg text-sm text-stone-500 dark:text-stone-400 hover:border-stone-300 dark:hover:border-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors",children:"+ Ajouter une idée"}),p.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-3xl mb-2",children:c==null?void 0:c.icon}),n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm",children:"Aucune idée dans cette liste"})]}):n.jsx("div",{className:"space-y-2",children:p.map((m,x)=>n.jsxs("div",{className:`
                      flex items-start gap-3 p-3 rounded-lg transition-colors
                      ${x===0&&m.votes>0?c==null?void 0:c.bgColor:"hover:bg-stone-50 dark:hover:bg-stone-800"}
                    `,children:[n.jsxs("button",{onClick:()=>r==null?void 0:r(u.id,m.id),className:`
                        flex flex-col items-center justify-center min-w-[44px] py-1.5 rounded-lg transition-all
                        ${m.votes>0?"bg-[#5B5781]/10 hover:bg-[#5B5781]/20 text-[#5B5781] dark:bg-[#5B5781]/30 dark:hover:bg-[#5B5781]/40 dark:text-[#c8bfd2]":"bg-stone-100 hover:bg-stone-200 text-stone-500 dark:bg-stone-700 dark:hover:bg-stone-600 dark:text-stone-400"}
                      `,children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),n.jsx("span",{className:"text-xs font-bold",children:m.votes})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm ${x===0&&m.votes>0?"font-medium text-stone-800 dark:text-stone-100":"text-stone-600 dark:text-stone-300"}`,children:m.title}),n.jsx("p",{className:"text-xs text-stone-400 dark:text-stone-500 mt-1",children:new Date(m.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})})]}),x===0&&m.votes>0&&n.jsx("span",{className:"text-lg",title:"Idée la plus votée",children:"🏆"})]},m.id))})]})})]})}const B0=[{id:"shaping",label:"Shaping",emoji:"🎨",description:"Définir et affiner les pitches"},{id:"betting",label:"Betting",emoji:"🎲",description:"Parier sur les projets du cycle"},{id:"building",label:"Building",emoji:"🏗️",description:"Suivre la construction des projets"}];function Cj({members:e,cycles:t,pitches:r,bets:s,scopes:o,chowderItems:a,ideaLists:i,hillChartSnapshots:l,currentMemberId:d,onCreatePitch:u,onViewPitch:c,onEditPitch:f,onDeletePitch:p,onPlaceBet:w,onRemoveBet:m,onUpdateHillPosition:x,onToggleTask:h,onAddTask:y,onCreateScope:g,onAddChowderItem:j,onMoveChowderToScope:v,onDeleteChowderItem:N,onViewHistory:S,onAddIdea:A,onVoteIdea:D}){var q;const[R,P]=E.useState("building"),I=t.find(k=>k.status==="active"||k.status==="cooldown"),T=(I==null?void 0:I.status)==="cooldown",W=e.find(k=>k.id===d),O=W==null?void 0:W.roles.includes("shaper"),B=r.filter(k=>k.status==="raw");r.filter(k=>k.status==="shaped");const z=r.filter(k=>k.status==="betting"),J=r.filter(k=>k.status==="building"),V=(()=>{if(!I||I.status!=="cooldown")return null;const k=new Date,K=new Date(I.cooldownEnd).getTime()-k.getTime();return Math.max(0,Math.ceil(K/(1e3*60*60*24)))})();return n.jsx("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-stone-800 dark:text-stone-100",children:"Shape Up"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:I?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-medium",children:I.name}),T&&n.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",children:"Cooldown"})]}):"Aucun cycle actif"})]}),I&&n.jsx("div",{className:"flex items-center gap-4",children:T&&V!==null&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:V}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"jours avant betting"})]})})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"border-b border-stone-200 dark:border-stone-700",children:n.jsx("nav",{className:"flex gap-1 -mb-px","aria-label":"Tabs",children:B0.map(k=>{const b=R===k.id;return n.jsxs("button",{onClick:()=>P(k.id),className:`
                      relative group flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all
                      ${b?"text-[#5B5781] dark:text-[#c8bfd2]":"text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-300"}
                    `,children:[n.jsx("span",{className:"text-lg",children:k.emoji}),n.jsx("span",{className:"hidden sm:inline",children:k.label}),n.jsx("span",{className:`
                        absolute bottom-0 left-0 right-0 h-0.5 transition-all
                        ${b?"bg-[#5B5781] dark:bg-[#c8bfd2]":"bg-transparent group-hover:bg-stone-200 dark:group-hover:bg-stone-700"}
                      `}),k.id==="shaping"&&B.length>0&&n.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 flex items-center justify-center text-[10px] font-bold text-white bg-stone-400 rounded-full",children:B.length}),k.id==="betting"&&z.length>0&&T&&n.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 flex items-center justify-center text-[10px] font-bold text-white bg-amber-500 rounded-full",children:z.length}),k.id==="building"&&J.length>0&&n.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 flex items-center justify-center text-[10px] font-bold text-white bg-[#5B5781] rounded-full",children:J.length})]},k.id)})})}),n.jsx("p",{className:"mt-3 text-sm text-stone-500 dark:text-stone-400",children:(q=B0.find(k=>k.id===R))==null?void 0:q.description})]}),n.jsxs("div",{className:"mt-6",children:[R==="shaping"&&n.jsx(_j,{pitches:r,members:e,ideaLists:i,currentMemberId:d,isShaper:O||!1,onCreatePitch:u,onViewPitch:c,onEditPitch:f,onDeletePitch:p,onAddIdea:A,onVoteIdea:D}),R==="betting"&&n.jsx(Nj,{pitches:r,bets:s,members:e,cycles:t,currentMemberId:d,isCooldown:T||!1,onPlaceBet:w,onRemoveBet:m,onViewPitch:c}),R==="building"&&n.jsx(kj,{pitches:r,bets:s,scopes:o,chowderItems:a,members:e,cycles:t,hillChartSnapshots:l,onUpdateHillPosition:x,onToggleTask:h,onAddTask:y,onCreateScope:g,onAddChowderItem:j,onMoveChowderToScope:v,onDeleteChowderItem:N,onViewHistory:S})]})]})})}function _j({pitches:e,members:t,ideaLists:r,currentMemberId:s,isShaper:o,onCreatePitch:a,onViewPitch:i,onEditPitch:l,onDeletePitch:d,onAddIdea:u,onVoteIdea:c}){const f=e.filter(w=>w.status==="raw"),p=e.filter(w=>w.status==="shaped");return n.jsxs("div",{className:"space-y-8",children:[o&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:a,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#5B5781] hover:bg-[#4a4670] text-white rounded-lg font-medium transition-colors shadow-sm",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouveau pitch"]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100",children:"Brouillons"}),n.jsx("span",{className:"inline-flex items-center justify-center min-w-[24px] h-6 px-2 text-xs font-bold bg-stone-200 dark:bg-stone-700 text-stone-600 dark:text-stone-300 rounded-full",children:f.length})]}),f.length===0?n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-dashed border-stone-300 dark:border-stone-600 p-8 text-center",children:[n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm",children:"Aucun brouillon en cours"}),n.jsx("button",{onClick:a,className:"mt-3 text-sm text-[#5B5781] dark:text-[#c8bfd2] font-medium hover:underline",children:"Créer un premier pitch"})]}):n.jsx("div",{className:"space-y-3",children:f.map(w=>n.jsx(T0,{pitch:w,author:t.find(m=>m.id===w.authorId),onView:()=>i==null?void 0:i(w.id),onEdit:()=>l==null?void 0:l(w.id),onDelete:()=>d==null?void 0:d(w.id),showActions:!0},w.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100",children:"Prêts pour le betting"}),n.jsx("span",{className:"inline-flex items-center justify-center min-w-[24px] h-6 px-2 text-xs font-bold bg-[#AFBD00]/20 text-[#7a8200] dark:bg-[#AFBD00]/30 dark:text-[#AFBD00] rounded-full",children:p.length})]}),p.length===0?n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-dashed border-stone-300 dark:border-stone-600 p-8 text-center",children:n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm",children:"Aucun pitch prêt"})}):n.jsx("div",{className:"space-y-3",children:p.map(w=>n.jsx(T0,{pitch:w,author:t.find(m=>m.id===w.authorId),onView:()=>i==null?void 0:i(w.id),onEdit:()=>l==null?void 0:l(w.id),showActions:!0},w.id))})]})]})]}),!o&&n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 p-8 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:"🔒"}),n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 mb-2",children:"Espace réservé aux Shapers"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 text-sm max-w-md mx-auto",children:"Le Shaping est géré par les membres avec le rôle Shaper. Consultez les listes d'idées ci-dessous pour proposer des améliorations."})]}),n.jsxs("div",{className:"border-t border-stone-200 dark:border-stone-700 pt-8",children:[n.jsx("h3",{className:"font-semibold text-stone-800 dark:text-stone-100 mb-4",children:"Listes d'idées"}),n.jsx(Sj,{ideaLists:r,onAddIdea:u,onVoteIdea:c})]})]})}const Fa={project_meeting:{label:"Réunion projet",icon:"📋",color:"text-blue-700 dark:text-blue-300",bgColor:"bg-blue-100 dark:bg-blue-900/40"},stakeholder_meeting:{label:"Réunion porteurs",icon:"👥",color:"text-violet-700 dark:text-violet-300",bgColor:"bg-violet-100 dark:bg-violet-900/40"},design_day:{label:"Design Day",icon:"🎨",color:"text-[#7a8200] dark:text-[#AFBD00]",bgColor:"bg-[#AFBD00]/20 dark:bg-[#AFBD00]/30"},guild_meeting:{label:"Réunion guilde",icon:"⚙️",color:"text-stone-700 dark:text-stone-300",bgColor:"bg-stone-100 dark:bg-stone-700"},betting:{label:"Betting Table",icon:"🎲",color:"text-amber-700 dark:text-amber-300",bgColor:"bg-amber-100 dark:bg-amber-900/40"},semisto_day:{label:"Semisto Day",icon:"🌳",color:"text-emerald-700 dark:text-emerald-300",bgColor:"bg-emerald-100 dark:bg-emerald-900/40"},semos_fest:{label:"Semos Fest",icon:"🎉",color:"text-pink-700 dark:text-pink-300",bgColor:"bg-pink-100 dark:bg-pink-900/40"},training:{label:"Formation",icon:"📚",color:"text-orange-700 dark:text-orange-300",bgColor:"bg-orange-100 dark:bg-orange-900/40"}},Ej=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],Dj=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],ur=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];function Aj(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-s.getTime())/864e5+1)/7)}function Pj(e){const t=new Date(e),r=t.getDay(),s=t.getDate()-r+(r===0?-6:1);return t.setDate(s),t.setHours(0,0,0,0),t}function Tj({events:e,cycles:t,members:r,currentMemberId:s,onCreateEvent:o,onViewEvent:a,onEditEvent:i,onDeleteEvent:l}){const[d,u]=E.useState(new Date),[c,f]=E.useState("month"),[p,w]=E.useState(null),[m,x]=E.useState([]);r.find(L=>L.id===s);const{firstDay:h,lastDay:y,daysInMonth:g,startOffset:j}=E.useMemo(()=>{const L=d.getFullYear(),V=d.getMonth(),q=new Date(L,V,1),k=new Date(L,V+1,0);let b=q.getDay()-1;return b<0&&(b=6),{firstDay:q,lastDay:k,daysInMonth:k.getDate(),startOffset:b}},[d]),v=E.useMemo(()=>{const L=Pj(d),V=[];for(let q=0;q<7;q++){const k=new Date(L);k.setDate(L.getDate()+q),V.push(k)}return V},[d]),N=L=>{for(const V of t){const q=new Date(V.startDate),k=new Date(V.endDate),b=new Date(V.cooldownStart),K=new Date(V.cooldownEnd);q.setHours(0,0,0,0),k.setHours(23,59,59,999),b.setHours(0,0,0,0),K.setHours(23,59,59,999);const re=new Date(L);if(re.setHours(12,0,0,0),re>=q&&re<=k)return"work";if(re>=b&&re<=K)return"cooldown"}return null},S=L=>{const V=new Date(L);V.setHours(0,0,0,0);const q=[];for(const k of e){if(m.length>0&&!m.includes(k.type))continue;const b=new Date(k.startDate),K=new Date(k.endDate),re=new Date(b);re.setHours(0,0,0,0);const ee=new Date(K);ee.setHours(0,0,0,0),re.getTime()===ee.getTime()&&V.getTime()===re.getTime()&&q.push({event:k,isMultiDay:!1})}return q},A=L=>{const V=new Date(L[0]);V.setHours(0,0,0,0);const q=new Date(L[6]);q.setHours(23,59,59,999);const k=[];for(const b of e){if(m.length>0&&!m.includes(b.type))continue;const K=new Date(b.startDate),re=new Date(b.endDate),ee=new Date(K);ee.setHours(0,0,0,0);const $=new Date(re);if($.setHours(0,0,0,0),!(ee.getTime()!==$.getTime()))continue;const ce=new Date($);if(ce.setHours(23,59,59,999),ce<V||ee>q)continue;let xe=-1,Pe=-1;for(let pe=0;pe<L.length;pe++){const Ge=new Date(L[pe]);Ge.setHours(0,0,0,0),Ge>=ee&&Ge<=$&&(xe===-1&&(xe=pe),Pe=pe)}xe!==-1&&k.push({event:b,isMultiDay:!0,startCol:xe,endCol:Pe,spanDays:Pe-xe+1,continuesFromPrevWeek:ee<V,continuesToNextWeek:$>q})}return k.sort((b,K)=>b.startCol!==K.startCol?b.startCol-K.startCol:K.spanDays-b.spanDays)},D=()=>{u(new Date(d.getFullYear(),d.getMonth()-1,1))},R=()=>{u(new Date(d.getFullYear(),d.getMonth()+1,1))},P=()=>{const L=new Date(d);L.setDate(d.getDate()-7),u(L)},I=()=>{const L=new Date(d);L.setDate(d.getDate()+7),u(L)},T=()=>{u(new Date)},W=L=>{x(V=>V.includes(L)?V.filter(q=>q!==L):[...V,L])},O=p?e.find(L=>L.id===p):null,B=E.useMemo(()=>{const L=[],V=new Date(d.getFullYear(),d.getMonth(),0);for(let k=j-1;k>=0;k--)L.push({date:new Date(V.getFullYear(),V.getMonth(),V.getDate()-k),isCurrentMonth:!1});for(let k=1;k<=g;k++)L.push({date:new Date(d.getFullYear(),d.getMonth(),k),isCurrentMonth:!0});const q=42-L.length;for(let k=1;k<=q;k++)L.push({date:new Date(d.getFullYear(),d.getMonth()+1,k),isCurrentMonth:!1});return L},[d,g,j]),z=L=>{const V=new Date;return L.getDate()===V.getDate()&&L.getMonth()===V.getMonth()&&L.getFullYear()===V.getFullYear()},J=E.useMemo(()=>{const L=v[0],V=v[6],q=L.getMonth()===V.getMonth(),k=L.getFullYear()===V.getFullYear();return q&&k?`${L.getDate()} - ${V.getDate()} ${ur[L.getMonth()]} ${L.getFullYear()}`:k?`${L.getDate()} ${ur[L.getMonth()]} - ${V.getDate()} ${ur[V.getMonth()]} ${L.getFullYear()}`:`${L.getDate()} ${ur[L.getMonth()]} ${L.getFullYear()} - ${V.getDate()} ${ur[V.getMonth()]} ${V.getFullYear()}`},[v]);return n.jsx("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-stone-800 dark:text-stone-100",children:"Calendrier"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:"Cycles, réunions et événements du Lab"})]}),n.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#5B5781] hover:bg-[#4a4670] text-white rounded-lg font-medium transition-colors shadow-sm",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouvel événement"]})]}),n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700 overflow-hidden",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border-b border-stone-200 dark:border-stone-700 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:c==="month"?D:P,className:"p-2 rounded-lg text-stone-500 hover:text-stone-700 hover:bg-stone-100 dark:text-stone-400 dark:hover:text-stone-200 dark:hover:bg-stone-700 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("button",{onClick:c==="month"?R:I,className:"p-2 rounded-lg text-stone-500 hover:text-stone-700 hover:bg-stone-100 dark:text-stone-400 dark:hover:text-stone-200 dark:hover:bg-stone-700 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),n.jsx("h2",{className:"text-lg font-semibold text-stone-800 dark:text-stone-100 ml-2",children:c==="month"?`${ur[d.getMonth()]} ${d.getFullYear()}`:`Semaine ${Aj(d)}`}),c==="week"&&n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400 ml-2 hidden md:inline",children:J})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex bg-stone-100 dark:bg-stone-700 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>f("month"),className:`
                    px-3 py-1.5 text-sm font-medium rounded-md transition-all
                    ${c==="month"?"bg-white dark:bg-stone-600 text-stone-900 dark:text-stone-100 shadow-sm":"text-stone-600 dark:text-stone-300 hover:text-stone-900 dark:hover:text-stone-100"}
                  `,children:"Mois"}),n.jsx("button",{onClick:()=>f("week"),className:`
                    px-3 py-1.5 text-sm font-medium rounded-md transition-all
                    ${c==="week"?"bg-white dark:bg-stone-600 text-stone-900 dark:text-stone-100 shadow-sm":"text-stone-600 dark:text-stone-300 hover:text-stone-900 dark:hover:text-stone-100"}
                  `,children:"Semaine"})]}),n.jsx("button",{onClick:T,className:"px-3 py-1.5 text-sm font-medium text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700 rounded-lg transition-colors",children:"Aujourd'hui"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 p-4 border-b border-stone-200 dark:border-stone-700 bg-stone-50 dark:bg-stone-800/30",children:[n.jsx("span",{className:"text-xs text-stone-500 dark:text-stone-400 self-center mr-2",children:"Filtres:"}),Object.entries(Fa).map(([L,V])=>{const q=m.length===0||m.includes(L);return n.jsxs("button",{onClick:()=>W(L),className:`
                    inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-all
                    ${q?`${V.bgColor} ${V.color}`:"bg-stone-200 dark:bg-stone-700 text-stone-400 dark:text-stone-500 opacity-50"}
                  `,children:[n.jsx("span",{children:V.icon}),n.jsx("span",{className:"hidden sm:inline",children:V.label})]},L)}),m.length>0&&n.jsx("button",{onClick:()=>x([]),className:"text-xs text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-200 underline ml-2",children:"Réinitialiser"})]}),n.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 border-b border-stone-200 dark:border-stone-700 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"w-3 h-3 rounded bg-[#c8bfd2]/40 dark:bg-[#5B5781]/30"}),n.jsx("span",{className:"text-stone-500 dark:text-stone-400",children:"Cycle travail"})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"w-3 h-3 rounded bg-amber-200 dark:bg-amber-900/50"}),n.jsx("span",{className:"text-stone-500 dark:text-stone-400",children:"Cooldown"})]})]}),n.jsx("div",{className:"p-4",children:c==="month"?n.jsx(Bj,{calendarDays:B,getSingleDayEventsForDate:S,getSpanningEventsForWeekDates:A,getCyclePhase:N,isToday:z,eventTypeConfig:Fa,onSelectEvent:w}):n.jsx(Lj,{weekDays:v,getSingleDayEventsForDate:S,getSpanningEventsForWeekDates:A,getCyclePhase:N,isToday:z,eventTypeConfig:Fa,onSelectEvent:w,members:r})})]}),O&&n.jsx(Mj,{event:O,members:r,onClose:()=>w(null),onEdit:()=>{i==null||i(O.id),w(null)},onDelete:()=>{l==null||l(O.id),w(null)}})]})})}function Bj({calendarDays:e,getSingleDayEventsForDate:t,getSpanningEventsForWeekDates:r,getCyclePhase:s,isToday:o,eventTypeConfig:a,onSelectEvent:i}){const l=(c,f)=>{const p=s(c);return p==="work"?"bg-[#c8bfd2]/20 dark:bg-[#5B5781]/15":p==="cooldown"?"bg-amber-100 dark:bg-amber-900/30":f?"bg-white dark:bg-stone-800/50":"bg-stone-50 dark:bg-stone-900/50"},d=[];for(let c=0;c<e.length;c+=7)d.push(e.slice(c,c+7));const u=32;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-7 mb-2",children:Ej.map(c=>n.jsx("div",{className:"text-center text-xs font-medium text-stone-500 dark:text-stone-400 py-2",children:c},c))}),n.jsx("div",{className:"bg-stone-200 dark:bg-stone-700 rounded-lg overflow-hidden",children:d.map((c,f)=>{const p=c.map(m=>m.date),w=r(p);return n.jsxs("div",{className:"relative grid grid-cols-7 gap-px",children:[w.map((m,x)=>{const h=a[m.event.type],y=100/7,g=m.startCol*y,j=m.spanDays*y;return n.jsxs("button",{onClick:()=>i(m.event.id),className:`
                      absolute z-10 text-left px-1.5 py-0.5 text-[10px] font-medium truncate
                      transition-opacity hover:opacity-80
                      ${h.bgColor} ${h.color}
                      ${m.continuesFromPrevWeek?"rounded-l-none":"rounded-l"}
                      ${m.continuesToNextWeek?"rounded-r-none":"rounded-r"}
                    `,style:{top:`${u+x*20}px`,left:`calc(${g}% + 6px)`,width:`calc(${j}% - 12px)`,height:"18px"},title:m.event.title,children:[n.jsx("span",{className:"mr-0.5",children:h.icon}),n.jsx("span",{className:"hidden lg:inline",children:m.event.title})]},m.event.id)}),c.map((m,x)=>{const h=t(m.date),y=o(m.date),g=w.filter(j=>x>=j.startCol&&x<=j.endCol).length;return n.jsxs("div",{className:`min-h-[100px] p-1.5 transition-colors ${l(m.date,m.isCurrentMonth)}`,children:[n.jsx("div",{className:"flex items-center justify-between mb-1",children:n.jsx("span",{className:`
                          w-7 h-7 flex items-center justify-center text-sm rounded-full
                          ${y?"bg-[#5B5781] text-white font-bold":""}
                          ${!y&&m.isCurrentMonth?"text-stone-700 dark:text-stone-300":""}
                          ${!y&&!m.isCurrentMonth?"text-stone-400 dark:text-stone-600":""}
                        `,children:m.date.getDate()})}),g>0&&n.jsx("div",{style:{height:`${g*20}px`}}),n.jsxs("div",{className:"space-y-0.5",children:[h.slice(0,3).map(j=>{const v=a[j.event.type];return n.jsxs("button",{onClick:()=>i(j.event.id),className:`
                              w-full text-left px-1.5 py-0.5 text-[10px] font-medium truncate
                              transition-opacity hover:opacity-80 rounded
                              ${v.bgColor} ${v.color}
                            `,title:j.event.title,children:[n.jsx("span",{className:"mr-0.5",children:v.icon}),n.jsx("span",{className:"hidden lg:inline",children:j.event.title})]},j.event.id)}),h.length>3&&n.jsxs("p",{className:"text-[10px] text-stone-400 dark:text-stone-500 px-1",children:["+",h.length-3," autres"]})]})]},x)})]},f)})})]})}function Lj({weekDays:e,getSingleDayEventsForDate:t,getSpanningEventsForWeekDates:r,getCyclePhase:s,isToday:o,eventTypeConfig:a,onSelectEvent:i,members:l}){const d=r(e),u=E.useRef([]),[c,f]=E.useState([]);E.useEffect(()=>{const h=[];u.current.forEach(y=>{y&&h.push(y.offsetHeight)}),h.length===7&&f(h)},[e,t]);const p=h=>{if(c.length<7)return{top:h.startCol*88,height:h.spanDays*76+(h.spanDays-1)*12};let y=0;for(let j=0;j<h.startCol;j++)y+=c[j]+12;let g=0;for(let j=h.startCol;j<=h.endCol;j++)g+=c[j],j<h.endCol&&(g+=12);return{top:y,height:g}},w=h=>new Date(h).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),m=h=>{const y=s(h);return y==="work"?"bg-[#c8bfd2]/10 dark:bg-[#5B5781]/10":y==="cooldown"?"bg-amber-50 dark:bg-amber-900/20":"bg-white dark:bg-stone-800/30"},x=h=>d.some(y=>h>=y.startCol&&h<=y.endCol);return n.jsxs("div",{className:"relative",children:[d.map((h,y)=>{const g=a[h.event.type],{top:j,height:v}=p(h);return n.jsx("button",{onClick:()=>i(h.event.id),className:`
              absolute left-[108px] w-8 z-10 transition-all hover:opacity-80 hover:scale-[1.02]
              ${g.bgColor}
              ${h.continuesFromPrevWeek?"rounded-t-none":"rounded-t-lg"}
              ${h.continuesToNextWeek?"rounded-b-none":"rounded-b-lg"}
            `,style:{top:`${j}px`,height:`${v}px`,left:`calc(96px + 12px + ${y*36}px)`},title:h.event.title,children:n.jsx("div",{className:`
                h-full flex items-center justify-center
                ${g.color}
              `,children:n.jsxs("span",{className:"text-[11px] font-semibold whitespace-nowrap px-1",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)"},children:[g.icon," ",h.event.title]})})},h.event.id)}),n.jsx("div",{className:"space-y-3",children:e.map((h,y)=>{const g=o(h),j=s(h),v=t(h),N=x(y),S=d.filter(A=>y>=A.startCol&&y<=A.endCol).length;return n.jsxs("div",{ref:A=>{u.current[y]=A},className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("div",{className:`
                  shrink-0 sm:w-24 p-3 rounded-xl transition-colors flex sm:flex-col items-center sm:items-center gap-3 sm:gap-1
                  ${g?"bg-[#5B5781] text-white":j==="work"?"bg-[#c8bfd2]/30 dark:bg-[#5B5781]/20":j==="cooldown"?"bg-amber-100 dark:bg-amber-900/30":"bg-stone-100 dark:bg-stone-700/50"}
                `,children:[n.jsx("p",{className:`text-xs font-medium ${g?"text-white/70":"text-stone-500 dark:text-stone-400"}`,children:Dj[y]}),n.jsx("p",{className:`text-2xl font-bold ${g?"text-white":"text-stone-800 dark:text-stone-100"}`,children:h.getDate()}),n.jsx("p",{className:`text-xs ${g?"text-white/70":"text-stone-400 dark:text-stone-500"}`,children:ur[h.getMonth()].slice(0,3)})]}),n.jsx("div",{className:`flex-1 min-h-[60px] rounded-xl p-2 transition-colors ${m(h)}`,style:{marginLeft:N?`${S*36+8}px`:void 0},children:v.length===0?n.jsx("div",{className:"h-full"}):n.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(A=>{const D=a[A.event.type],R=A.event.attendeeIds.map(P=>l.find(I=>I.id===P)).filter(Boolean);return n.jsx("button",{onClick:()=>i(A.event.id),className:`
                            relative overflow-hidden text-left p-3 rounded-lg transition-all hover:shadow-md hover:scale-[1.02]
                            w-full sm:w-auto sm:min-w-[200px] sm:max-w-[280px]
                            ${D.bgColor} border border-transparent hover:border-stone-200 dark:hover:border-stone-600
                          `,children:n.jsxs("div",{children:[n.jsx("p",{className:`text-[10px] font-medium ${D.color} opacity-70`,children:w(A.event.startDate)}),n.jsxs("div",{className:"flex items-start gap-1.5 mt-1",children:[n.jsx("span",{className:"text-sm shrink-0",children:D.icon}),n.jsx("p",{className:`text-xs font-semibold ${D.color} line-clamp-2`,children:A.event.title})]}),n.jsx("p",{className:"text-[10px] text-stone-500 dark:text-stone-400 mt-1.5 truncate",children:A.event.location}),R.length>0&&n.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[n.jsx("div",{className:"flex -space-x-1.5",children:R.slice(0,3).map(P=>n.jsx("img",{src:P.avatar,alt:P.firstName,className:"w-5 h-5 rounded-full border-2 border-white dark:border-stone-700",title:`${P.firstName} ${P.lastName}`},P.id))}),R.length>3&&n.jsxs("span",{className:"text-[10px] text-stone-400 dark:text-stone-500",children:["+",R.length-3]})]})]})},A.event.id)})})})]},y)})})]})}function Mj({event:e,members:t,onClose:r,onEdit:s,onDelete:o}){const a=Fa[e.type],i=e.attendeeIds.map(p=>t.find(w=>w.id===p)).filter(Boolean),l=new Date(e.startDate),d=new Date(e.endDate),u=p=>p.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),c=p=>p.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),f=l.toDateString()!==d.toDateString();return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),n.jsxs("div",{className:"relative bg-white dark:bg-stone-800 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",children:[n.jsx("div",{className:`px-6 py-4 ${a.bgColor}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-3xl",children:a.icon}),n.jsxs("div",{children:[n.jsx("span",{className:`text-xs font-medium uppercase tracking-wide ${a.color}`,children:a.label}),n.jsx("h2",{className:"text-lg font-semibold text-stone-800 dark:text-stone-100 mt-0.5",children:e.title})]})]}),n.jsx("button",{onClick:r,className:"p-1.5 rounded-lg text-stone-500 hover:text-stone-700 hover:bg-black/10 dark:text-stone-400 dark:hover:text-stone-200 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-stone-100 dark:bg-stone-700 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 text-stone-500 dark:text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-stone-800 dark:text-stone-100 capitalize",children:c(l)}),n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:f?n.jsxs(n.Fragment,{children:[u(l)," → ",c(d)," ",u(d)]}):n.jsxs(n.Fragment,{children:[u(l)," - ",u(d)]})})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-stone-100 dark:bg-stone-700 flex items-center justify-center flex-shrink-0",children:n.jsxs("svg",{className:"w-4 h-4 text-stone-500 dark:text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),n.jsx("div",{children:n.jsx("p",{className:"font-medium text-stone-800 dark:text-stone-100",children:e.location})})]}),e.description&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-stone-100 dark:bg-stone-700 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 text-stone-500 dark:text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})}),n.jsx("p",{className:"text-stone-600 dark:text-stone-300 text-sm",children:e.description})]}),i.length>0&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-stone-100 dark:bg-stone-700 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 text-stone-500 dark:text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400 mb-2",children:[i.length," participant",i.length>1?"s":""]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(p=>n.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-stone-100 dark:bg-stone-700 rounded-full",children:[n.jsx("img",{src:p.avatar,alt:`${p.firstName} ${p.lastName}`,className:"w-5 h-5 rounded-full bg-stone-200"}),n.jsx("span",{className:"text-xs text-stone-600 dark:text-stone-300",children:p.firstName})]},p.id))})]})]})]}),n.jsxs("div",{className:"px-6 py-4 bg-stone-50 dark:bg-stone-800/50 border-t border-stone-200 dark:border-stone-700 flex items-center justify-end gap-2",children:[o&&n.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Supprimer"}),s&&n.jsx("button",{onClick:s,className:"px-4 py-1.5 text-sm bg-[#5B5781] hover:bg-[#4a4670] text-white rounded-lg font-medium transition-colors",children:"Modifier"})]})]})]})}const Oj=(e,t=1)=>e.toFixed(t).replace(".",","),Fj={design:"Design",formation:"Formation",administratif:"Administratif",coordination:"Coordination",communication:"Communication"},Rj={design:{bg:"bg-[#AFBD00]/10",text:"text-[#8a9600]",darkBg:"dark:bg-[#AFBD00]/20",darkText:"dark:text-[#c8d44a]"},formation:{bg:"bg-[#B01A19]/10",text:"text-[#B01A19]",darkBg:"dark:bg-[#B01A19]/20",darkText:"dark:text-[#e47777]"},administratif:{bg:"bg-[#5B5781]/10",text:"text-[#5B5781]",darkBg:"dark:bg-[#5B5781]/20",darkText:"dark:text-[#c8bfd2]"},coordination:{bg:"bg-[#234766]/10",text:"text-[#234766]",darkBg:"dark:bg-[#234766]/20",darkText:"dark:text-[#7badd4]"},communication:{bg:"bg-[#EF9B0D]/10",text:"text-[#c47f00]",darkBg:"dark:bg-[#EF9B0D]/20",darkText:"dark:text-[#f5b84d]"}};function $j({timesheet:e,member:t,guild:r,showMember:s=!1,onEdit:o,onDelete:a,onMarkInvoiced:i,onViewMember:l,onViewGuild:d}){const u=Rj[e.category];return n.jsx("div",{className:"group px-4 sm:px-6 py-4 hover:bg-stone-50 dark:hover:bg-stone-800/30 transition-colors",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:w-44 flex-shrink-0",children:[n.jsxs("div",{className:"w-12 h-12 rounded-xl bg-stone-100 dark:bg-stone-700 flex flex-col items-center justify-center flex-shrink-0",children:[n.jsx("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase",children:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"short"})}),n.jsx("span",{className:"text-lg font-bold text-stone-700 dark:text-stone-200 leading-tight",children:new Date(e.date).getDate()})]}),s&&t&&n.jsxs("button",{onClick:l,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[n.jsx("img",{src:t.avatar,alt:`${t.firstName} ${t.lastName}`,className:"w-8 h-8 rounded-full border border-stone-200 dark:border-stone-600 bg-stone-100"}),n.jsx("span",{className:"text-sm font-medium text-stone-700 dark:text-stone-300 hidden lg:block",children:t.firstName})]})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-stone-800 dark:text-stone-200 font-medium line-clamp-1",children:e.description}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5",children:[n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-md text-[11px] font-medium ${u.bg} ${u.text} ${u.darkBg} ${u.darkText}`,children:Fj[e.category]}),r&&n.jsxs("button",{onClick:d,className:"inline-flex items-center gap-1 text-xs text-stone-500 hover:text-[#5B5781] dark:text-stone-400 dark:hover:text-[#c8bfd2] transition-colors",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),r.name]}),e.projectId&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-stone-500 dark:text-stone-400",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Projet"]}),e.courseId&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-stone-500 dark:text-stone-400",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Formation"]}),e.kilometers>0&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-stone-500 dark:text-stone-400",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),e.kilometers," km"]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 sm:flex-shrink-0 ml-15 sm:ml-0",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-lg font-bold text-stone-800 dark:text-stone-100 tabular-nums",children:Oj(e.hours)}),n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400 ml-0.5",children:"h"})]}),n.jsx("div",{className:`w-16 text-center py-1 rounded-lg text-[11px] font-medium uppercase tracking-wide ${e.paymentType==="invoice"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"}`,children:e.paymentType==="invoice"?"Facture":"Semos"}),n.jsx("button",{onClick:i,disabled:e.invoiced,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${e.invoiced?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400 cursor-default":"bg-stone-100 text-stone-400 hover:bg-[#5B5781]/10 hover:text-[#5B5781] dark:bg-stone-700 dark:text-stone-500 dark:hover:bg-[#5B5781]/20 dark:hover:text-[#c8bfd2]"}`,title:e.invoiced?"Facturée":"Marquer comme facturée",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.invoiced?"M5 13l4 4L19 7":"M9 12l2 2 4-4"})})}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:o,className:"w-8 h-8 rounded-lg flex items-center justify-center text-stone-400 hover:text-[#5B5781] hover:bg-[#5B5781]/10 dark:text-stone-500 dark:hover:text-[#c8bfd2] dark:hover:bg-[#5B5781]/20 transition-colors",title:"Modifier",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),n.jsx("button",{onClick:a,className:"w-8 h-8 rounded-lg flex items-center justify-center text-stone-400 hover:text-red-500 hover:bg-red-50 dark:text-stone-500 dark:hover:text-red-400 dark:hover:bg-red-900/20 transition-colors",title:"Supprimer",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})})}const Ij=[{value:"all",label:"Toutes catégories"},{value:"design",label:"Design"},{value:"formation",label:"Formation"},{value:"administratif",label:"Administratif"},{value:"coordination",label:"Coordination"},{value:"communication",label:"Communication"}],zj=[{value:"all",label:"Tous types"},{value:"invoice",label:"Facture"},{value:"semos",label:"Semos"}],Wj=[{value:"all",label:"Tous statuts"},{value:"invoiced",label:"Facturées"},{value:"pending",label:"En attente"}];function Uj({searchQuery:e,onSearchChange:t,categoryFilter:r,onCategoryChange:s,paymentFilter:o,onPaymentChange:a,invoicedFilter:i,onInvoicedChange:l,memberFilter:d,onMemberChange:u,members:c,showMemberFilter:f,hasActiveFilters:p,onClearFilters:w}){const m=c.filter(x=>x.status==="active");return n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-4 sm:p-6",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx("svg",{className:"w-5 h-5 text-stone-400 dark:text-stone-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),n.jsx("input",{type:"text",value:e,onChange:x=>t(x.target.value),placeholder:"Rechercher dans les descriptions...",className:"w-full pl-12 pr-4 py-3 bg-stone-50 dark:bg-stone-700/50 border border-stone-200 dark:border-stone-600 rounded-xl text-stone-800 dark:text-stone-200 placeholder-stone-400 dark:placeholder-stone-500 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] dark:focus:ring-[#5B5781]/30 dark:focus:border-[#5B5781] transition-colors"}),e&&n.jsx("button",{onClick:()=>t(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-stone-500 dark:text-stone-400 mb-1.5 uppercase tracking-wide",children:"Catégorie"}),n.jsx("select",{value:r,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 bg-stone-50 dark:bg-stone-700/50 border border-stone-200 dark:border-stone-600 rounded-lg text-sm text-stone-700 dark:text-stone-300 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] dark:focus:ring-[#5B5781]/30 dark:focus:border-[#5B5781] transition-colors appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:Ij.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-stone-500 dark:text-stone-400 mb-1.5 uppercase tracking-wide",children:"Type"}),n.jsx("select",{value:o,onChange:x=>a(x.target.value),className:"w-full px-3 py-2 bg-stone-50 dark:bg-stone-700/50 border border-stone-200 dark:border-stone-600 rounded-lg text-sm text-stone-700 dark:text-stone-300 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] dark:focus:ring-[#5B5781]/30 dark:focus:border-[#5B5781] transition-colors appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:zj.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-stone-500 dark:text-stone-400 mb-1.5 uppercase tracking-wide",children:"Statut"}),n.jsx("select",{value:i,onChange:x=>l(x.target.value),className:"w-full px-3 py-2 bg-stone-50 dark:bg-stone-700/50 border border-stone-200 dark:border-stone-600 rounded-lg text-sm text-stone-700 dark:text-stone-300 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] dark:focus:ring-[#5B5781]/30 dark:focus:border-[#5B5781] transition-colors appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:Wj.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),f&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-stone-500 dark:text-stone-400 mb-1.5 uppercase tracking-wide",children:"Membre"}),n.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 bg-stone-50 dark:bg-stone-700/50 border border-stone-200 dark:border-stone-600 rounded-lg text-sm text-stone-700 dark:text-stone-300 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] dark:focus:ring-[#5B5781]/30 dark:focus:border-[#5B5781] transition-colors appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[n.jsx("option",{value:"all",children:"Tous les membres"}),m.map(x=>n.jsxs("option",{value:x.id,children:[x.firstName," ",x.lastName]},x.id))]})]})]}),p&&n.jsx("div",{className:"mt-4 pt-4 border-t border-stone-200 dark:border-stone-700",children:n.jsxs("button",{onClick:w,className:"inline-flex items-center gap-2 text-sm text-[#5B5781] hover:text-[#4a4670] dark:text-[#c8bfd2] dark:hover:text-white font-medium transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Effacer tous les filtres"]})})]})}const _l={design:"Design",formation:"Formation",administratif:"Administratif",coordination:"Coordination",communication:"Communication"},L0={design:"bg-[#AFBD00]",formation:"bg-[#B01A19]",administratif:"bg-[#5B5781]",coordination:"bg-[#234766]",communication:"bg-[#EF9B0D]"},ia=(e,t=1)=>e.toFixed(t).replace(".",",");function Hj({timesheets:e}){const t=E.useMemo(()=>{const s=e.reduce((w,m)=>w+m.hours,0),o=e.filter(w=>w.invoiced).length,a=e.length-o,i=e.reduce((w,m)=>(w[m.category]=(w[m.category]||0)+m.hours,w),{}),l=e.filter(w=>w.paymentType==="invoice").reduce((w,m)=>w+m.hours,0),d=e.filter(w=>w.paymentType==="semos").reduce((w,m)=>w+m.hours,0),u=new Date,c=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`,p=e.filter(w=>w.date.startsWith(c)).reduce((w,m)=>w+m.hours,0);return{totalHours:s,invoicedCount:o,pendingCount:a,hoursByCategory:i,invoiceHours:l,semosHours:d,currentMonthHours:p}},[e]),r=E.useMemo(()=>Object.keys(_l).map(s=>({category:s,hours:t.hoursByCategory[s]||0})).filter(s=>s.hours>0).sort((s,o)=>o.hours-s.hours),[t.hoursByCategory]);return n.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 mb-6",children:[n.jsxs("div",{className:"flex-1 bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-5",children:[n.jsxs("div",{className:"flex items-baseline gap-3 mb-4",children:[n.jsx("span",{className:"text-4xl font-bold text-stone-800 dark:text-stone-100 tabular-nums",children:ia(t.totalHours)}),n.jsx("span",{className:"text-lg text-stone-400 dark:text-stone-500",children:"heures au total"})]}),r.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-3 w-full bg-stone-100 dark:bg-stone-700 rounded-full overflow-hidden flex",children:r.map(({category:s,hours:o})=>n.jsx("div",{className:`h-full ${L0[s]} first:rounded-l-full last:rounded-r-full`,style:{width:`${o/t.totalHours*100}%`},title:`${_l[s]}: ${ia(o)}h`},s))}),n.jsx("div",{className:"flex flex-wrap gap-x-5 gap-y-1",children:r.map(({category:s,hours:o})=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${L0[s]}`}),n.jsx("span",{className:"text-sm text-stone-600 dark:text-stone-400",children:_l[s]}),n.jsxs("span",{className:"text-sm font-medium text-stone-800 dark:text-stone-200 tabular-nums",children:[ia(o),"h"]})]},s))})]})]}),n.jsxs("div",{className:"flex sm:flex-col gap-4 sm:w-48",children:[n.jsxs("div",{className:"flex-1 bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-4",children:[n.jsx("p",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-1",children:"Ce mois"}),n.jsxs("p",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100 tabular-nums",children:[ia(t.currentMonthHours),n.jsx("span",{className:"text-sm font-normal text-stone-400 dark:text-stone-500 ml-1",children:"h"})]})]}),n.jsxs("div",{className:"flex-1 bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-4",children:[n.jsx("p",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide mb-1",children:"À facturer"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400 tabular-nums",children:[t.pendingCount,n.jsxs("span",{className:"text-sm font-normal text-stone-400 dark:text-stone-500 ml-1",children:["/ ",e.length]})]})]})]})]})}const Vj=(e,t=1)=>e.toFixed(t).replace(".",","),M0=()=>{const e=new Date,t=new Date(e);return t.setMonth(t.getMonth()-1),{start:t.toISOString().split("T")[0],end:e.toISOString().split("T")[0]}};function qj({timesheets:e,members:t,guilds:r,currentMemberId:s,isAdmin:o=!1,onCreateTimesheet:a,onEditTimesheet:i,onDeleteTimesheet:l,onMarkInvoiced:d,onViewMember:u,onViewGuild:c}){const[f,p]=E.useState(""),[w,m]=E.useState("all"),[x,h]=E.useState("all"),[y,g]=E.useState("all"),[j,v]=E.useState("all"),[N,S]=E.useState(M0);t.find(B=>B.id===s);const A=o?e:e.filter(B=>B.memberId===s),D=E.useMemo(()=>A.filter(B=>!(N.start&&B.date<N.start||N.end&&B.date>N.end)),[A,N]),R=E.useMemo(()=>D.filter(B=>!(f&&!B.description.toLowerCase().includes(f.toLowerCase())||w!=="all"&&B.category!==w||x!=="all"&&B.paymentType!==x||y==="invoiced"&&!B.invoiced||y==="pending"&&B.invoiced||j!=="all"&&B.memberId!==j)),[D,f,w,x,y,j]),P=E.useMemo(()=>[...R].sort((B,z)=>z.date.localeCompare(B.date)),[R]),I=E.useMemo(()=>{const B={};return P.forEach(z=>{const J=z.date.substring(0,7);B[J]||(B[J]=[]),B[J].push(z)}),B},[P]),T=B=>{const[z,J]=B.split("-");return new Date(parseInt(z),parseInt(J)-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})},W=()=>{p(""),m("all"),h("all"),g("all"),v("all")},O=f||w!=="all"||x!=="all"||y!=="all"||j!=="all";return n.jsx("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-stone-800 dark:text-stone-100",children:"Timesheets"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mt-1",children:o?"Gestion des prestations du Lab":"Mes prestations"})]}),n.jsxs("button",{onClick:a,className:"inline-flex items-center justify-center gap-2 px-5 py-2.5 bg-[#5B5781] hover:bg-[#4a4670] text-white font-medium rounded-xl shadow-sm hover:shadow-md transition-all active:scale-[0.98]",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouvelle prestation"]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Période :"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"date",value:N.start,onChange:B=>S({...N,start:B.target.value}),className:"px-3 py-1.5 bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-lg text-sm text-stone-700 dark:text-stone-300 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] transition-colors"}),n.jsx("span",{className:"text-stone-400 dark:text-stone-500",children:"—"}),n.jsx("input",{type:"date",value:N.end,onChange:B=>S({...N,end:B.target.value}),className:"px-3 py-1.5 bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-lg text-sm text-stone-700 dark:text-stone-300 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] transition-colors"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{const B=new Date,z=new Date(B);z.setDate(z.getDate()-7),S({start:z.toISOString().split("T")[0],end:B.toISOString().split("T")[0]})},className:"px-2.5 py-1 text-xs font-medium text-stone-600 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 rounded-md transition-colors",children:"7 jours"}),n.jsx("button",{onClick:()=>S(M0()),className:"px-2.5 py-1 text-xs font-medium text-stone-600 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 rounded-md transition-colors",children:"30 jours"}),n.jsx("button",{onClick:()=>{const B=new Date,z=new Date(B);z.setMonth(z.getMonth()-3),S({start:z.toISOString().split("T")[0],end:B.toISOString().split("T")[0]})},className:"px-2.5 py-1 text-xs font-medium text-stone-600 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 rounded-md transition-colors",children:"3 mois"}),n.jsx("button",{onClick:()=>{const B=new Date,z=new Date(B.getFullYear(),0,1);S({start:z.toISOString().split("T")[0],end:B.toISOString().split("T")[0]})},className:"px-2.5 py-1 text-xs font-medium text-stone-600 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 hover:bg-stone-200 dark:hover:bg-stone-700 rounded-md transition-colors",children:"Cette année"})]})]})]}),n.jsx(Hj,{timesheets:D,members:t,currentMemberId:s,isAdmin:o}),n.jsx(Uj,{searchQuery:f,onSearchChange:p,categoryFilter:w,onCategoryChange:m,paymentFilter:x,onPaymentChange:h,invoicedFilter:y,onInvoicedChange:g,memberFilter:j,onMemberChange:v,members:t,showMemberFilter:o,hasActiveFilters:O,onClearFilters:W}),n.jsx("div",{className:"mt-6",children:P.length===0?n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-stone-100 dark:bg-stone-700 flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-stone-400 dark:text-stone-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h3",{className:"text-lg font-medium text-stone-700 dark:text-stone-300 mb-2",children:O?"Aucun résultat":"Aucune prestation"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 mb-6 max-w-sm mx-auto",children:O?"Aucune prestation ne correspond à vos critères de recherche.":"Commencez par saisir votre première prestation pour suivre votre temps de travail."}),O?n.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 px-4 py-2 text-[#5B5781] hover:text-[#4a4670] dark:text-[#c8bfd2] font-medium transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Effacer les filtres"]}):n.jsxs("button",{onClick:a,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-[#5B5781] hover:bg-[#4a4670] text-white font-medium rounded-xl shadow-sm hover:shadow-md transition-all",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Saisir une prestation"]})]}):n.jsx("div",{className:"space-y-8",children:Object.entries(I).map(([B,z])=>{const J=z.reduce((q,k)=>q+k.hours,0),L=z.reduce((q,k)=>q+k.kilometers,0),V=z.filter(q=>q.invoiced).length;return n.jsxs("section",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-serif font-semibold text-stone-700 dark:text-stone-200 capitalize",children:T(B)}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-500 dark:text-stone-400",children:[n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Vj(J),"h"]}),L>0&&n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),L," km"]}),n.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-300",children:[V,"/",z.length," facturées"]})]})]}),n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden divide-y divide-stone-100 dark:divide-stone-700/50",children:z.map(q=>{const k=t.find(K=>K.id===q.memberId),b=q.guildId?r.find(K=>K.id===q.guildId):void 0;return n.jsx($j,{timesheet:q,member:k,guild:b,showMember:o,onEdit:()=>i==null?void 0:i(q.id),onDelete:()=>l==null?void 0:l(q.id),onMarkInvoiced:()=>d==null?void 0:d(q.id),onViewMember:()=>k&&(u==null?void 0:u(k.id)),onViewGuild:()=>b&&(c==null?void 0:c(b.id))},q.id)})})]},B)})})}),P.length>0&&n.jsx("div",{className:"mt-8 py-4 border-t border-stone-200 dark:border-stone-700",children:n.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400 text-center",children:[P.length," prestation",P.length>1?"s":""," affichée",P.length>1?"s":"",O&&n.jsxs("span",{className:"ml-1",children:["(sur ",A.length," au total)"]})]})})]})})}const Jj={designer:"Designer",shaper:"Shaper",formateur:"Formateur·ice",comptable:"Comptable",coordination:"Coordination",communication:"Communication",IT:"IT"},Qj={designer:"bg-[#AFBD00]/20 text-[#7a8200] dark:bg-[#AFBD00]/30 dark:text-[#d4e34d]",shaper:"bg-[#5B5781]/20 text-[#5B5781] dark:bg-[#5B5781]/30 dark:text-[#a9a3c7]",formateur:"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300",comptable:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",coordination:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",communication:"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300",IT:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"};function Gj({member:e,guilds:t,wallet:r,onView:s,onEdit:o}){const a=t.filter(l=>e.guildIds.includes(l.id)),i=e.status==="inactive";return n.jsxs("div",{className:`
        group relative overflow-hidden rounded-2xl border border-stone-200 dark:border-stone-700
        bg-white dark:bg-stone-800/50 backdrop-blur-sm
        transition-all duration-300 ease-out
        hover:border-[#5B5781]/40 hover:shadow-lg hover:shadow-[#5B5781]/5
        dark:hover:border-[#5B5781]/60 dark:hover:shadow-[#5B5781]/10
        ${i?"opacity-60":""}
      `,children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#5B5781] via-[#5B5781]/60 to-[#AFBD00] opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"relative flex-shrink-0",children:[n.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden ring-2 ring-stone-100 dark:ring-stone-700 group-hover:ring-[#5B5781]/30 transition-all duration-300",children:n.jsx("img",{src:e.avatar,alt:`${e.firstName} ${e.lastName}`,className:"w-full h-full object-cover"})}),n.jsx("div",{className:`
                absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white dark:border-stone-800
                ${e.status==="active"?"bg-emerald-500":"bg-stone-400"}
              `,title:e.status==="active"?"Actif":"Inactif"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-stone-900 dark:text-stone-100 truncate",children:[e.firstName," ",e.lastName]}),e.isAdmin&&n.jsx("span",{className:"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider bg-[#5B5781] text-white",children:"Admin"})]}),n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 truncate",children:e.email})]})]}),n.jsx("div",{className:"mt-4 flex flex-wrap gap-1.5",children:e.roles.map(l=>n.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium ${Qj[l]||"bg-stone-100 text-stone-600 dark:bg-stone-700 dark:text-stone-300"}`,children:Jj[l]||l},l))}),a.length>0&&n.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-stone-500 dark:text-stone-400",children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),n.jsx("span",{className:"truncate",children:a.map(l=>l.name).join(", ")})]}),r&&n.jsx("div",{className:"mt-3 flex items-center gap-2 text-xs",children:n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-[#AFBD00]/10 dark:bg-[#AFBD00]/20",children:[n.jsx("span",{className:"font-medium text-[#7a8200] dark:text-[#d4e34d]",children:r.balance.toLocaleString("fr-FR",{minimumFractionDigits:1})}),n.jsx("span",{className:"text-[#7a8200]/70 dark:text-[#d4e34d]/70",children:"Semos"})]})}),n.jsxs("div",{className:"mt-3 text-xs text-stone-400 dark:text-stone-500",children:["Membre depuis ",new Date(e.joinedAt).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-stone-100 dark:border-stone-700/50 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[n.jsx("button",{onClick:s,className:"flex-1 px-3 py-2 text-sm font-medium text-stone-700 dark:text-stone-300 bg-stone-100 dark:bg-stone-700 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-600 transition-colors",children:"Voir le profil"}),o&&n.jsx("button",{onClick:o,className:"px-3 py-2 text-sm font-medium text-[#5B5781] dark:text-[#a9a3c7] bg-[#5B5781]/10 dark:bg-[#5B5781]/20 rounded-lg hover:bg-[#5B5781]/20 dark:hover:bg-[#5B5781]/30 transition-colors",children:"Modifier"})]})]})]})}const O0={designer:"Designer",shaper:"Shaper",formateur:"Formateur·ice",comptable:"Comptable",coordination:"Coordination",communication:"Communication",IT:"IT"},Kj=["designer","shaper","formateur","comptable","coordination","communication","IT"];function Yj({members:e,guilds:t,wallets:r,currentMemberId:s,onAddMember:o,onViewMember:a,onEditMember:i}){var N;const[l,d]=E.useState(""),[u,c]=E.useState("all"),[f,p]=E.useState("all"),[w,m]=E.useState("all"),x=e.find(S=>S.id===s),h=(x==null?void 0:x.isAdmin)??!1,y=E.useMemo(()=>e.filter(S=>{const A=l.toLowerCase(),D=l===""||S.firstName.toLowerCase().includes(A)||S.lastName.toLowerCase().includes(A)||S.email.toLowerCase().includes(A),R=u==="all"||S.status===u,P=f==="all"||S.roles.includes(f),I=w==="all"||S.guildIds.includes(w);return D&&R&&P&&I}),[e,l,u,f,w]),g=e.filter(S=>S.status==="active").length,j=e.filter(S=>S.status==="inactive").length,v=S=>r.find(A=>A.id===S.walletId);return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 via-white to-stone-100/50 dark:from-stone-900 dark:via-stone-900 dark:to-stone-800/50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-stone-900 dark:text-stone-100 tracking-tight",children:"Membres du Lab"}),n.jsx("p",{className:"mt-2 text-stone-600 dark:text-stone-400",children:"Annuaire des membres et de leurs rôles"})]}),h&&o&&n.jsxs("button",{onClick:o,className:`
                  inline-flex items-center gap-2 px-5 py-2.5 rounded-xl
                  bg-[#5B5781] text-white font-medium
                  shadow-lg shadow-[#5B5781]/20
                  hover:bg-[#4a4669] hover:shadow-xl hover:shadow-[#5B5781]/30
                  active:scale-[0.98]
                  transition-all duration-200
                `,children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Ajouter un membre"]})]}),n.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 shadow-sm",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),n.jsx("span",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:g}),n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"actifs"})]}),n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 shadow-sm",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-stone-400"}),n.jsx("span",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:j}),n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"inactifs"})]}),n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 shadow-sm",children:[n.jsx("span",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:t.length}),n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"guildes"})]})]})]}),n.jsxs("div",{className:"mb-8 p-4 rounded-2xl bg-white dark:bg-stone-800/50 border border-stone-200 dark:border-stone-700 shadow-sm",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{type:"text",placeholder:"Rechercher un membre...",value:l,onChange:S=>d(S.target.value),className:`
                    w-full pl-10 pr-4 py-2.5 rounded-xl
                    bg-stone-50 dark:bg-stone-900/50
                    border border-stone-200 dark:border-stone-600
                    text-stone-900 dark:text-stone-100
                    placeholder:text-stone-400
                    focus:outline-none focus:ring-2 focus:ring-[#5B5781]/30 focus:border-[#5B5781]
                    transition-colors
                  `})]})}),n.jsx("div",{className:"sm:w-40",children:n.jsxs("select",{value:u,onChange:S=>c(S.target.value),className:`
                  w-full px-4 py-2.5 rounded-xl appearance-none
                  bg-stone-50 dark:bg-stone-900/50
                  border border-stone-200 dark:border-stone-600
                  text-stone-900 dark:text-stone-100
                  focus:outline-none focus:ring-2 focus:ring-[#5B5781]/30 focus:border-[#5B5781]
                  transition-colors cursor-pointer
                `,children:[n.jsx("option",{value:"all",children:"Tous les statuts"}),n.jsx("option",{value:"active",children:"Actifs"}),n.jsx("option",{value:"inactive",children:"Inactifs"})]})}),n.jsx("div",{className:"sm:w-44",children:n.jsxs("select",{value:f,onChange:S=>p(S.target.value),className:`
                  w-full px-4 py-2.5 rounded-xl appearance-none
                  bg-stone-50 dark:bg-stone-900/50
                  border border-stone-200 dark:border-stone-600
                  text-stone-900 dark:text-stone-100
                  focus:outline-none focus:ring-2 focus:ring-[#5B5781]/30 focus:border-[#5B5781]
                  transition-colors cursor-pointer
                `,children:[n.jsx("option",{value:"all",children:"Tous les rôles"}),Kj.map(S=>n.jsx("option",{value:S,children:O0[S]},S))]})}),n.jsx("div",{className:"sm:w-48",children:n.jsxs("select",{value:w,onChange:S=>m(S.target.value),className:`
                  w-full px-4 py-2.5 rounded-xl appearance-none
                  bg-stone-50 dark:bg-stone-900/50
                  border border-stone-200 dark:border-stone-600
                  text-stone-900 dark:text-stone-100
                  focus:outline-none focus:ring-2 focus:ring-[#5B5781]/30 focus:border-[#5B5781]
                  transition-colors cursor-pointer
                `,children:[n.jsx("option",{value:"all",children:"Toutes les guildes"}),t.map(S=>n.jsx("option",{value:S.id,children:S.name},S.id))]})})]}),(l||u!=="all"||f!=="all"||w!=="all")&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-stone-100 dark:border-stone-700/50 flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Filtres actifs:"}),l&&n.jsxs("button",{onClick:()=>d(""),className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-[#5B5781]/10 text-[#5B5781] dark:bg-[#5B5781]/20 dark:text-[#a9a3c7] text-xs font-medium hover:bg-[#5B5781]/20 dark:hover:bg-[#5B5781]/30 transition-colors",children:['"',l,'"',n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),u!=="all"&&n.jsxs("button",{onClick:()=>c("all"),className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-[#5B5781]/10 text-[#5B5781] dark:bg-[#5B5781]/20 dark:text-[#a9a3c7] text-xs font-medium hover:bg-[#5B5781]/20 dark:hover:bg-[#5B5781]/30 transition-colors",children:[u==="active"?"Actifs":"Inactifs",n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),f!=="all"&&n.jsxs("button",{onClick:()=>p("all"),className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-[#5B5781]/10 text-[#5B5781] dark:bg-[#5B5781]/20 dark:text-[#a9a3c7] text-xs font-medium hover:bg-[#5B5781]/20 dark:hover:bg-[#5B5781]/30 transition-colors",children:[O0[f],n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),w!=="all"&&n.jsxs("button",{onClick:()=>m("all"),className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-[#5B5781]/10 text-[#5B5781] dark:bg-[#5B5781]/20 dark:text-[#a9a3c7] text-xs font-medium hover:bg-[#5B5781]/20 dark:hover:bg-[#5B5781]/30 transition-colors",children:[(N=t.find(S=>S.id===w))==null?void 0:N.name,n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),n.jsx("button",{onClick:()=>{d(""),c("all"),p("all"),m("all")},className:"text-xs text-stone-500 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-300 underline underline-offset-2",children:"Tout effacer"})]})]}),n.jsxs("div",{className:"mb-4 text-sm text-stone-500 dark:text-stone-400",children:[y.length," membre",y.length!==1?"s":""," trouvé",y.length!==1?"s":""]}),y.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:y.map(S=>n.jsx(Gj,{member:S,guilds:t,wallet:v(S),onView:()=>a==null?void 0:a(S.id),onEdit:h?()=>i==null?void 0:i(S.id):void 0},S.id))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-2xl bg-stone-100 dark:bg-stone-800 flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),n.jsx("h3",{className:"text-lg font-medium text-stone-900 dark:text-stone-100 mb-1",children:"Aucun membre trouvé"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 max-w-sm",children:"Aucun membre ne correspond aux critères de recherche. Essayez de modifier vos filtres."})]})]})})}function Xj(e){return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:1}).format(e)}function Zj(e){return new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})}function ek(e){return new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}function tk(e){if(e.type==="emission")return"✦";switch(e.transactionType){case"payment":return"💳";case"exchange":return"↔";case"transfer":default:return e.isIncoming?"↓":"↑"}}function nk(e){if(e.type==="emission")switch(e.emissionReason){case"cotisation_member":return"Cotisation";case"volunteer_work":return"Bénévolat";case"provider_fee":return"Fidélisation";case"peer_review":return"Peer Review";case"loyalty":return"Fidélité";case"participation":return"Participation";default:return"Émission"}switch(e.transactionType){case"payment":return"Paiement";case"exchange":return"Échange";case"transfer":default:return"Transfert"}}function rk({activity:e,onClick:t}){return n.jsxs("button",{onClick:t,className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700/50 hover:border-[#5B5781]/30 dark:hover:border-[#5B5781]/50 transition-all duration-200 group text-left",children:[n.jsx("div",{className:`
          w-12 h-12 rounded-xl flex items-center justify-center text-lg shrink-0
          ${e.type==="emission"?"bg-gradient-to-br from-[#AFBD00]/20 to-[#AFBD00]/10 text-[#AFBD00]":e.isIncoming?"bg-gradient-to-br from-emerald-100 to-emerald-50 text-emerald-600 dark:from-emerald-900/30 dark:to-emerald-900/10 dark:text-emerald-400":"bg-gradient-to-br from-rose-100 to-rose-50 text-rose-600 dark:from-rose-900/30 dark:to-rose-900/10 dark:text-rose-400"}
        `,children:tk(e)}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-stone-900 dark:text-stone-100 font-medium truncate group-hover:text-[#5B5781] dark:group-hover:text-[#8B87A8] transition-colors",children:e.description}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:`
                  text-xs px-2 py-0.5 rounded-full font-medium
                  ${e.type==="emission"?"bg-[#AFBD00]/10 text-[#8a9600]":"bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-300"}
                `,children:nk(e)}),e.otherParty&&n.jsxs("span",{className:"text-xs text-stone-500 dark:text-stone-400",children:[e.isIncoming?"De":"À"," ",n.jsxs("span",{className:"font-medium",children:[e.otherParty.firstName," ",e.otherParty.lastName[0],"."]})]})]})]}),n.jsxs("div",{className:"text-right shrink-0",children:[n.jsxs("p",{className:`
                text-lg font-bold tabular-nums
                ${e.type==="emission"?"text-[#AFBD00]":e.isIncoming?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}
              `,children:[e.isIncoming?"+":"-",Xj(Math.abs(e.amount)),n.jsx("span",{className:"text-sm font-normal ml-0.5",children:"S"})]}),n.jsxs("p",{className:"text-xs text-stone-400 dark:text-stone-500 mt-0.5",children:[Zj(e.date)," · ",ek(e.date)]})]})]})})]})}function sk(e,t,r,s,o){const a=d=>{const u=o.find(c=>c.id===d);return u&&s.find(c=>c.id===u.memberId)||null},i=t.filter(d=>d.fromWalletId===e||d.toWalletId===e).map(d=>({id:d.id,type:"transaction",date:d.createdAt,description:d.description,amount:d.toWalletId===e?d.amount:-d.amount,isIncoming:d.toWalletId===e,otherParty:d.toWalletId===e?a(d.fromWalletId):a(d.toWalletId),transactionType:d.type})),l=r.filter(d=>d.walletId===e).map(d=>({id:d.id,type:"emission",date:d.createdAt,description:d.description,amount:d.amount,isIncoming:!0,otherParty:null,emissionReason:d.reason}));return[...i,...l].sort((d,u)=>new Date(u.date).getTime()-new Date(d.date).getTime())}function la(e){return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:1}).format(e)}function ok({currentWallet:e,currentMember:t,members:r,wallets:s,onTransfer:o,onCancel:a}){const[i,l]=E.useState(""),[d,u]=E.useState(""),[c,f]=E.useState(""),p=r.filter(v=>v.id!==t.id&&v.status==="active"),w=p.find(v=>v.id===i),m=w?s.find(v=>v.memberId===w.id):null,x=parseFloat(d)||0,h=e.balance-e.floor,y=x>0&&x<=h,g=i&&y&&c.trim(),j=v=>{v.preventDefault(),g&&m&&(o==null||o(m.id,x,c.trim()))};return n.jsxs("div",{className:"bg-white dark:bg-stone-800 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-[#5B5781] to-[#4a4670] px-6 py-5 text-white",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:"↑"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Transférer des Semos"}),n.jsxs("p",{className:"text-white/70 text-sm",children:["Solde disponible: ",n.jsxs("span",{className:"font-medium text-white",children:[la(h),"S"]})]})]})]})}),n.jsxs("form",{onSubmit:j,className:"p-6 space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Destinataire"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:i,onChange:v=>l(v.target.value),className:"w-full px-4 py-3 bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 appearance-none cursor-pointer hover:border-[#5B5781]/50 focus:border-[#5B5781] focus:ring-2 focus:ring-[#5B5781]/20 outline-none transition-all",children:[n.jsx("option",{value:"",children:"Sélectionner un membre..."}),p.map(v=>n.jsxs("option",{value:v.id,children:[v.firstName," ",v.lastName]},v.id))]}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-stone-400",children:"▼"})]}),w&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-stone-500 dark:text-stone-400",children:[n.jsx("img",{src:w.avatar,alt:"",className:"w-5 h-5 rounded-full"}),n.jsx("span",{children:w.roles.join(", ")})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Montant"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:d,onChange:v=>u(v.target.value),placeholder:"0",min:"0.1",max:h,step:"0.1",className:"w-full px-4 py-3 pr-16 bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 text-2xl font-bold tabular-nums placeholder:text-stone-300 dark:placeholder:text-stone-600 hover:border-[#5B5781]/50 focus:border-[#5B5781] focus:ring-2 focus:ring-[#5B5781]/20 outline-none transition-all"}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-stone-400 dark:text-stone-500 font-medium",children:"Semos"})]}),x>0&&n.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm",children:[n.jsx("span",{className:x>h?"text-rose-500":"text-stone-500 dark:text-stone-400",children:x>h?`Insuffisant (max: ${la(h)}S)`:`Reste après transfert: ${la(e.balance-x)}S`}),n.jsx("button",{type:"button",onClick:()=>u(h.toString()),className:"text-[#5B5781] hover:text-[#4a4670] font-medium",children:"Max"})]})]}),n.jsx("div",{className:"flex gap-2",children:[5,10,25,50].filter(v=>v<=h).map(v=>n.jsxs("button",{type:"button",onClick:()=>u(v.toString()),className:`
                flex-1 py-2 rounded-lg text-sm font-medium transition-all
                ${parseFloat(d)===v?"bg-[#5B5781] text-white":"bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-300 hover:bg-stone-200 dark:hover:bg-stone-600"}
              `,children:[v,"S"]},v))}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Motif"}),n.jsx("textarea",{value:c,onChange:v=>f(v.target.value),placeholder:"Ex: Achat plants pépinière, Participation formation...",rows:2,className:"w-full px-4 py-3 bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 placeholder:text-stone-400 dark:placeholder:text-stone-500 resize-none hover:border-[#5B5781]/50 focus:border-[#5B5781] focus:ring-2 focus:ring-[#5B5781]/20 outline-none transition-all"})]}),g&&w&&n.jsx("div",{className:"bg-[#5B5781]/5 dark:bg-[#5B5781]/10 rounded-xl p-4 border border-[#5B5781]/10",children:n.jsxs("p",{className:"text-sm text-stone-600 dark:text-stone-300",children:["Vous allez transférer ",n.jsxs("span",{className:"font-bold text-[#5B5781]",children:[la(x)," Semos"]})," à"," ",n.jsxs("span",{className:"font-medium",children:[w.firstName," ",w.lastName]})]})}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 bg-stone-100 dark:bg-stone-700 text-stone-700 dark:text-stone-300 rounded-xl font-medium hover:bg-stone-200 dark:hover:bg-stone-600 transition-colors",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:!g,className:`
              flex-1 px-4 py-3 rounded-xl font-medium transition-all
              ${g?"bg-gradient-to-r from-[#5B5781] to-[#4a4670] text-white hover:shadow-lg hover:shadow-[#5B5781]/25 active:scale-[0.98]":"bg-stone-200 dark:bg-stone-700 text-stone-400 dark:text-stone-500 cursor-not-allowed"}
            `,children:"Transférer"})]})]})]})}function F0(e){return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:1}).format(e)}const R0=[{value:"cotisation_member",label:"Cotisation membre",icon:"🎫"},{value:"volunteer_work",label:"Travail bénévole",icon:"🌱"},{value:"provider_fee",label:"Fidélisation prestataire",icon:"🤝"},{value:"peer_review",label:"Peer Review",icon:"👁"},{value:"loyalty",label:"Fidélité",icon:"⭐"},{value:"participation",label:"Participation",icon:"🙋"}];function ak(e){switch(e){case"cotisation_member_active":return"🎫";case"cotisation_member_support":return"💚";case"volunteer_hourly":return"⏱";case"provider_fee_percentage":return"%";case"peer_review":return"👁";default:return"•"}}function ik({members:e,wallets:t,rates:r,onEmitSemos:s,onUpdateRate:o}){var P;const[a,i]=E.useState("emit"),[l,d]=E.useState(""),[u,c]=E.useState(""),[f,p]=E.useState("cotisation_member"),[w,m]=E.useState(""),[x,h]=E.useState(null),[y,g]=E.useState(""),j=e.filter(I=>I.status==="active"),v=j.find(I=>I.id===l),N=v?t.find(I=>I.memberId===v.id):null,S=parseFloat(u)||0,A=l&&S>0&&w.trim(),D=I=>{I.preventDefault(),A&&N&&(s==null||s(N.id,S,f,w.trim()),d(""),c(""),m(""))},R=I=>{const T=parseFloat(y);!isNaN(T)&&T>=0&&(o==null||o(I,T)),h(null),g("")};return n.jsxs("div",{className:"bg-white dark:bg-stone-800 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-[#5B5781] to-[#4a4670] px-6 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:"⚙"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-white",children:"Administration Semos"}),n.jsx("p",{className:"text-white/70 text-sm",children:"Émission et configuration des tarifs"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>i("emit"),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all
              ${a==="emit"?"bg-white text-[#5B5781]":"bg-white/10 text-white/80 hover:bg-white/20"}
            `,children:"Émettre des Semos"}),n.jsx("button",{onClick:()=>i("rates"),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all
              ${a==="rates"?"bg-white text-[#5B5781]":"bg-white/10 text-white/80 hover:bg-white/20"}
            `,children:"Tarifs de référence"})]})]}),n.jsx("div",{className:"p-6",children:a==="emit"?n.jsxs("form",{onSubmit:D,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Destinataire"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:l,onChange:I=>d(I.target.value),className:"w-full px-4 py-3 bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 appearance-none cursor-pointer hover:border-[#5B5781]/50 focus:border-[#5B5781] focus:ring-2 focus:ring-[#5B5781]/20 outline-none transition-all",children:[n.jsx("option",{value:"",children:"Sélectionner un membre..."}),j.map(I=>n.jsxs("option",{value:I.id,children:[I.firstName," ",I.lastName]},I.id))]}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-stone-400",children:"▼"})]}),v&&N&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-stone-500 dark:text-stone-400",children:[n.jsx("img",{src:v.avatar,alt:"",className:"w-5 h-5 rounded-full"}),n.jsxs("span",{children:["Solde actuel: ",F0(N.balance),"S"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Motif d'émission"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:R0.map(I=>n.jsxs("button",{type:"button",onClick:()=>p(I.value),className:`
                      p-3 rounded-xl text-left transition-all border
                      ${f===I.value?"bg-[#5B5781]/10 border-[#5B5781] text-[#5B5781]":"bg-stone-50 dark:bg-stone-900 border-stone-200 dark:border-stone-700 text-stone-600 dark:text-stone-400 hover:border-stone-300 dark:hover:border-stone-600"}
                    `,children:[n.jsx("span",{className:"text-lg block mb-1",children:I.icon}),n.jsx("span",{className:"text-xs font-medium",children:I.label})]},I.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Montant à émettre"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:u,onChange:I=>c(I.target.value),placeholder:"0",min:"0.1",step:"0.1",className:"w-full px-4 py-3 pr-16 bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 text-2xl font-bold tabular-nums placeholder:text-stone-300 dark:placeholder:text-stone-600 hover:border-[#5B5781]/50 focus:border-[#5B5781] focus:ring-2 focus:ring-[#5B5781]/20 outline-none transition-all"}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-stone-400 dark:text-stone-500 font-medium",children:"Semos"})]}),n.jsx("div",{className:"flex gap-2 mt-2",children:r.slice(0,4).map(I=>n.jsxs("button",{type:"button",onClick:()=>c(I.amount.toString()),className:"px-3 py-1.5 bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-300 rounded-lg text-xs hover:bg-stone-200 dark:hover:bg-stone-600 transition-colors",children:[I.amount,I.type.includes("percentage")?"%":"S"]},I.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Description"}),n.jsx("textarea",{value:w,onChange:I=>m(I.target.value),placeholder:"Ex: Cotisation annuelle membre actif, Participation chantier...",rows:2,className:"w-full px-4 py-3 bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-700 rounded-xl text-stone-900 dark:text-stone-100 placeholder:text-stone-400 dark:placeholder:text-stone-500 resize-none hover:border-[#5B5781]/50 focus:border-[#5B5781] focus:ring-2 focus:ring-[#5B5781]/20 outline-none transition-all"})]}),A&&v&&n.jsx("div",{className:"bg-[#AFBD00]/10 rounded-xl p-4 border border-[#AFBD00]/20",children:n.jsxs("p",{className:"text-sm text-stone-600 dark:text-stone-300",children:["Création de ",n.jsxs("span",{className:"font-bold text-[#AFBD00]",children:[F0(S)," Semos"]})," pour"," ",n.jsxs("span",{className:"font-medium",children:[v.firstName," ",v.lastName]}),n.jsxs("span",{className:"text-stone-400",children:[" (",(P=R0.find(I=>I.value===f))==null?void 0:P.label,")"]})]})}),n.jsx("button",{type:"submit",disabled:!A,className:`
                w-full px-4 py-3 rounded-xl font-medium transition-all
                ${A?"bg-gradient-to-r from-[#AFBD00] to-[#8a9600] text-white hover:shadow-lg hover:shadow-[#AFBD00]/25 active:scale-[0.98]":"bg-stone-200 dark:bg-stone-700 text-stone-400 dark:text-stone-500 cursor-not-allowed"}
              `,children:"✦ Émettre des Semos"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mb-4",children:"Tarifs de référence pour les émissions automatiques et les calculs."}),r.map(I=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-stone-50 dark:bg-stone-900 rounded-xl border border-stone-200 dark:border-stone-700",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#5B5781]/10 flex items-center justify-center text-[#5B5781] font-medium",children:ak(I.type)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-stone-900 dark:text-stone-100",children:I.description}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:I.type.replace(/_/g," ")})]})]}),x===I.id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",value:y,onChange:T=>g(T.target.value),className:"w-20 px-2 py-1 text-right font-bold text-[#5B5781] bg-white dark:bg-stone-800 border border-[#5B5781] rounded-lg outline-none",autoFocus:!0}),n.jsx("button",{onClick:()=>R(I.id),className:"p-2 bg-[#5B5781] text-white rounded-lg hover:bg-[#4a4670]",children:"✓"}),n.jsx("button",{onClick:()=>h(null),className:"p-2 bg-stone-200 dark:bg-stone-700 text-stone-600 dark:text-stone-300 rounded-lg hover:bg-stone-300 dark:hover:bg-stone-600",children:"✕"})]}):n.jsxs("button",{onClick:()=>{h(I.id),g(I.amount.toString())},className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-lg hover:border-[#5B5781]/50 transition-colors group",children:[n.jsxs("span",{className:"text-lg font-bold text-[#5B5781] tabular-nums",children:[I.amount,n.jsx("span",{className:"text-sm font-normal ml-0.5",children:I.type.includes("percentage")?"%":"S"})]}),n.jsx("span",{className:"text-stone-300 dark:text-stone-600 group-hover:text-[#5B5781]",children:"✎"})]})]},I.id))]})})]})}function da(e){return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:1}).format(e)}function lk({members:e,wallets:t,transactions:r,emissions:s,rates:o,currentMemberId:a,onTransferSemos:i,onEmitSemos:l,onUpdateRate:d,onViewTransaction:u}){const[c,f]=E.useState(!1),[p,w]=E.useState(!1),[m,x]=E.useState("all"),h=e.find(P=>P.id===a),y=h?t.find(P=>P.memberId===h.id):null;if(!h||!y)return n.jsx("div",{className:"p-8 text-center text-stone-500",children:"Membre ou portefeuille non trouvé"});const g=sk(y.id,r,s,e,t),j=g.filter(P=>{switch(m){case"incoming":return P.type==="transaction"&&P.isIncoming;case"outgoing":return P.type==="transaction"&&!P.isIncoming;case"emissions":return P.type==="emission";default:return!0}}),v=g.filter(P=>P.type==="transaction"&&P.isIncoming).reduce((P,I)=>P+I.amount,0),N=g.filter(P=>P.type==="transaction"&&!P.isIncoming).reduce((P,I)=>P+Math.abs(I.amount),0),S=g.filter(P=>P.type==="emission").reduce((P,I)=>P+I.amount,0),A=y.ceiling-y.floor,D=(y.balance-y.floor)/A*100,R=(P,I,T)=>{i==null||i(P,I,T),f(!1)};return n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-[#5B5781] to-[#4a4670] flex items-center justify-center text-white text-2xl shadow-lg shadow-[#5B5781]/20",children:"Ⓢ"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-stone-900 dark:text-stone-100",children:"Mon Portefeuille Semos"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Gérez vos Semos et consultez votre historique"})]})]})}),n.jsxs("div",{className:"relative mb-8 overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#5B5781] via-[#5B5781] to-[#4a4670] rounded-3xl"}),n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),n.jsxs("div",{className:"relative p-6 sm:p-8 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:h.avatar,alt:"",className:"w-14 h-14 rounded-2xl border-2 border-white/20"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white/60 text-sm",children:"Portefeuille de"}),n.jsxs("p",{className:"font-semibold text-lg",children:[h.firstName," ",h.lastName]})]})]}),h.isAdmin&&n.jsxs("button",{onClick:()=>w(!p),className:`
                  px-4 py-2 rounded-xl text-sm font-medium transition-all flex items-center gap-2
                  ${p?"bg-white text-[#5B5781]":"bg-white/20 text-white hover:bg-white/30"}
                `,children:[n.jsx("span",{children:"⚙"}),n.jsx("span",{className:"hidden sm:inline",children:"Admin"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Solde actuel"}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-5xl sm:text-6xl font-bold tracking-tight",children:da(y.balance)}),n.jsx("span",{className:"text-2xl text-white/70 font-light",children:"Semos"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-[#AFBD00] to-[#c8d630] rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(100,Math.max(0,D))}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-white/50 mt-2",children:[n.jsxs("span",{children:["Plancher: ",y.floor,"S"]}),n.jsxs("span",{children:["Plafond: ",y.ceiling,"S"]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[n.jsxs("p",{className:"text-emerald-300 font-bold text-lg",children:["+",da(v),"S"]}),n.jsx("p",{className:"text-white/50 text-xs",children:"Reçus"})]}),n.jsxs("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[n.jsxs("p",{className:"text-rose-300 font-bold text-lg",children:["-",da(N),"S"]}),n.jsx("p",{className:"text-white/50 text-xs",children:"Envoyés"})]}),n.jsxs("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[n.jsxs("p",{className:"text-[#AFBD00] font-bold text-lg",children:["+",da(S),"S"]}),n.jsx("p",{className:"text-white/50 text-xs",children:"Émis"})]})]}),n.jsxs("button",{onClick:()=>f(!c),className:`
              w-full py-4 rounded-xl font-semibold text-lg transition-all flex items-center justify-center gap-2
              ${c?"bg-white/20 text-white":"bg-white text-[#5B5781] hover:shadow-xl hover:shadow-black/20 active:scale-[0.98]"}
            `,children:[n.jsx("span",{className:"text-xl",children:"↑"}),c?"Annuler":"Transférer des Semos"]})]})]}),c&&n.jsx("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-300",children:n.jsx(ok,{currentWallet:y,currentMember:h,members:e,wallets:t,onTransfer:R,onCancel:()=>f(!1)})}),p&&h.isAdmin&&n.jsx("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-300",children:n.jsx(ik,{members:e,wallets:t,rates:o,onEmitSemos:l,onUpdateRate:d})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-900 dark:text-stone-100",children:"Historique des transactions"}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:[{key:"all",label:"Tout",count:g.length},{key:"incoming",label:"Reçus",count:g.filter(P=>P.type==="transaction"&&P.isIncoming).length},{key:"outgoing",label:"Envoyés",count:g.filter(P=>P.type==="transaction"&&!P.isIncoming).length},{key:"emissions",label:"Émissions",count:g.filter(P=>P.type==="emission").length}].map(({key:P,label:I,count:T})=>n.jsxs("button",{onClick:()=>x(P),className:`
                  px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all
                  ${m===P?"bg-[#5B5781] text-white":"bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-400 hover:bg-stone-200 dark:hover:bg-stone-700"}
                `,children:[I,n.jsx("span",{className:`ml-1.5 text-xs ${m===P?"text-white/70":"text-stone-400 dark:text-stone-500"}`,children:T})]},P))})]}),j.length===0?n.jsxs("div",{className:"bg-stone-50 dark:bg-stone-800/50 rounded-2xl p-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-2xl bg-stone-200 dark:bg-stone-700 flex items-center justify-center text-3xl mx-auto mb-4",children:m==="emissions"?"✦":m==="incoming"?"↓":m==="outgoing"?"↑":"Ⓢ"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 font-medium",children:m==="all"?"Aucune transaction pour le moment":m==="emissions"?"Aucune émission reçue":m==="incoming"?"Aucun transfert reçu":"Aucun transfert envoyé"}),n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm mt-1",children:"Les transactions apparaîtront ici"})]}):n.jsx("div",{className:"space-y-3",children:j.map(P=>n.jsx(rk,{activity:P,onClick:()=>u==null?void 0:u(P.id)},P.id))})]}),n.jsx("div",{className:"mt-12 p-6 bg-gradient-to-br from-stone-50 to-stone-100 dark:from-stone-800/50 dark:to-stone-900/50 rounded-2xl border border-stone-200 dark:border-stone-700",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#AFBD00]/20 flex items-center justify-center text-[#AFBD00] text-xl shrink-0",children:"✦"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-stone-900 dark:text-stone-100 mb-1",children:"Qu'est-ce que le Semos ?"}),n.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400 leading-relaxed",children:"Le Semos est la monnaie interne du Lab Semisto. Elle permet de valoriser les contributions bénévoles, de faciliter les échanges entre membres, et de renforcer les liens de coopération. Chaque membre dispose d'un plancher et d'un plafond personnalisés."})]})]})})]})}const dk=[{id:"dashboard",label:"Dashboard"},{id:"shapeup",label:"Shape Up"},{id:"members",label:"Membres"},{id:"semos",label:"Semos"},{id:"timesheets",label:"Timesheets"},{id:"calendar",label:"Calendrier"}],ck=["project_meeting","stakeholder_meeting","design_day","guild_meeting","betting","semisto_day","semos_fest","training"],uk=["design","formation","administratif","coordination","communication"],mk=["invoice","semos"],pk=["2-weeks","3-weeks","6-weeks"];async function he(e,t={}){const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!r.ok){let s=`${r.status} ${r.statusText}`;try{const o=await r.json();o!=null&&o.error&&(s=o.error)}catch{}throw new Error(s)}return r.status===204?null:r.json()}function $0(e){const t=new Date(e),r=s=>`${s}`.padStart(2,"0");return`${t.getFullYear()}-${r(t.getMonth()+1)}-${r(t.getDate())}T${r(t.getHours())}:${r(t.getMinutes())}`}function fk({title:e,fields:t,values:r,onChange:s,onSubmit:o,onClose:a,busy:i}){return n.jsx("div",{style:jf,children:n.jsxs("div",{style:kf,children:[n.jsx("h2",{style:{marginTop:0},children:e}),n.jsxs("form",{onSubmit:l=>{l.preventDefault(),o()},style:{display:"grid",gap:"0.75rem"},children:[t.map(l=>n.jsxs("label",{style:{display:"grid",gap:"0.35rem"},children:[n.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem"},children:l.label}),l.type==="textarea"&&n.jsx("textarea",{rows:l.rows||3,value:r[l.name]??"",onChange:d=>s(l.name,d.target.value),style:El,required:l.required}),l.type==="select"&&n.jsx("select",{value:r[l.name]??"",onChange:d=>s(l.name,d.target.value),style:El,required:l.required,children:(l.options||[]).map(d=>n.jsx("option",{value:d,children:d},d))}),l.type==="checkbox"&&n.jsx("input",{type:"checkbox",checked:!!r[l.name],onChange:d=>s(l.name,d.target.checked),style:{width:20,height:20}}),(!l.type||["text","email","number","date","datetime-local"].includes(l.type))&&n.jsx("input",{type:l.type||"text",value:r[l.name]??"",onChange:d=>s(l.name,d.target.value),style:El,required:l.required})]},l.name)),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.6rem",marginTop:"0.3rem"},children:[n.jsx("button",{type:"button",onClick:a,style:wf,children:"Annuler"}),n.jsx("button",{type:"submit",style:gk,disabled:i,children:i?"En cours...":"Enregistrer"})]})]})]})})}function xk({title:e,data:t,onClose:r}){return n.jsx("div",{style:jf,children:n.jsxs("div",{style:kf,children:[n.jsx("h2",{style:{marginTop:0},children:e}),n.jsx("pre",{style:vk,children:JSON.stringify(t,null,2)}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{type:"button",onClick:r,style:wf,children:"Fermer"})})]})})}function hk({milestone:e,currentMemberId:t}){const[r,s]=E.useState("dashboard"),[o,a]=E.useState(!0),[i,l]=E.useState(!1),[d,u]=E.useState(null),[c,f]=E.useState(null),[p,w]=E.useState(null),[m,x]=E.useState(null),h=E.useCallback(async()=>{a(!0),u(null);try{const O=await he("/api/v1/lab/overview");f(O)}catch(O){u(O.message)}finally{a(!1)}},[]);E.useEffect(()=>{h()},[h]);const y=(c==null?void 0:c.members)||[],g=(c==null?void 0:c.pitches)||[],j=(c==null?void 0:c.events)||[],v=(c==null?void 0:c.scopes)||[],N=(c==null?void 0:c.timesheets)||[],S=E.useMemo(()=>{var O;return t&&y.some(B=>B.id===t)?t:((O=y[0])==null?void 0:O.id)||""},[t,y]),A=E.useMemo(()=>y.find(O=>O.id===S),[y,S]),D=E.useCallback(async O=>{l(!0),u(null);try{await O(),await h()}catch(B){u(B.message)}finally{l(!1)}},[h]),R=E.useCallback(O=>{w({...O,values:{...O.initialValues||{}}})},[]),P=E.useCallback((O,B)=>{w(z=>({...z,values:{...z.values,[O]:B}}))},[]),I=E.useCallback(async()=>{p&&(await D(()=>p.onSubmit(p.values)),w(null))},[p,D]),T=E.useCallback(async(O,B)=>{l(!0),u(null);try{const z=await he(B);x({title:O,data:z})}catch(z){u(z.message)}finally{l(!1)}},[]),W=E.useMemo(()=>({onCreatePitch:()=>R({title:"Créer un pitch",fields:[{name:"title",label:"Titre",required:!0},{name:"problem",label:"Problem",type:"textarea",required:!0},{name:"solution",label:"Solution",type:"textarea",required:!0},{name:"appetite",label:"Appetite",type:"select",options:pk}],initialValues:{appetite:"6-weeks"},onSubmit:O=>he("/api/v1/lab/pitches",{method:"POST",body:JSON.stringify({title:O.title,problem:O.problem,solution:O.solution,appetite:O.appetite,author_id:S,status:"raw",rabbit_holes:[],no_gos:[]})})}),onEditPitch:O=>{const B=g.find(z=>z.id===O);B&&R({title:"Modifier le pitch",fields:[{name:"title",label:"Titre",required:!0}],initialValues:{title:B.title},onSubmit:z=>he(`/api/v1/lab/pitches/${O}`,{method:"PATCH",body:JSON.stringify({title:z.title})})})},onDeletePitch:O=>D(async()=>{window.confirm("Supprimer ce pitch ?")&&await he(`/api/v1/lab/pitches/${O}`,{method:"DELETE"})}),onViewPitch:O=>T("Détail pitch",`/api/v1/lab/pitches/${O}`),onPlaceBet:(O,B)=>D(async()=>{const z=((c==null?void 0:c.cycles)||[]).find(J=>J.status==="active"||J.status==="cooldown");if(!z)throw new Error("Aucun cycle actif/cooldown");await he("/api/v1/lab/bets",{method:"POST",body:JSON.stringify({pitch_id:O,cycle_id:z.id,team_member_ids:B,placed_by_id:S,status:"pending"})})}),onRemoveBet:O=>D(()=>he(`/api/v1/lab/bets/${O}`,{method:"DELETE"})),onCreateScope:O=>R({title:"Créer un scope",fields:[{name:"name",label:"Nom",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"hill_position",label:"Position Hill (0-100)",type:"number"}],initialValues:{hill_position:0},onSubmit:B=>he(`/api/v1/lab/pitches/${O}/scopes`,{method:"POST",body:JSON.stringify({name:B.name,description:B.description||"",hill_position:Number(B.hill_position||0)})})}),onUpdateHillPosition:(O,B)=>D(()=>he(`/api/v1/lab/scopes/${O}/hill-position`,{method:"PATCH",body:JSON.stringify({position:B})})),onAddTask:O=>R({title:"Ajouter une tâche",fields:[{name:"title",label:"Titre",required:!0},{name:"is_nice_to_have",label:"Nice to have",type:"checkbox"}],initialValues:{is_nice_to_have:!1},onSubmit:B=>he(`/api/v1/lab/scopes/${O}/tasks`,{method:"POST",body:JSON.stringify({title:B.title,is_nice_to_have:!!B.is_nice_to_have,completed:!1})})}),onToggleTask:(O,B)=>D(()=>he(`/api/v1/lab/tasks/${B}/toggle`,{method:"PATCH"})),onAddChowderItem:O=>R({title:"Ajouter un chowder item",fields:[{name:"title",label:"Titre",required:!0}],onSubmit:B=>he(`/api/v1/lab/pitches/${O}/chowder-items`,{method:"POST",body:JSON.stringify({title:B.title,created_by_id:S})})}),onMoveChowderToScope:(O,B)=>D(()=>he("/api/v1/lab/chowder-items/move-to-scope",{method:"POST",body:JSON.stringify({chowder_item_id:O,scope_id:B})})),onDeleteChowderItem:O=>D(async()=>{window.confirm("Supprimer cet item chowder ?")&&await he(`/api/v1/lab/chowder-items/${O}`,{method:"DELETE"})}),onViewScope:O=>{const B=v.find(z=>z.id===O);B&&x({title:"Détail scope",data:B})},onAddIdea:(O,B)=>D(()=>he("/api/v1/lab/idea-items",{method:"POST",body:JSON.stringify({idea_list_id:O,title:B})})),onVoteIdea:(O,B)=>D(()=>he("/api/v1/lab/idea-items/vote",{method:"POST",body:JSON.stringify({idea_id:B})})),onAddMember:()=>R({title:"Ajouter un membre",fields:[{name:"first_name",label:"Prénom",required:!0},{name:"last_name",label:"Nom",required:!0},{name:"email",label:"Email",type:"email",required:!0},{name:"roles_csv",label:"Roles (csv)",required:!0},{name:"is_admin",label:"Admin",type:"checkbox"}],initialValues:{roles_csv:"designer",is_admin:!1},onSubmit:O=>he("/api/v1/lab/members",{method:"POST",body:JSON.stringify({first_name:O.first_name,last_name:O.last_name,email:O.email,avatar:"",status:"active",is_admin:!!O.is_admin,joined_at:new Date().toISOString().slice(0,10),roles:O.roles_csv.split(",").map(B=>B.trim()).filter(Boolean),guild_ids:[]})})}),onEditMember:O=>{const B=y.find(z=>z.id===O);B&&R({title:"Modifier le membre",fields:[{name:"first_name",label:"Prénom",required:!0}],initialValues:{first_name:B.firstName},onSubmit:z=>he(`/api/v1/lab/members/${O}`,{method:"PATCH",body:JSON.stringify({first_name:z.first_name})})})},onViewMember:O=>T("Détail membre",`/api/v1/lab/members/${O}`),onTransferSemos:(O,B,z)=>D(()=>{var L;const J=(L=((c==null?void 0:c.wallets)||[]).find(V=>V.memberId===S))==null?void 0:L.id;if(!J)throw new Error("Portefeuille courant introuvable");return he("/api/v1/lab/semos/transfer",{method:"POST",body:JSON.stringify({from_wallet_id:J,to_wallet_id:O,amount:B,description:z})})}),onEmitSemos:(O,B,z,J)=>D(()=>he("/api/v1/lab/semos/emissions",{method:"POST",body:JSON.stringify({wallet_id:O,amount:B,reason:z,description:J,created_by_id:S})})),onUpdateRate:(O,B)=>D(()=>he(`/api/v1/lab/semos/rates/${O}`,{method:"PATCH",body:JSON.stringify({amount:B})})),onCreateTimesheet:()=>R({title:"Nouvelle prestation",fields:[{name:"date",label:"Date",type:"date",required:!0},{name:"hours",label:"Heures",type:"number",required:!0},{name:"payment_type",label:"Type paiement",type:"select",options:mk},{name:"category",label:"Catégorie",type:"select",options:uk},{name:"description",label:"Description",type:"textarea",required:!0},{name:"kilometers",label:"Km",type:"number"}],initialValues:{date:new Date().toISOString().slice(0,10),hours:1,payment_type:"invoice",category:"design",kilometers:0},onSubmit:O=>he("/api/v1/lab/timesheets",{method:"POST",body:JSON.stringify({member_id:S,date:O.date,hours:Number(O.hours),payment_type:O.payment_type,category:O.category,description:O.description,invoiced:!1,kilometers:Number(O.kilometers||0)})})}),onEditTimesheet:O=>{const B=N.find(z=>z.id===O);B&&R({title:"Modifier la prestation",fields:[{name:"description",label:"Description",type:"textarea",required:!0}],initialValues:{description:B.description},onSubmit:z=>he(`/api/v1/lab/timesheets/${O}`,{method:"PATCH",body:JSON.stringify({description:z.description})})})},onDeleteTimesheet:O=>D(async()=>{window.confirm("Supprimer cette prestation ?")&&await he(`/api/v1/lab/timesheets/${O}`,{method:"DELETE"})}),onMarkInvoiced:O=>D(()=>he(`/api/v1/lab/timesheets/${O}/mark-invoiced`,{method:"PATCH"})),onCreateEvent:()=>{const O=new Date,B=new Date(O.getTime()+60*60*1e3);R({title:"Créer un événement",fields:[{name:"title",label:"Titre",required:!0},{name:"event_type",label:"Type",type:"select",options:ck},{name:"start_date",label:"Début",type:"datetime-local",required:!0},{name:"end_date",label:"Fin",type:"datetime-local",required:!0},{name:"location",label:"Lieu"},{name:"description",label:"Description",type:"textarea"}],initialValues:{event_type:"project_meeting",start_date:$0(O),end_date:$0(B),location:"Lab",description:""},onSubmit:z=>he("/api/v1/lab/events",{method:"POST",body:JSON.stringify({title:z.title,event_type:z.event_type,start_date:new Date(z.start_date).toISOString(),end_date:new Date(z.end_date).toISOString(),location:z.location||"",description:z.description||"",attendee_ids:[S]})})})},onEditEvent:O=>{const B=j.find(z=>z.id===O);B&&R({title:"Modifier l'événement",fields:[{name:"title",label:"Titre",required:!0}],initialValues:{title:B.title},onSubmit:z=>he(`/api/v1/lab/events/${O}`,{method:"PATCH",body:JSON.stringify({title:z.title})})})},onDeleteEvent:O=>D(async()=>{window.confirm("Supprimer cet événement ?")&&await he(`/api/v1/lab/events/${O}`,{method:"DELETE"})}),onViewEvent:O=>T("Détail événement",`/api/v1/lab/events/${O}`),onViewCycle:O=>{const B=((c==null?void 0:c.cycles)||[]).find(z=>z.id===O);B&&x({title:"Détail cycle",data:B})},onViewGuild:O=>{const B=((c==null?void 0:c.guilds)||[]).find(z=>z.id===O);B&&x({title:"Détail guilde",data:B})}}),[S,c,j,y,R,g,D,v,T,N]);return o?n.jsxs("main",{style:{padding:"2rem",fontFamily:"Inter, system-ui, sans-serif"},children:[n.jsx("h1",{children:e}),n.jsx("p",{children:"Chargement..."})]}):d||!c?n.jsxs("main",{style:{padding:"2rem",fontFamily:"Inter, system-ui, sans-serif"},children:[n.jsx("h1",{children:e}),n.jsxs("p",{style:{color:"#b91c1c"},children:["Erreur: ",d||"Données indisponibles"]}),n.jsx("button",{type:"button",onClick:h,children:"Réessayer"})]}):n.jsxs("main",{children:[n.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #e7e5e4",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[dk.map(O=>n.jsx("button",{type:"button",onClick:()=>s(O.id),style:{padding:"0.45rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #d6d3d1",background:r===O.id?"#5B5781":"#ffffff",color:r===O.id?"#ffffff":"#1c1917",fontWeight:600,cursor:"pointer"},children:O.label},O.id)),n.jsx("button",{type:"button",onClick:h,disabled:i,style:{marginLeft:"auto",padding:"0.45rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #d6d3d1",background:"#fff"},children:i?"Sync...":"Rafraîchir"})]}),d&&n.jsx("div",{style:{padding:"0.75rem 1.25rem",background:"#fee2e2",color:"#7f1d1d",borderBottom:"1px solid #fecaca"},children:d}),r==="dashboard"&&n.jsx(gj,{members:c.members,cycles:c.cycles,guilds:c.guilds,pitches:c.pitches,bets:c.bets,scopes:c.scopes,events:c.events,wallets:c.wallets,semosTransactions:c.semosTransactions,semosEmissions:c.semosEmissions,currentMemberId:S,onViewPitch:W.onViewPitch,onViewScope:W.onViewScope,onViewEvent:W.onViewEvent,onViewCycle:W.onViewCycle,onCreateEvent:W.onCreateEvent,onViewMember:W.onViewMember}),r==="shapeup"&&n.jsx(Cj,{members:c.members,cycles:c.cycles,pitches:c.pitches,bets:c.bets,scopes:c.scopes,chowderItems:c.chowderItems,ideaLists:c.ideaLists,hillChartSnapshots:c.hillChartSnapshots,currentMemberId:S,onCreatePitch:W.onCreatePitch,onViewPitch:W.onViewPitch,onEditPitch:W.onEditPitch,onDeletePitch:W.onDeletePitch,onPlaceBet:W.onPlaceBet,onRemoveBet:W.onRemoveBet,onCreateScope:W.onCreateScope,onUpdateHillPosition:W.onUpdateHillPosition,onAddTask:W.onAddTask,onToggleTask:W.onToggleTask,onAddChowderItem:W.onAddChowderItem,onMoveChowderToScope:W.onMoveChowderToScope,onDeleteChowderItem:W.onDeleteChowderItem,onViewScope:W.onViewScope,onAddIdea:W.onAddIdea,onVoteIdea:W.onVoteIdea}),r==="members"&&n.jsx(Yj,{members:c.members,guilds:c.guilds,wallets:c.wallets,currentMemberId:S,onAddMember:W.onAddMember,onViewMember:W.onViewMember,onEditMember:W.onEditMember}),r==="semos"&&n.jsx(lk,{members:c.members,wallets:c.wallets,transactions:c.semosTransactions,emissions:c.semosEmissions,rates:c.semosRates,currentMemberId:S,onTransferSemos:W.onTransferSemos,onEmitSemos:W.onEmitSemos,onUpdateRate:W.onUpdateRate}),r==="timesheets"&&n.jsx(qj,{timesheets:c.timesheets,members:c.members,guilds:c.guilds,currentMemberId:S,isAdmin:!!(A!=null&&A.isAdmin),onCreateTimesheet:W.onCreateTimesheet,onEditTimesheet:W.onEditTimesheet,onDeleteTimesheet:W.onDeleteTimesheet,onMarkInvoiced:W.onMarkInvoiced,onViewMember:W.onViewMember,onViewGuild:W.onViewGuild}),r==="calendar"&&n.jsx(Tj,{events:c.events,cycles:c.cycles,members:c.members,currentMemberId:S,onCreateEvent:W.onCreateEvent,onViewEvent:W.onViewEvent,onEditEvent:W.onEditEvent,onDeleteEvent:W.onDeleteEvent}),p&&n.jsx(fk,{title:p.title,fields:p.fields,values:p.values,onChange:P,onSubmit:I,onClose:()=>w(null),busy:i}),m&&n.jsx(xk,{title:m.title,data:m.data,onClose:()=>x(null)})]})}const jf={position:"fixed",inset:0,background:"rgba(0,0,0,0.42)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:80},kf={background:"#fff",width:"min(680px, 100%)",maxHeight:"90vh",overflow:"auto",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 20px 48px rgba(0,0,0,0.25)"},El={border:"1px solid #d6d3d1",borderRadius:"0.5rem",padding:"0.55rem 0.65rem",fontSize:"0.95rem"},gk={border:"1px solid #5B5781",background:"#5B5781",color:"#fff",borderRadius:"0.5rem",padding:"0.5rem 0.75rem",fontWeight:600,cursor:"pointer"},wf={border:"1px solid #d6d3d1",background:"#fff",color:"#292524",borderRadius:"0.5rem",padding:"0.5rem 0.75rem",fontWeight:500,cursor:"pointer"},vk={background:"#fafaf9",border:"1px solid #e7e5e4",borderRadius:"0.5rem",padding:"0.75rem",maxHeight:"58vh",overflow:"auto"},yk=Object.freeze(Object.defineProperty({__proto__:null,default:hk},Symbol.toStringTag,{value:"Module"})),bk=[{id:"trees",label:"Arbres"},{id:"shrubs",label:"Arbustes"},{id:"climbers",label:"Grimpantes"},{id:"herbaceous",label:"Herbacées"},{id:"groundCover",label:"Couvre-sols"},{id:"aquatic",label:"Aquatique"}],jk={genus:{letter:"G",color:"bg-[#5B5781] text-white",inPaletteColor:"bg-[#5B5781] text-white"},species:{letter:"E",color:"bg-[#AFBD00] text-white",inPaletteColor:"bg-[#AFBD00] text-white ring-2 ring-[#AFBD00]/30"},variety:{letter:"V",color:"bg-amber-500 text-white",inPaletteColor:"bg-amber-500 text-white ring-2 ring-amber-500/30"}};function kk({result:e,isFocused:t=!1,isInPalette:r=!1,onSelect:s,onAddToPalette:o}){const[a,i]=E.useState(!1),[l,d]=E.useState(!1),u=jk[e.type],c=p=>{p.stopPropagation(),r||i(!a)},f=p=>{o==null||o(p),i(!1),d(!0),setTimeout(()=>d(!1),600)};return n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{onClick:s,className:`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-all duration-150 ${r?"bg-[#AFBD00]/8 dark:bg-[#AFBD00]/15":t?"bg-[#5B5781]/10 dark:bg-[#AFBD00]/10":"hover:bg-stone-100 dark:hover:bg-stone-800/50"} ${l?"scale-[1.01]":""}`,children:[n.jsx("span",{className:`shrink-0 w-5 h-5 flex items-center justify-center text-[10px] font-bold rounded transition-all duration-200 ${r?u.inPaletteColor:u.color} ${l?"scale-125":""}`,children:u.letter}),n.jsxs("span",{className:"flex-1 min-w-0 flex items-baseline gap-2 truncate",children:[n.jsx("span",{className:`font-medium italic truncate transition-colors ${r?"text-[#AFBD00] dark:text-[#AFBD00]":"text-stone-900 dark:text-stone-100"}`,children:e.latinName}),e.commonName&&n.jsx("span",{className:"text-sm text-stone-400 dark:text-stone-500 truncate hidden sm:inline",children:e.commonName})]}),o&&n.jsx("button",{onClick:c,className:`shrink-0 w-7 h-7 flex items-center justify-center rounded transition-all duration-150 ${r?"bg-[#AFBD00] text-white cursor-default":a?"bg-[#AFBD00] text-white":"text-stone-300 dark:text-stone-600 hover:text-[#AFBD00] hover:bg-[#AFBD00]/10 opacity-0 group-hover:opacity-100"}`,"aria-label":r?"Dans la palette":"Ajouter à la palette",disabled:r,children:r?n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),n.jsx("svg",{className:"w-4 h-4 text-stone-300 dark:text-stone-600 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),a&&o&&!r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),n.jsx("div",{className:"absolute right-12 top-0 z-20 py-1 bg-white dark:bg-stone-800 rounded-lg shadow-xl border border-stone-200 dark:border-stone-700 animate-in fade-in zoom-in-95 duration-100",children:bk.map(p=>n.jsx("button",{onClick:w=>{w.stopPropagation(),f(p.id)},className:"w-full px-3 py-1.5 text-left text-sm text-stone-700 dark:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors whitespace-nowrap",children:p.label},p.id))})]})]})}function gn({label:e,options:t,selected:r,onChange:s,icon:o}){const a=i=>{r.includes(i)?s(r.filter(l=>l!==i)):s([...r,i])};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-stone-700 dark:text-stone-300",children:[o,e]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(i=>{const l=r.includes(i.id);return n.jsx("button",{onClick:()=>a(i.id),className:`px-3 py-1.5 text-sm rounded-lg transition-all duration-200 ${l?"bg-[#5B5781] text-white shadow-md shadow-[#5B5781]/20":"bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-400 hover:bg-stone-200 dark:hover:bg-stone-700"}`,children:i.label},i.id)})})]})}function wk({filterOptions:e,filters:t,showAdvanced:r,onShowAdvancedChange:s,onFilterChange:o}){return n.jsxs("div",{className:"mt-4 p-5 bg-white dark:bg-stone-900 rounded-2xl shadow-lg border border-stone-200/50 dark:border-stone-800/50 animate-in fade-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"space-y-5",children:[n.jsx(gn,{label:"Type",options:e.types,selected:t.types,onChange:a=>o("types",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),n.jsx(gn,{label:"Exposition",options:e.exposures,selected:t.exposures,onChange:a=>o("exposures",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),n.jsx(gn,{label:"Rusticité",options:e.hardinessZones,selected:t.hardinessZones,onChange:a=>o("hardinessZones",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]}),n.jsxs("button",{onClick:()=>s(!r),className:"w-full mt-5 pt-4 border-t border-stone-200 dark:border-stone-800 flex items-center justify-center gap-2 text-sm font-medium text-stone-500 hover:text-stone-700 dark:hover:text-stone-300 transition-colors",children:[r?"Moins de filtres":"Plus de filtres",n.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&n.jsxs("div",{className:"mt-5 pt-5 border-t border-stone-200 dark:border-stone-800 space-y-5 animate-in fade-in slide-in-from-top-2 duration-300",children:[n.jsx(gn,{label:"Parties comestibles",options:e.edibleParts,selected:t.edibleParts,onChange:a=>o("edibleParts",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx(gn,{label:"Intérêts",options:e.interests,selected:t.interests,onChange:a=>o("interests",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),n.jsx(gn,{label:"Indigène",options:e.europeanCountries.slice(0,10),selected:t.nativeCountries,onChange:a=>o("nativeCountries",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx(gn,{label:"Type de sol",options:e.soilTypes,selected:t.soilTypes,onChange:a=>o("soilTypes",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),n.jsx(gn,{label:"Humidité du sol",options:e.soilMoistures,selected:t.soilMoisture,onChange:a=>o("soilMoisture",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),n.jsx(gn,{label:"Besoins en arrosage",options:e.wateringNeeds,selected:t.wateringNeed,onChange:a=>o("wateringNeed",a),icon:n.jsx("svg",{className:"w-4 h-4 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]})]})}function Nk({filterOptions:e,results:t,filters:r,paletteItemIds:s=[],onSearchChange:o,onFiltersChange:a,onResultSelect:i,onAddToPalette:l}){const[d,u]=E.useState(!1),[c,f]=E.useState(!1),[p,w]=E.useState(-1),m=E.useRef(null),x=E.useRef(null),h=r.query||[r.types.length,r.exposures.length,r.hardinessZones.length,r.edibleParts.length,r.interests.length,r.nativeCountries.length,r.soilTypes.length,r.soilMoisture.length,r.wateringNeed.length].some(v=>v>0),y=[r.types.length,r.exposures.length,r.hardinessZones.length,r.edibleParts.length,r.interests.length,r.nativeCountries.length,r.soilTypes.length,r.soilMoisture.length,r.wateringNeed.length].reduce((v,N)=>v+N,0);E.useEffect(()=>{const v=N=>{var S;if(N.key==="ArrowDown")N.preventDefault(),w(A=>Math.min(A+1,t.length-1));else if(N.key==="ArrowUp")N.preventDefault(),w(A=>Math.max(A-1,-1));else if(N.key==="Enter"&&p>=0){N.preventDefault();const A=t[p];i==null||i(A.id,A.type)}else N.key==="Escape"&&((S=m.current)==null||S.blur(),u(!1))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[p,t,i]),E.useEffect(()=>{w(-1)},[t]),E.useEffect(()=>{var v;p>=0&&x.current&&((v=x.current.querySelectorAll("[data-result-item]")[p])==null||v.scrollIntoView({block:"nearest"}))},[p]);const g=(v,N)=>{a==null||a({...r,[v]:N})},j=()=>{a==null||a({query:r.query,types:[],exposures:[],hardinessZones:[],edibleParts:[],interests:[],nativeCountries:[],soilTypes:[],soilMoisture:[],wateringNeed:[]})};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-50 dark:bg-stone-950",children:[n.jsx("header",{className:"sticky top-0 z-20 bg-stone-50/95 dark:bg-stone-950/95 backdrop-blur-sm border-b border-stone-200/50 dark:border-stone-800/50",children:n.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3",children:[!h&&n.jsxs("div",{className:"text-center mb-3",children:[n.jsx("h1",{className:"text-lg font-semibold text-stone-900 dark:text-stone-100",children:"Base de Données Végétale"}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:"Genres, espèces et variétés"})]}),n.jsxs("div",{className:"relative flex items-center bg-white dark:bg-stone-900 rounded-xl shadow-sm border border-stone-200 dark:border-stone-800",children:[n.jsx("div",{className:"pl-3 text-stone-400 dark:text-stone-500",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),n.jsx("input",{ref:m,type:"text",value:r.query,onChange:v=>o==null?void 0:o(v.target.value),placeholder:"Rechercher par nom...",className:"flex-1 px-3 py-2.5 text-base bg-transparent text-stone-900 dark:text-stone-100 placeholder-stone-400 dark:placeholder-stone-500 focus:outline-none","aria-label":"Rechercher des plantes"}),r.query&&n.jsx("button",{onClick:()=>o==null?void 0:o(""),className:"p-2 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300","aria-label":"Effacer",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("button",{onClick:()=>u(!d),className:`mr-1 p-2 rounded-lg transition-colors ${d||y>0?"text-[#5B5781] dark:text-[#AFBD00] bg-[#5B5781]/10 dark:bg-[#AFBD00]/10":"text-stone-400 hover:text-stone-600 dark:hover:text-stone-300"}`,"aria-label":"Filtres",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),y>0&&n.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 flex items-center justify-center text-[10px] font-bold rounded-full bg-[#AFBD00] text-white",children:y})]})]}),d&&n.jsxs("div",{className:"mt-3",children:[n.jsx(wk,{filterOptions:e,filters:r,showAdvanced:c,onShowAdvancedChange:f,onFilterChange:g}),y>0&&n.jsx("button",{onClick:j,className:"mt-2 text-xs text-stone-500 hover:text-stone-700 dark:hover:text-stone-300",children:"Effacer tous les filtres"})]})]})}),n.jsx("main",{className:"flex-1 overflow-auto",children:n.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-2",children:[h&&n.jsxs("div",{className:"flex items-center justify-between py-2 text-xs text-stone-500 dark:text-stone-400",children:[n.jsx("span",{children:t.length>0?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-medium text-stone-700 dark:text-stone-300",children:t.length})," ","résultat",t.length>1?"s":""]}):"Aucun résultat"}),n.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-[8px] font-bold rounded bg-[#5B5781] text-white",children:"G"}),"Genre"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-[8px] font-bold rounded bg-[#AFBD00] text-white",children:"E"}),"Espèce"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-[8px] font-bold rounded bg-amber-500 text-white",children:"V"}),"Variété"]})]})]}),n.jsx("div",{ref:x,className:"divide-y divide-stone-100 dark:divide-stone-800/50",children:t.length>0?t.map((v,N)=>n.jsx("div",{"data-result-item":!0,children:n.jsx(kk,{result:v,isFocused:N===p,isInPalette:s.includes(v.id),onSelect:()=>i==null?void 0:i(v.id,v.type),onAddToPalette:v.type!=="genus"?S=>l==null?void 0:l(v.id,v.type,S):void 0})},v.id)):h?n.jsxs("div",{className:"py-12 text-center",children:[n.jsx("p",{className:"text-stone-500 dark:text-stone-400 text-sm",children:"Aucune plante ne correspond à vos critères"}),n.jsx("button",{onClick:()=>{o==null||o(""),j()},className:"mt-2 text-sm text-[#5B5781] dark:text-[#AFBD00] font-medium",children:"Réinitialiser la recherche"})]}):n.jsxs("div",{className:"py-12 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 mb-3 rounded-full bg-stone-100 dark:bg-stone-800",children:n.jsx("svg",{className:"w-6 h-6 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400 text-sm",children:"Tapez un nom ou utilisez les filtres"})]})})]})}),n.jsxs("div",{className:"hidden lg:block fixed bottom-3 right-3 text-[10px] text-stone-400 dark:text-stone-600",children:[n.jsx("kbd",{className:"px-1 py-0.5 bg-stone-100 dark:bg-stone-800 rounded",children:"↑↓"})," naviguer",n.jsx("span",{className:"mx-1",children:"·"}),n.jsx("kbd",{className:"px-1 py-0.5 bg-stone-100 dark:bg-stone-800 rounded",children:"↵"})," ouvrir"]})]})}function wc({photos:e,contributors:t,onContributorSelect:r}){const[s,o]=E.useState(0);if(e.length===0)return n.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-stone-100 to-stone-200 dark:from-stone-800 dark:to-stone-900 rounded-2xl flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-stone-400 dark:text-stone-600",children:[n.jsx("svg",{className:"w-16 h-16 mx-auto mb-3 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n.jsx("p",{className:"text-sm",children:"Aucune photo"})]})});const a=e[s],i=t.find(l=>l.id===a.contributorId);return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative aspect-[4/3] bg-stone-100 dark:bg-stone-800 rounded-2xl overflow-hidden group",children:[n.jsx("img",{src:a.url,alt:a.caption,className:"w-full h-full object-cover"}),n.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent p-4 pt-12",children:[n.jsx("p",{className:"text-white text-sm font-medium",children:a.caption}),i&&n.jsxs("button",{onClick:()=>r==null?void 0:r(i.id),className:"text-white/70 text-xs hover:text-white transition-colors mt-1",children:["Photo par ",i.name]})]}),e.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>o(l=>(l-1+e.length)%e.length),className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 dark:bg-stone-900/90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-white dark:hover:bg-stone-900",children:n.jsx("svg",{className:"w-5 h-5 text-stone-700 dark:text-stone-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("button",{onClick:()=>o(l=>(l+1)%e.length),className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 dark:bg-stone-900/90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-white dark:hover:bg-stone-900",children:n.jsx("svg",{className:"w-5 h-5 text-stone-700 dark:text-stone-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.length>1&&n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1",children:e.map((l,d)=>n.jsx("button",{onClick:()=>o(d),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden transition-all ${d===s?"ring-2 ring-[#AFBD00] ring-offset-2 ring-offset-white dark:ring-offset-stone-900":"opacity-60 hover:opacity-100"}`,children:n.jsx("img",{src:l.url,alt:"",className:"w-full h-full object-cover"})},l.id))})]})}function Nc({note:e,contributor:t,onContributorSelect:r}){const s=a=>new Date(a).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),o={fr:"🇫🇷",en:"🇬🇧",nl:"🇳🇱",de:"🇩🇪",es:"🇪🇸",it:"🇮🇹"};return n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-xl p-4 border border-stone-200 dark:border-stone-700",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[t&&n.jsx("button",{onClick:()=>r==null?void 0:r(t.id),className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#5B5781] to-[#7a7299] flex items-center justify-center text-white font-medium text-sm",children:t.name.split(" ").map(a=>a[0]).join("")})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[t&&n.jsx("button",{onClick:()=>r==null?void 0:r(t.id),className:"font-medium text-stone-900 dark:text-stone-100 hover:text-[#5B5781] dark:hover:text-[#a89ec4] transition-colors text-left",children:t.name}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-stone-500 dark:text-stone-400",children:[n.jsx("span",{children:s(e.createdAt)}),n.jsx("span",{className:"text-xs",children:o[e.language]||e.language})]})]})]}),n.jsx("p",{className:"text-stone-700 dark:text-stone-300 text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),e.photos.length>0&&n.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",children:e.photos.map((a,i)=>n.jsx("div",{className:"flex-shrink-0 w-24 h-24 rounded-lg overflow-hidden bg-stone-100 dark:bg-stone-700",children:n.jsx("img",{src:a,alt:"",className:"w-full h-full object-cover"})},i))})]})}function We({title:e,icon:t,defaultOpen:r=!0,children:s,badge:o}){const[a,i]=E.useState(r);return n.jsxs("div",{className:"border-b border-stone-200 dark:border-stone-700 last:border-b-0",children:[n.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between py-4 text-left group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[t&&n.jsx("span",{className:"text-stone-400 dark:text-stone-500 group-hover:text-[#5B5781] dark:group-hover:text-[#a89ec4] transition-colors",children:t}),n.jsx("span",{className:"font-medium text-stone-900 dark:text-stone-100",children:e}),o!==void 0&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-400 rounded-full",children:o})]}),n.jsx("svg",{className:`w-5 h-5 text-stone-400 transition-transform duration-200 ${a?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-300 ${a?"max-h-[2000px] opacity-100 pb-4":"max-h-0 opacity-0"}`,children:s})]})}function Sc({aiSummary:e,onGenerate:t}){const r=(e==null?void 0:e.status)||"idle";return n.jsxs("div",{className:"bg-gradient-to-br from-[#5B5781]/5 to-[#5B5781]/10 dark:from-[#5B5781]/10 dark:to-[#5B5781]/20 rounded-2xl p-5 border border-[#5B5781]/20 dark:border-[#5B5781]/30",children:[r==="idle"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#5B5781]/20 dark:bg-[#5B5781]/30 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-5 h-5 text-[#5B5781] dark:text-[#a89ec4]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-stone-900 dark:text-stone-100 mb-1",children:"Résumé intelligent"}),n.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400 leading-relaxed",children:"Générez un résumé synthétisant les notes des contributeurs et les propriétés de cette espèce grâce à l'IA."})]})]}),n.jsxs("button",{onClick:t,className:"w-full py-2.5 px-4 bg-[#5B5781] hover:bg-[#4a4669] text-white font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Générer le résumé IA"]})]}),r==="loading"&&n.jsxs("div",{className:"flex items-center gap-3 py-2",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#5B5781]/20 dark:bg-[#5B5781]/30 flex items-center justify-center flex-shrink-0",children:n.jsxs("svg",{className:"w-5 h-5 text-[#5B5781] dark:text-[#a89ec4] animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-stone-900 dark:text-stone-100",children:"Génération en cours..."}),n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Analyse des notes et propriétés"})]})]}),r==="success"&&(e==null?void 0:e.content)&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#AFBD00]/20 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-[#7a8200] dark:text-[#d4e34d]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("span",{className:"text-sm font-medium text-stone-600 dark:text-stone-400",children:"Résumé généré par IA"})]}),n.jsx("p",{className:"text-stone-700 dark:text-stone-300 text-sm leading-relaxed",children:e.content})]}),r==="error"&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 dark:bg-red-900/30 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-700 dark:text-red-400 mb-1",children:"Erreur de génération"}),n.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:(e==null?void 0:e.error)||"Une erreur est survenue"}),n.jsx("button",{onClick:t,className:"mt-2 text-sm text-[#5B5781] dark:text-[#a89ec4] hover:underline",children:"Réessayer"})]})]})]})}function Nf({stock:e,onNurserySelect:t}){const r=e.quantity>0;return n.jsxs("div",{className:`rounded-xl p-4 border ${r?"bg-[#AFBD00]/5 border-[#AFBD00]/30 dark:bg-[#AFBD00]/10 dark:border-[#AFBD00]/40":"bg-stone-50 border-stone-200 dark:bg-stone-800/50 dark:border-stone-700"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("button",{onClick:()=>t==null?void 0:t(e.nurseryId),className:"font-medium text-stone-900 dark:text-stone-100 hover:text-[#5B5781] dark:hover:text-[#a89ec4] transition-colors text-left",children:e.nurseryName}),r?n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-[#AFBD00]/20 text-[#7a8200] dark:text-[#d4e34d] rounded-full",children:"En stock"}):n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-stone-200 text-stone-600 dark:bg-stone-700 dark:text-stone-400 rounded-full",children:"Rupture"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[n.jsx("div",{className:"text-stone-500 dark:text-stone-400",children:"Quantité"}),n.jsx("div",{className:"text-stone-900 dark:text-stone-100 font-medium",children:r?`${e.quantity} disponibles`:"Indisponible"}),e.rootstock&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-stone-500 dark:text-stone-400",children:"Porte-greffe"}),n.jsx("div",{className:"text-stone-900 dark:text-stone-100",children:e.rootstock})]}),n.jsx("div",{className:"text-stone-500 dark:text-stone-400",children:"Âge"}),n.jsx("div",{className:"text-stone-900 dark:text-stone-100",children:e.age}),n.jsx("div",{className:"text-stone-500 dark:text-stone-400",children:"Prix"}),n.jsxs("div",{className:"text-stone-900 dark:text-stone-100 font-medium",children:[e.price.toFixed(2)," €"]})]})]})}function Sf({locations:e,onLocationSelect:t}){return e.length===0?n.jsx("div",{className:"aspect-video bg-gradient-to-br from-stone-100 to-stone-200 dark:from-stone-800 dark:to-stone-900 rounded-xl flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-stone-400 dark:text-stone-600",children:[n.jsxs("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),n.jsx("p",{className:"text-sm",children:"Aucune implantation répertoriée"})]})}):n.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-[#e8ebe0] to-[#d4d9c6] dark:from-stone-800 dark:to-stone-900 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 opacity-30",children:n.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("defs",{children:n.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:n.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-stone-400 dark:text-stone-600"})})}),n.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),n.jsx("div",{className:"absolute inset-0 p-4",children:n.jsx("div",{className:"relative w-full h-full",children:e.map((r,s)=>{const o=15+s*20%70,a=20+s*25%60;return n.jsxs("button",{onClick:()=>t==null?void 0:t(r.id),style:{left:`${o}%`,top:`${a}%`},className:"absolute -translate-x-1/2 -translate-y-1/2 group",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shadow-lg transition-transform group-hover:scale-110 ${r.isMotherPlant?"bg-[#AFBD00] text-white":"bg-[#5B5781] text-white"}`,children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"})})}),n.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:n.jsxs("div",{className:"bg-stone-900 dark:bg-stone-100 text-white dark:text-stone-900 text-xs px-2 py-1 rounded whitespace-nowrap",children:[r.placeName,r.isMotherPlant&&n.jsx("span",{className:"ml-1 text-[#AFBD00] dark:text-[#7a8200]",children:"• Plant-mère"})]})})]},r.id)})})}),n.jsx("div",{className:"absolute bottom-3 left-3 bg-white/90 dark:bg-stone-900/90 backdrop-blur-sm rounded-lg px-3 py-2 text-xs",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-[#AFBD00]"}),n.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:"Plant-mère"})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-[#5B5781]"}),n.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:"Implantation"})]})]})}),n.jsxs("div",{className:"absolute top-3 right-3 bg-white/90 dark:bg-stone-900/90 backdrop-blur-sm rounded-lg px-3 py-1.5 text-xs font-medium text-stone-700 dark:text-stone-300",children:[e.length," implantation",e.length>1?"s":""]})]})}function Cc({references:e}){if(e.length===0)return n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 italic",children:"Aucune référence disponible"});const t=e.filter(s=>s.type==="link"),r=e.filter(s=>s.type==="pdf");return n.jsxs("div",{className:"space-y-3",children:[t.length>0&&n.jsx("div",{className:"space-y-2",children:t.map(s=>n.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-stone-50 dark:bg-stone-800/50 hover:bg-stone-100 dark:hover:bg-stone-800 transition-colors group",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100 group-hover:text-[#5B5781] dark:group-hover:text-[#a89ec4] transition-colors truncate",children:s.title}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:s.source})]}),n.jsx("svg",{className:"w-4 h-4 text-stone-400 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},s.id))}),r.length>0&&n.jsx("div",{className:"space-y-2",children:r.map(s=>n.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-stone-50 dark:bg-stone-800/50 hover:bg-stone-100 dark:hover:bg-stone-800 transition-colors group",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100 group-hover:text-[#5B5781] dark:group-hover:text-[#a89ec4] transition-colors truncate",children:s.title}),n.jsxs("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:[s.source," • PDF"]})]}),n.jsx("svg",{className:"w-4 h-4 text-stone-400 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]},s.id))})]})}const I0=["J","F","M","A","M","J","J","A","S","O","N","D"],Sk=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function Dl({activeMonths:e,label:t,color:r="green"}){const s={green:{active:"bg-[#AFBD00] text-white",inactive:"bg-stone-100 text-stone-400 dark:bg-stone-800 dark:text-stone-600"},pink:{active:"bg-pink-500 text-white",inactive:"bg-stone-100 text-stone-400 dark:bg-stone-800 dark:text-stone-600"},orange:{active:"bg-orange-500 text-white",inactive:"bg-stone-100 text-stone-400 dark:bg-stone-800 dark:text-stone-600"}};return n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:t}),n.jsx("div",{className:"flex gap-1",children:Sk.map((o,a)=>{const i=e.includes(o);return n.jsx("div",{className:`w-6 h-6 rounded text-xs font-medium flex items-center justify-center ${i?s[r].active:s[r].inactive}`,title:I0[a],children:I0[a]},o)})})]})}function $t({value:e,options:t,variant:r="default"}){var a;const s=((a=t==null?void 0:t.find(i=>i.id===e))==null?void 0:a.label)||e,o={default:"bg-stone-100 text-stone-700 dark:bg-stone-800 dark:text-stone-300",accent:"bg-[#AFBD00]/15 text-[#7a8200] dark:bg-[#AFBD00]/20 dark:text-[#d4e34d]",subtle:"bg-stone-50 text-stone-600 dark:bg-stone-800/50 dark:text-stone-400"};return n.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${o[r]}`,children:s})}const Ck=[{id:"aquatic",label:"Aquatique",icon:"💧"},{id:"groundCover",label:"Couvre-sols",icon:"🌿"},{id:"herbaceous",label:"Herbacées",icon:"🌱"},{id:"climbers",label:"Grimpantes",icon:"🌻"},{id:"shrubs",label:"Arbustes",icon:"🌳"},{id:"trees",label:"Arbres",icon:"🌲"}];function Cf({onAddToPalette:e}){const[t,r]=E.useState(!1),s=o=>{e==null||e(o),r(!1)};return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-2 px-4 py-2.5 bg-[#AFBD00] hover:bg-[#9aa800] text-white font-medium rounded-xl transition-colors shadow-lg shadow-[#AFBD00]/25",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Ajouter à la palette"]}),t&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),n.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 w-56 bg-white dark:bg-stone-800 rounded-xl shadow-xl border border-stone-200 dark:border-stone-700 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsx("div",{className:"px-3 py-2 border-b border-stone-100 dark:border-stone-700",children:n.jsx("p",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Choisir une strate"})}),n.jsx("div",{className:"py-1",children:Ck.map(o=>n.jsxs("button",{onClick:()=>s(o.id),className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:[n.jsx("span",{className:"text-lg",children:o.icon}),n.jsx("span",{className:"text-sm font-medium text-stone-700 dark:text-stone-300",children:o.label})]},o.id))})]})]})]})}function _k({genus:e,currentSpecies:t,siblingSpecies:r,onGenusSelect:s,onSpeciesSelect:o}){const[a,i]=E.useState(!1);if(!e)return null;const l=t.latinName.split(" ").slice(1).join(" "),d=r.filter(u=>u.id!==t.id);return n.jsxs("div",{className:"flex items-center gap-2 text-sm mb-4",children:[n.jsx("button",{onClick:()=>s==null?void 0:s(e.id),className:"text-stone-500 dark:text-stone-400 hover:text-[#5B5781] dark:hover:text-[#a89ec4] transition-colors",children:e.latinName}),n.jsx("svg",{className:"w-4 h-4 text-stone-400 dark:text-stone-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>i(!a),onMouseEnter:()=>d.length>0&&i(!0),className:`flex items-center gap-1 font-medium transition-colors ${d.length>0?"text-stone-900 dark:text-stone-100 hover:text-[#5B5781] dark:hover:text-[#a89ec4] cursor-pointer":"text-stone-900 dark:text-stone-100 cursor-default"}`,children:[n.jsx("span",{className:"italic",children:l}),d.length>0&&n.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&d.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 z-50 min-w-[200px] bg-white dark:bg-stone-800 rounded-xl shadow-xl border border-stone-200 dark:border-stone-700 overflow-hidden",onMouseLeave:()=>i(!1),children:[n.jsx("div",{className:"px-3 py-2 border-b border-stone-100 dark:border-stone-700",children:n.jsxs("p",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:["Autres ",e.latinName]})}),n.jsx("div",{className:"py-1 max-h-64 overflow-y-auto",children:d.map(u=>{const c=u.latinName.split(" ").slice(1).join(" ");return n.jsx("button",{onClick:()=>{o==null||o(u.id),i(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:n.jsx("span",{className:"text-sm italic text-stone-700 dark:text-stone-300",children:c})},u.id)})})]})]})]})]})}function On({icon:e,label:t,value:r,options:s,color:o="default"}){var l;const a=((l=s==null?void 0:s.find(d=>d.id===r))==null?void 0:l.label)||r,i={default:"bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-400",green:"bg-[#AFBD00]/10 dark:bg-[#AFBD00]/20 text-[#7a8200] dark:text-[#d4e34d]",orange:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400",blue:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",purple:"bg-[#5B5781]/10 dark:bg-[#5B5781]/20 text-[#5B5781] dark:text-[#a89ec4]"};return n.jsxs("div",{className:"flex flex-col items-center text-center p-3 rounded-xl hover:bg-stone-50 dark:hover:bg-stone-800/50 transition-colors",children:[n.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-2 ${i[o]}`,children:e}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-0.5",children:t}),n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100 leading-tight",children:a})]})}function z0({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),n.jsx("path",{d:"M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function Ek({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 3v1M18.36 5.64l-.71.71M21 12h-1M18.36 18.36l-.71-.71M12 20v1M5.64 18.36l.71-.71M3 12h1M5.64 5.64l.71.71",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 7a5 5 0 0 1 0 10",fill:"currentColor"}),n.jsx("path",{d:"M12 7a5 5 0 0 0 0 10",fill:"currentColor",opacity:"0.3"})]})}function Dk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M12 7a5 5 0 0 1 0 10",fill:"currentColor",opacity:"0.4"})]})}function ni({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 22V14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 14L7 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M12 14L17 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("ellipse",{cx:"12",cy:"8",rx:"6",ry:"6",fill:"currentColor",opacity:"0.8"})]})}function _f({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 22V16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("circle",{cx:"12",cy:"11",r:"5",fill:"currentColor",opacity:"0.8"}),n.jsx("circle",{cx:"7",cy:"13",r:"3",fill:"currentColor",opacity:"0.6"}),n.jsx("circle",{cx:"17",cy:"13",r:"3",fill:"currentColor",opacity:"0.6"})]})}function Ef({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 22V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 12C12 8 15 5 15 5C15 5 12 8 12 12Z",fill:"currentColor",opacity:"0.8"}),n.jsx("path",{d:"M12 14C12 10 9 7 9 7C9 7 12 10 12 14Z",fill:"currentColor",opacity:"0.8"}),n.jsx("path",{d:"M12 16C12 13 14 11 14 11C14 11 12 13 12 16Z",fill:"currentColor",opacity:"0.6"})]})}function Df({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M8 22C8 22 6 18 6 14C6 10 8 6 12 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 8C14 8 16 10 16 12C16 14 14 16 14 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("circle",{cx:"10",cy:"10",r:"2",fill:"currentColor",opacity:"0.6"}),n.jsx("circle",{cx:"14",cy:"14",r:"2",fill:"currentColor",opacity:"0.6"})]})}function Af({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M2 18h20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("ellipse",{cx:"6",cy:"16",rx:"3",ry:"2",fill:"currentColor",opacity:"0.7"}),n.jsx("ellipse",{cx:"12",cy:"15",rx:"4",ry:"3",fill:"currentColor",opacity:"0.8"}),n.jsx("ellipse",{cx:"18",cy:"16",rx:"3",ry:"2",fill:"currentColor",opacity:"0.7"})]})}function Ak({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 3C7 3 4 8 4 12C4 16 7 18 12 18C17 18 20 16 20 12C20 8 17 3 12 3Z",fill:"currentColor",opacity:"0.3",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M12 18V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M8 9L12 6L16 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeDasharray:"2 2"})]})}function W0({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 3C7 3 4 8 4 12C4 16 7 18 12 18C17 18 20 16 20 12C20 8 17 3 12 3Z",fill:"currentColor",opacity:"0.8",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M12 18V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function Pk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 4V20",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),n.jsx("path",{d:"M12 8L8 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M12 8L16 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M12 14L9 17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M12 14L15 17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function U0({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 4V8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M8 8C8 8 6 14 5 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M10 8C10 8 9 14 8 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M12 8V20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M14 8C14 8 15 14 16 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M16 8C16 8 18 14 19 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function Tk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 4V10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M4 12H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M6 12V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M10 12V18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M14 12V18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M18 12V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function Bk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M4 20L10 14L14 18L20 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor"})]})}function H0({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M4 16L10 10L14 14L20 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("circle",{cx:"20",cy:"8",r:"2",fill:"currentColor"})]})}function Lk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M4 18L8 14L12 16L20 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M14 4H20V10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Mk({filled:e=!1,className:t="w-5 h-5"}){return n.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"none",children:n.jsx("path",{d:"M12 21C16.4183 21 20 17.4183 20 13C20 8.58172 12 2 12 2C12 2 4 8.58172 4 13C4 17.4183 7.58172 21 12 21Z",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",opacity:e?1:.3})})}function Ok({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M12 8V12L14 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]})}function Fk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("circle",{cx:"7",cy:"12",r:"4",stroke:"currentColor",strokeWidth:"2"}),n.jsx("circle",{cx:"17",cy:"12",r:"4",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M11 12H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 9L14 12L12 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function Rk({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M12 2V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 6L8 10M12 6L16 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("path",{d:"M12 12L7 17M12 12L17 17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),n.jsx("circle",{cx:"12",cy:"4",r:"2",fill:"currentColor"})]})}function V0({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("ellipse",{cx:"12",cy:"6",rx:"8",ry:"4",fill:"currentColor",opacity:"0.8"}),n.jsx("path",{d:"M12 10V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M8 14L12 12L16 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.5"})]})}function q0({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("ellipse",{cx:"12",cy:"4",rx:"10",ry:"2",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3"}),n.jsx("ellipse",{cx:"12",cy:"12",rx:"5",ry:"4",fill:"currentColor",opacity:"0.8"}),n.jsx("path",{d:"M12 16V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function $k({className:e="w-6 h-6"}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M4 4C4 4 4 20 4 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",opacity:"0.3"}),n.jsx("ellipse",{cx:"14",cy:"12",rx:"6",ry:"5",fill:"currentColor",opacity:"0.8"}),n.jsx("path",{d:"M14 17V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function Ik({species:e,genus:t,varieties:r,commonNames:s,references:o,photos:a,notes:i,plantLocations:l,nurseryStocks:d,contributors:u,filterOptions:c,siblingSpecies:f=[],aiSummary:p,onGenerateAISummary:w,onAddPhoto:m,onAddNote:x,onAddToPalette:h,onVarietySelect:y,onGenusSelect:g,onContributorSelect:j,onNurserySelect:v,onSpeciesSelect:N}){var J,L,V,q,k;const S=(J=s.find(b=>b.language==="fr"))==null?void 0:J.name,A=s.filter(b=>b.language!=="fr"),D=(L=c.types.find(b=>b.id===e.type))==null?void 0:L.label,R=b=>{switch(b){case"sun":return n.jsx(z0,{className:"w-7 h-7"});case"partial-shade":return n.jsx(Ek,{className:"w-7 h-7"});case"shade":return n.jsx(Dk,{className:"w-7 h-7"});default:return n.jsx(z0,{className:"w-7 h-7"})}},P=()=>{switch(e.type){case"tree":return n.jsx(ni,{className:"w-7 h-7"});case"shrub":return n.jsx(_f,{className:"w-7 h-7"});case"herbaceous":return n.jsx(Ef,{className:"w-7 h-7"});case"climber":return n.jsx(Df,{className:"w-7 h-7"});case"ground-cover":return n.jsx(Af,{className:"w-7 h-7"});default:return n.jsx(ni,{className:"w-7 h-7"})}},I=()=>{switch(e.foliageType){case"evergreen":return n.jsx(W0,{className:"w-7 h-7"});case"semi-evergreen":return n.jsx(W0,{className:"w-7 h-7"});default:return n.jsx(Ak,{className:"w-7 h-7"})}},T=()=>{switch(e.rootSystem){case"taproot":return n.jsx(Pk,{className:"w-7 h-7"});case"fibrous":return n.jsx(U0,{className:"w-7 h-7"});case"spreading":return n.jsx(Tk,{className:"w-7 h-7"});default:return n.jsx(U0,{className:"w-7 h-7"})}},W=()=>{switch(e.growthRate){case"slow":return n.jsx(Bk,{className:"w-7 h-7"});case"medium":return n.jsx(H0,{className:"w-7 h-7"});case"fast":return n.jsx(Lk,{className:"w-7 h-7"});default:return n.jsx(H0,{className:"w-7 h-7"})}},O=()=>{switch(e.forestGardenZone){case"canopy":return n.jsx(V0,{className:"w-7 h-7"});case"understory":return n.jsx(q0,{className:"w-7 h-7"});case"edge":return n.jsx($k,{className:"w-7 h-7"});case"light-shade":return n.jsx(q0,{className:"w-7 h-7"});default:return n.jsx(V0,{className:"w-7 h-7"})}},B=()=>{switch(e.fertility){case"self-fertile":return n.jsx(Ok,{className:"w-7 h-7"});default:return n.jsx(Fk,{className:"w-7 h-7"})}},z={calendar:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),soil:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064"})}),uses:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),map:n.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),nursery:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),notes:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),reference:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),varieties:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})};return n.jsxs("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-950",children:[n.jsx("div",{className:"bg-white dark:bg-stone-900 border-b border-stone-200 dark:border-stone-800",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 md:py-8",children:[n.jsx(_k,{genus:t,currentSpecies:e,siblingSpecies:f,onGenusSelect:g,onSpeciesSelect:N}),n.jsxs("div",{className:"md:flex md:gap-8",children:[n.jsx("div",{className:"md:w-1/2 mb-6 md:mb-0",children:n.jsx(wc,{photos:a,contributors:u,onContributorSelect:j})}),n.jsxs("div",{className:"md:w-1/2",children:[D&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-[#AFBD00]/15 text-[#7a8200] dark:bg-[#AFBD00]/20 dark:text-[#d4e34d] mb-3",children:D}),n.jsx("h1",{className:"font-serif text-3xl md:text-4xl text-stone-900 dark:text-stone-100 italic mb-2",children:e.latinName}),S&&n.jsx("p",{className:"text-xl text-stone-600 dark:text-stone-400 mb-4",children:S}),A.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.map(b=>n.jsxs("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:[n.jsx("span",{className:"text-xs opacity-70",children:b.language.toUpperCase()})," ",b.name]},b.id))}),n.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[n.jsx(Cf,{onAddToPalette:h}),n.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2.5 border border-stone-300 dark:border-stone-600 text-stone-700 dark:text-stone-300 font-medium rounded-xl hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors",children:[n.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Photo"]})]})]})]})]})}),n.jsx("div",{className:"bg-white dark:bg-stone-900 border-b border-stone-200 dark:border-stone-800",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:[n.jsx(On,{icon:P(),label:"Type",value:e.type,options:c.types,color:"green"}),e.exposures.map(b=>n.jsx(On,{icon:R(b),label:"Exposition",value:b,options:c.exposures,color:"orange"},b)),n.jsx(On,{icon:n.jsx(Rk,{className:"w-7 h-7"}),label:"Rusticité",value:e.hardiness.split(" ")[0]+" "+e.hardiness.split(" ")[1],color:"blue"}),n.jsx(On,{icon:I(),label:"Feuillage",value:e.foliageType,options:c.foliageTypes,color:"green"}),n.jsx(On,{icon:W(),label:"Croissance",value:e.growthRate,options:c.growthRates,color:"default"}),n.jsx(On,{icon:T(),label:"Racines",value:e.rootSystem,options:c.rootSystems,color:"default"}),n.jsx(On,{icon:O(),label:"Zone",value:e.forestGardenZone,options:c.forestGardenZones,color:"purple"}),n.jsx(On,{icon:B(),label:"Fertilité",value:e.fertility,options:c.fertilityTypes,color:"default"}),n.jsxs("div",{className:"flex flex-col items-center text-center p-3 rounded-xl hover:bg-stone-50 dark:hover:bg-stone-800/50 transition-colors",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-2 bg-blue-100 dark:bg-blue-900/30",children:n.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(b=>n.jsx(Mk,{filled:b<=parseInt(e.wateringNeed),className:`w-3 h-3 ${b<=parseInt(e.wateringNeed)?"text-blue-500":"text-blue-300 dark:text-blue-700"}`},b))})}),n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-0.5",children:"Arrosage"}),n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:((V=c.wateringNeeds.find(b=>b.id===e.wateringNeed))==null?void 0:V.label.split(" - ")[1])||e.wateringNeed})]})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 md:py-8",children:[n.jsxs("div",{className:"bg-white dark:bg-stone-900 rounded-2xl border border-stone-200 dark:border-stone-800 divide-y divide-stone-200 dark:divide-stone-800 overflow-hidden",children:[n.jsxs("div",{className:"px-4 md:px-6 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-1",children:"Origine"}),n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:e.origin})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-1",children:"Cycle de vie"}),n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:(q=c.lifeCycles.find(b=>b.id===e.lifeCycle))==null?void 0:q.label})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-1",children:"Pollinisation"}),n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:(k=c.pollinationTypes.find(b=>b.id===e.pollinationType))==null?void 0:k.label})]})]}),e.nativeCountries.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-stone-100 dark:border-stone-800",children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Indigène en"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.nativeCountries.map(b=>n.jsx($t,{value:b,options:c.europeanCountries,variant:"subtle"},b))})]}),(e.isInvasive||e.toxicElements)&&n.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-stone-100 dark:border-stone-800",children:[e.isInvasive&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-sm",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Espèce invasive"]}),e.toxicElements&&n.jsxs("div",{className:"flex items-start gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 rounded-lg text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsx("span",{children:e.toxicElements})]})]})]}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Calendrier",icon:z.calendar,defaultOpen:!0,children:n.jsxs("div",{className:"space-y-4",children:[e.floweringMonths.length>0&&n.jsx(Dl,{activeMonths:e.floweringMonths,label:"Floraison",color:"pink"}),e.fruitingMonths.length>0&&n.jsx(Dl,{activeMonths:e.fruitingMonths,label:"Fructification",color:"orange"}),e.harvestMonths.length>0&&n.jsx(Dl,{activeMonths:e.harvestMonths,label:"Récolte",color:"green"}),n.jsxs("div",{className:"pt-2",children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Période de plantation"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.plantingSeasons.map(b=>n.jsx($t,{value:b,options:c.plantingSeasons,variant:"accent"},b))})]})]})})}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Sol et environnement",icon:z.soil,defaultOpen:!0,children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Types de sol"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.soilTypes.map(b=>n.jsx($t,{value:b,options:c.soilTypes,variant:"subtle"},b))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Humidité"}),n.jsx($t,{value:e.soilMoisture,options:c.soilMoistures,variant:"subtle"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Richesse"}),n.jsx($t,{value:e.soilRichness,options:c.soilRichness,variant:"subtle"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Couleurs fleurs"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.flowerColors.map(b=>n.jsx($t,{value:b,options:c.flowerColors,variant:"subtle"},b))})]})]})})}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Usages et intérêts",icon:z.uses,defaultOpen:!0,children:n.jsxs("div",{className:"space-y-4",children:[e.edibleParts.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Parties comestibles"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.edibleParts.map(b=>n.jsx($t,{value:b,options:c.edibleParts,variant:"accent"},b))})]}),e.interests.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Intérêts"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.interests.map(b=>n.jsx($t,{value:b,options:c.interests},b))})]}),e.transformations.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Transformations"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.transformations.map(b=>n.jsx($t,{value:b,options:c.transformations,variant:"subtle"},b))})]}),e.fodderQualities.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Qualités fourragères"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.fodderQualities.map(b=>n.jsx($t,{value:b,options:c.fodderQualities,variant:"subtle"},b))})]}),e.therapeuticProperties&&n.jsxs("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[n.jsx("p",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400 mb-1",children:"Propriétés thérapeutiques"}),n.jsx("p",{className:"text-sm text-emerald-900 dark:text-emerald-300",children:e.therapeuticProperties})]}),e.propagationMethods.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Modes de multiplication"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.propagationMethods.map(b=>n.jsx($t,{value:b,options:c.propagationMethods,variant:"subtle"},b))})]})]})})}),r.length>0&&n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Variétés",icon:z.varieties,badge:r.length,defaultOpen:!0,children:n.jsx("div",{className:"space-y-3",children:r.map(b=>{var K;return n.jsxs("button",{onClick:()=>y==null?void 0:y(b.id),className:"w-full text-left p-4 bg-stone-50 dark:bg-stone-800/50 hover:bg-stone-100 dark:hover:bg-stone-800 rounded-xl transition-colors group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("p",{className:"font-medium text-stone-900 dark:text-stone-100 italic group-hover:text-[#5B5781] dark:group-hover:text-[#a89ec4] transition-colors",children:((K=b.latinName.split("'")[1])==null?void 0:K.replace("'",""))||b.latinName}),n.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(re=>n.jsx("svg",{className:`w-4 h-4 ${re<=b.tasteRating?"text-amber-400":"text-stone-300 dark:text-stone-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},re))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 text-sm",children:[n.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:["Productivité: ",n.jsx("span",{className:"text-stone-700 dark:text-stone-300",children:b.productivity.split(" (")[0]})]}),n.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:["Calibre: ",n.jsx("span",{className:"text-stone-700 dark:text-stone-300",children:b.fruitSize.split(" (")[0]})]})]})]},b.id)})})})}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Implantations",icon:z.map,badge:l.length,defaultOpen:l.length>0,children:n.jsx(Sf,{locations:l})})}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Disponibilité pépinières",icon:z.nursery,badge:d.length,defaultOpen:d.length>0,children:d.length>0?n.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:d.map(b=>n.jsx(Nf,{stock:b,onNurserySelect:v},b.id))}):n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 italic",children:"Non disponible dans les pépinières du réseau"})})}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Notes de la communauté",icon:z.notes,badge:i.length,defaultOpen:i.length>0,children:i.length>0?n.jsxs("div",{className:"space-y-3",children:[i.map(b=>n.jsx(Nc,{note:b,contributor:u.find(K=>K.id===b.contributorId),onContributorSelect:j},b.id)),n.jsxs("button",{onClick:()=>x==null?void 0:x(""),className:"w-full py-3 border-2 border-dashed border-stone-300 dark:border-stone-600 rounded-xl text-stone-500 dark:text-stone-400 hover:border-[#5B5781] hover:text-[#5B5781] dark:hover:border-[#a89ec4] dark:hover:text-[#a89ec4] transition-colors flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Ajouter une note"]})]}):n.jsxs("button",{onClick:()=>x==null?void 0:x(""),className:"w-full py-6 border-2 border-dashed border-stone-300 dark:border-stone-600 rounded-xl text-stone-500 dark:text-stone-400 hover:border-[#5B5781] hover:text-[#5B5781] dark:hover:border-[#a89ec4] dark:hover:text-[#a89ec4] transition-colors flex flex-col items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),n.jsx("span",{children:"Soyez le premier à partager vos observations"})]})})}),n.jsx("div",{className:"px-4 md:px-6",children:n.jsx(We,{title:"Références",icon:z.reference,badge:o.length,defaultOpen:o.length>0,children:n.jsx(Cc,{references:o})})})]}),n.jsx("div",{className:"mt-6",children:n.jsx(Sc,{aiSummary:p,onGenerate:w})})]})]})}function zk({genus:e,species:t,commonNames:r,references:s,photos:o,notes:a,contributors:i,filterOptions:l,aiSummary:d,onGenerateAISummary:u,onAddPhoto:c,onAddNote:f,onAddReference:p,onSpeciesSelect:w,onContributorSelect:m,allGenera:x=[],allCommonNames:h=[],onGenusSelect:y}){var z;const[g,j]=E.useState(""),[v,N]=E.useState(!1),[S,A]=E.useState(-1),D=E.useRef(null),R=E.useRef(null),P=(z=r.find(J=>J.language==="fr"))==null?void 0:z.name,I=r.filter(J=>J.language!=="fr"),T=x.filter(J=>{if(!g.trim()||J.id===e.id)return!1;const L=g.toLowerCase(),V=J.latinName.toLowerCase().includes(L),k=h.filter(b=>b.targetId===J.id&&b.targetType==="genus").some(b=>b.name.toLowerCase().includes(L));return V||k}).slice(0,5);E.useEffect(()=>{const J=L=>{var V;if(v)if(L.key==="ArrowDown")L.preventDefault(),A(q=>Math.min(q+1,T.length-1));else if(L.key==="ArrowUp")L.preventDefault(),A(q=>Math.max(q-1,-1));else if(L.key==="Enter"&&S>=0){L.preventDefault();const q=T[S];y==null||y(q.id),j(""),N(!1)}else L.key==="Escape"&&(N(!1),(V=D.current)==null||V.blur())};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[v,S,T,y]),E.useEffect(()=>{var J;S>=0&&R.current&&((J=R.current.querySelectorAll("[data-result-item]")[S])==null||J.scrollIntoView({block:"nearest"}))},[S]),E.useEffect(()=>{const J=L=>{D.current&&!D.current.contains(L.target)&&R.current&&!R.current.contains(L.target)&&N(!1)};if(v)return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[v]),E.useEffect(()=>{N(g.trim().length>0&&T.length>0),A(-1)},[g,T.length]);const W=t.reduce((J,L)=>(J[L.type]||(J[L.type]=[]),J[L.type].push(L),J),{}),O=J=>{switch(J){case"tree":return n.jsx(ni,{className:"w-5 h-5"});case"shrub":case"small-shrub":return n.jsx(_f,{className:"w-5 h-5"});case"herbaceous":return n.jsx(Ef,{className:"w-5 h-5"});case"climber":return n.jsx(Df,{className:"w-5 h-5"});case"ground-cover":return n.jsx(Af,{className:"w-5 h-5"});default:return n.jsx(ni,{className:"w-5 h-5"})}},B=J=>{var L;return((L=l.types.find(V=>V.id===J))==null?void 0:L.label)||J};return n.jsxs("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:[n.jsx("div",{className:"bg-white dark:bg-stone-800/50 border-b border-stone-200 dark:border-stone-700",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4 mb-2",children:[n.jsxs("h1",{className:"text-3xl sm:text-4xl font-serif font-bold text-stone-900 dark:text-stone-100 flex-1 min-w-0",children:[n.jsx("span",{className:"italic",children:e.latinName}),P&&n.jsx("span",{className:"ml-3 font-normal text-stone-600 dark:text-stone-400",children:P})]}),x.length>0&&y&&n.jsxs("div",{className:"relative flex-shrink-0 w-full lg:w-64",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{ref:D,type:"text",placeholder:"Rechercher un genre...",value:g,onChange:J=>j(J.target.value),onFocus:()=>{g.trim().length>0&&T.length>0&&N(!0)},className:"w-full px-4 py-2 pl-10 pr-4 text-sm bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#AFBD00] focus:border-transparent text-stone-900 dark:text-stone-100 placeholder-stone-400 dark:placeholder-stone-500"}),n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400 dark:text-stone-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),v&&T.length>0&&n.jsx("div",{ref:R,className:"absolute top-full mt-1 w-full bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:T.map((J,L)=>{var q;const V=(q=h.find(k=>k.targetId===J.id&&k.targetType==="genus"&&k.language==="fr"))==null?void 0:q.name;return n.jsx("button",{"data-result-item":!0,onClick:()=>{y(J.id),j(""),N(!1)},className:`w-full text-left px-4 py-2 hover:bg-stone-50 dark:hover:bg-stone-700 transition-colors ${L===S?"bg-stone-50 dark:bg-stone-700":""} ${L===0?"rounded-t-lg":""} ${L===T.length-1?"rounded-b-lg":""}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-[#5B5781] dark:text-[#AFBD00] bg-[#5B5781]/10 dark:bg-[#AFBD00]/10 px-2 py-0.5 rounded",children:"G"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100",children:[n.jsx("span",{className:"italic",children:J.latinName}),V&&n.jsx("span",{className:"ml-2 font-normal text-stone-600 dark:text-stone-400",children:V})]})})]})},J.id)})})]})]}),I.length>0&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Aussi appelé :"}),I.map(J=>n.jsxs("span",{className:"text-sm text-stone-600 dark:text-stone-400 font-medium",children:[J.name,n.jsxs("span",{className:"text-xs text-stone-400 dark:text-stone-500 ml-1",children:["(",J.language,")"]})]},J.id))]})]}),e.description&&n.jsx("p",{className:"text-stone-700 dark:text-stone-300 leading-relaxed",children:e.description})]})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 space-y-6",children:[t.length>0&&n.jsx(We,{title:"Espèces",icon:"🌿",badge:t.length,defaultOpen:!0,children:n.jsx("div",{className:"space-y-4",children:Object.entries(W).map(([J,L])=>n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold text-stone-700 dark:text-stone-300 uppercase tracking-wide mb-3 flex items-center gap-2",children:[O(J),B(J)," (",L.length,")"]}),n.jsx("div",{className:"space-y-2",children:L.map(V=>{var k;const q=(k=h==null?void 0:h.find(b=>b.targetId===V.id&&b.targetType==="species"&&b.language==="fr"))==null?void 0:k.name;return n.jsx("button",{onClick:()=>w==null?void 0:w(V.id),className:"w-full text-left p-4 bg-white dark:bg-stone-800/50 hover:bg-stone-50 dark:hover:bg-stone-800 rounded-xl border border-stone-200 dark:border-stone-700 transition-colors group",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"font-medium text-stone-900 dark:text-stone-100 group-hover:text-[#5B5781] dark:group-hover:text-[#AFBD00] transition-colors",children:[n.jsx("span",{className:"italic",children:V.latinName}),q&&n.jsx("span",{className:"ml-2 font-normal text-stone-600 dark:text-stone-400",children:q})]}),V.origin&&n.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400 mt-1",children:["Origine : ",V.origin]})]}),n.jsx("svg",{className:"w-5 h-5 text-stone-400 group-hover:text-[#AFBD00] transition-colors flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},V.id)})})]},J))})}),o.length>0&&n.jsx(We,{title:"Photos",icon:"📷",badge:o.length,defaultOpen:!0,children:n.jsx(wc,{photos:o,contributors:i,onContributorSelect:m})}),a.length>0&&n.jsx(We,{title:"Notes des contributeurs",icon:"💬",badge:a.length,defaultOpen:!0,children:n.jsx("div",{className:"space-y-4",children:a.map(J=>{const L=i.find(V=>V.id===J.contributorId);return n.jsx(Nc,{note:J,contributor:L,onContributorSelect:m},J.id)})})}),s.length>0&&n.jsx(We,{title:"Références",icon:"📚",badge:s.length,defaultOpen:!1,children:n.jsx(Cc,{references:s})}),t.length===0&&o.length===0&&a.length===0&&s.length===0&&n.jsxs("div",{className:"text-center py-12 bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-100 dark:bg-stone-800 flex items-center justify-center text-3xl mx-auto mb-4",children:"🌿"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Aucune information supplémentaire disponible pour ce genre"})]}),d&&n.jsx(Sc,{aiSummary:d,onGenerate:u,targetName:e.latinName})]})]})}function Wk({genus:e,species:t,currentVariety:r,siblingVarieties:s,onGenusSelect:o,onSpeciesSelect:a,onVarietySelect:i}){var p;const[l,d]=E.useState(!1);if(!e)return null;const u=t.latinName.split(" ").slice(1).join(" "),c=r.latinName.replace(t.latinName,"").trim().replace(/^['"]|['"]$/g,"")||((p=r.latinName.split("'")[1])==null?void 0:p.replace("'",""))||r.latinName,f=s.filter(w=>w.id!==r.id);return n.jsxs("div",{className:"flex items-center gap-2 text-sm mb-4 flex-wrap",children:[n.jsx("button",{onClick:()=>o==null?void 0:o(e.id),className:"text-stone-500 dark:text-stone-400 hover:text-[#5B5781] dark:hover:text-[#a89ec4] transition-colors",children:e.latinName}),n.jsx("svg",{className:"w-4 h-4 text-stone-400 dark:text-stone-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n.jsx("button",{onClick:()=>a==null?void 0:a(t.id),className:"italic text-stone-900 dark:text-stone-100 hover:text-[#5B5781] dark:hover:text-[#a89ec4] transition-colors font-medium",children:u}),n.jsx("svg",{className:"w-4 h-4 text-stone-400 dark:text-stone-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>d(!l),onMouseEnter:()=>f.length>0&&d(!0),className:`flex items-center gap-1 font-medium transition-colors ${f.length>0?"text-stone-900 dark:text-stone-100 hover:text-[#5B5781] dark:hover:text-[#a89ec4] cursor-pointer":"text-stone-900 dark:text-stone-100 cursor-default"}`,children:[n.jsx("span",{className:"italic",children:c}),f.length>0&&n.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&f.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 z-50 min-w-[200px] bg-white dark:bg-stone-800 rounded-xl shadow-xl border border-stone-200 dark:border-stone-700 overflow-hidden",onMouseLeave:()=>d(!1),children:[n.jsx("div",{className:"px-3 py-2 border-b border-stone-100 dark:border-stone-700",children:n.jsx("p",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wide",children:"Autres variétés"})}),n.jsx("div",{className:"py-1 max-h-64 overflow-y-auto",children:f.map(w=>{var x;const m=w.latinName.replace(t.latinName,"").trim().replace(/^['"]|['"]$/g,"")||((x=w.latinName.split("'")[1])==null?void 0:x.replace("'",""))||w.latinName;return n.jsx("button",{onClick:()=>{i==null||i(w.id),d(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-stone-50 dark:hover:bg-stone-700/50 transition-colors",children:n.jsx("span",{className:"text-sm italic text-stone-700 dark:text-stone-300",children:m})},w.id)})})]})]})]})]})}function Uk({variety:e,species:t,genus:r,commonNames:s,references:o,photos:a,notes:i,plantLocations:l,nurseryStocks:d,contributors:u,filterOptions:c,aiSummary:f,onGenerateAISummary:p,onAddPhoto:w,onAddNote:m,onAddReference:x,onAddToPalette:h,onSpeciesSelect:y,onContributorSelect:g,onNurserySelect:j,varieties:v=[],onVarietySelect:N}){var D;const S=(D=s.find(R=>R.language==="fr"))==null?void 0:D.name,A=s.filter(R=>R.language!=="fr");return n.jsxs("div",{className:"min-h-screen bg-stone-50 dark:bg-stone-900",children:[n.jsx("div",{className:"bg-white dark:bg-stone-800/50 border-b border-stone-200 dark:border-stone-700",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6",children:[r&&t&&n.jsx(Wk,{genus:r,species:t,currentVariety:e,siblingVarieties:v.filter(R=>R.speciesId===t.id&&R.id!==e.id),onGenusSelect:()=>{},onSpeciesSelect:()=>y==null?void 0:y(t.id),onVarietySelect:R=>N==null?void 0:N(R)}),n.jsxs("div",{className:"mb-4 mt-4",children:[n.jsxs("h1",{className:"text-3xl sm:text-4xl font-serif font-bold text-stone-900 dark:text-stone-100 mb-2",children:[n.jsx("span",{className:"italic",children:e.latinName}),S&&n.jsx("span",{className:"ml-3 font-normal text-stone-600 dark:text-stone-400",children:S})]}),A.length>0&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[n.jsx("span",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Aussi appelé :"}),A.map(R=>n.jsxs("span",{className:"text-sm text-stone-600 dark:text-stone-400 font-medium",children:[R.name,n.jsxs("span",{className:"text-xs text-stone-400 dark:text-stone-500 ml-1",children:["(",R.language,")"]})]},R.id))]})]}),h&&n.jsx("div",{className:"mt-4",children:n.jsx(Cf,{onAddToPalette:h})})]})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 space-y-6",children:[f&&n.jsx(Sc,{aiSummary:f,onGenerate:p,targetName:e.latinName}),n.jsx(We,{title:"Propriétés de la variété",icon:"🌿",defaultOpen:!0,children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 mb-2",children:"Qualité gustative"}),n.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(R=>n.jsx("svg",{className:`w-5 h-5 ${R<=e.tasteRating?"text-amber-400 fill-current":"text-stone-300 dark:text-stone-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},R)),n.jsxs("span",{className:"ml-2 text-sm font-medium text-stone-700 dark:text-stone-300",children:[e.tasteRating,"/5"]})]})]}),e.productivity&&n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 mb-2",children:"Productivité"}),n.jsx("div",{className:"text-base font-medium text-stone-900 dark:text-stone-100",children:e.productivity})]}),e.fruitSize&&n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 mb-2",children:"Calibre des fruits"}),n.jsx("div",{className:"text-base font-medium text-stone-900 dark:text-stone-100",children:e.fruitSize})]}),e.storageLife&&n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 mb-2",children:"Durée de conservation"}),n.jsx("div",{className:"text-base font-medium text-stone-900 dark:text-stone-100",children:e.storageLife})]}),e.maturity&&n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 mb-2",children:"Précocité"}),n.jsx("div",{className:"text-base font-medium text-stone-900 dark:text-stone-100",children:e.maturity})]}),e.diseaseResistance&&n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-lg p-4 border border-stone-200 dark:border-stone-700 sm:col-span-2",children:[n.jsx("div",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 mb-2",children:"Résistance aux maladies"}),n.jsx("div",{className:"text-base text-stone-900 dark:text-stone-100",children:e.diseaseResistance})]})]})}),a.length>0&&n.jsx(We,{title:"Photos",icon:"📷",badge:a.length,defaultOpen:!0,children:n.jsx(wc,{photos:a,contributors:u,onContributorSelect:g})}),i.length>0&&n.jsx(We,{title:"Notes des contributeurs",icon:"💬",badge:i.length,defaultOpen:!0,children:n.jsx("div",{className:"space-y-4",children:i.map(R=>{const P=u.find(I=>I.id===R.contributorId);return n.jsx(Nc,{note:R,contributor:P,onContributorSelect:g},R.id)})})}),l.length>0&&n.jsx(We,{title:"Carte des implantations",icon:"📍",badge:l.length,defaultOpen:!1,children:n.jsx(Sf,{locations:l,onLocationSelect:R=>console.log("Location selected:",R)})}),d.length>0&&n.jsx(We,{title:"Disponibilité en pépinières",icon:"🏪",badge:d.length,defaultOpen:!1,children:n.jsx("div",{className:"space-y-3",children:d.map(R=>n.jsx(Nf,{stock:R,onNurserySelect:()=>j==null?void 0:j(R.nurseryId)},R.id))})}),o.length>0&&n.jsx(We,{title:"Références",icon:"📚",badge:o.length,defaultOpen:!1,children:n.jsx(Cc,{references:o})}),a.length===0&&i.length===0&&l.length===0&&d.length===0&&o.length===0&&n.jsxs("div",{className:"text-center py-12 bg-white dark:bg-stone-800/50 rounded-xl border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-100 dark:bg-stone-800 flex items-center justify-center text-3xl mx-auto mb-4",children:"🌿"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Aucune information supplémentaire disponible pour cette variété"})]})]})]})}function Hk({strateKey:e,title:t,icon:r,items:s,species:o,varieties:a,accentColor:i,isExpanded:l,onToggle:d,onRemoveItem:u,onMoveItem:c,onItemClick:f}){const[p,w]=E.useState(!1),m=g=>{if(g.type==="species"){const j=o.find(v=>v.id===g.id);return{latinName:g.latinName,type:(j==null?void 0:j.type)||"unknown",exposures:(j==null?void 0:j.exposures)||[]}}else{const j=a.find(N=>N.id===g.id),v=j?o.find(N=>N.id===j.speciesId):null;return{latinName:g.latinName,type:(v==null?void 0:v.type)||"unknown",exposures:(v==null?void 0:v.exposures)||[]}}},x=g=>{g.preventDefault(),w(!0)},h=()=>{w(!1)},y=g=>{g.preventDefault(),w(!1);const j=g.dataTransfer.getData("text/plain");if(j)try{const v=JSON.parse(j),N=v.fromStrate,S=v.id;if(!S||!N||N===e)return;c==null||c(S,N,e)}catch{}};return n.jsxs("div",{className:`border-b border-stone-200 dark:border-stone-700 last:border-b-0 transition-colors ${p?"bg-[#AFBD00]/10":""}`,onDragOver:x,onDragLeave:h,onDrop:y,children:[n.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-stone-50 dark:hover:bg-stone-800/50 transition-colors",children:[n.jsx("span",{className:"text-xl",children:r}),n.jsx("span",{className:"flex-1 text-left font-medium text-stone-900 dark:text-stone-100",children:t}),n.jsx("span",{className:"min-w-[24px] h-6 px-2 rounded-full text-xs font-semibold flex items-center justify-center text-white",style:{backgroundColor:s.length>0?i:"#a8a29e"},children:s.length}),n.jsx("svg",{className:`w-5 h-5 text-stone-400 transition-transform ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&n.jsx("div",{className:"px-4 pb-3",children:s.length===0?n.jsx("div",{className:"py-4 text-center",children:n.jsx("p",{className:"text-sm text-stone-400 dark:text-stone-500 italic",children:'Glissez des plantes ici ou utilisez le bouton "+"'})}):n.jsx("div",{className:"space-y-2",children:s.map(g=>{const j=m(g);return n.jsxs("div",{className:"group flex items-center gap-3 p-3 bg-stone-50 dark:bg-stone-800/50 rounded-xl hover:bg-stone-100 dark:hover:bg-stone-800 transition-colors",draggable:!0,onDragStart:v=>{v.dataTransfer.setData("text/plain",JSON.stringify({id:g.paletteItemId||g.id,fromStrate:e})),v.dataTransfer.effectAllowed="move"},children:[n.jsx("div",{className:"w-2 h-8 rounded-full flex-shrink-0",style:{backgroundColor:i}}),n.jsxs("button",{onClick:()=>f==null?void 0:f(g.id,g.type),className:"flex-1 text-left",children:[n.jsx("p",{className:"text-sm font-medium text-stone-900 dark:text-stone-100 italic",children:j.latinName}),n.jsxs("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:[g.type==="variety"?"Variété":"Espèce"," • ",j.exposures.join(", ")]})]}),n.jsx("button",{onClick:()=>u==null?void 0:u(g.paletteItemId||g.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-stone-400 hover:text-red-500 dark:hover:text-red-400 transition-all",title:"Retirer de la palette",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`${g.type}:${g.id}`)})})})]})}const Vk=[{key:"trees",title:"Arbres",icon:"🌲",color:"#234766"},{key:"shrubs",title:"Arbustes",icon:"🌳",color:"#3d7a4a"},{key:"climbers",title:"Grimpantes",icon:"🌿",color:"#7a8200"},{key:"herbaceous",title:"Herbacées",icon:"🌱",color:"#AFBD00"},{key:"groundCover",title:"Couvre-sols",icon:"☘️",color:"#6b9a3d"},{key:"aquatic",title:"Aquatiques",icon:"💧",color:"#2563eb"}];function qk({palette:e,species:t,varieties:r,onRemoveItem:s,onMoveItem:o,onSave:a,onExportPDF:i,onSendToDesignStudio:l,onClear:d}){const[u,c]=E.useState(new Set(["trees","shrubs","herbaceous"])),[f,p]=E.useState(!1),[w,m]=E.useState((e==null?void 0:e.name)||""),[x,h]=E.useState((e==null?void 0:e.description)||""),y=v=>{c(N=>{const S=new Set(N);return S.has(v)?S.delete(v):S.add(v),S})},g=()=>e?Object.values(e.strates).reduce((v,N)=>v+N.length,0):0,j=()=>{a==null||a(w,x),p(!1)};return n.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-stone-900",children:[n.jsx("div",{className:"flex-shrink-0 border-b border-stone-200 dark:border-stone-700",children:n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"font-serif text-xl text-stone-900 dark:text-stone-100",children:"Palette végétale"}),n.jsxs("div",{className:"flex items-center gap-1 px-2.5 py-1 bg-[#AFBD00]/15 rounded-full",children:[n.jsx("span",{className:"text-sm font-semibold text-[#7a8200] dark:text-[#d4e34d]",children:g()}),n.jsx("span",{className:"text-xs text-[#7a8200] dark:text-[#d4e34d]",children:"plantes"})]})]})})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:e?Vk.map(v=>n.jsx(Hk,{strateKey:v.key,title:v.title,icon:v.icon,items:e.strates[v.key],species:t,varieties:r,accentColor:v.color,isExpanded:u.has(v.key),onToggle:()=>y(v.key),onRemoveItem:N=>s==null?void 0:s(N,v.key),onMoveItem:(N,S,A)=>o==null?void 0:o(N,S,A)},v.key)):n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-100 dark:bg-stone-800 flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),n.jsx("h3",{className:"text-lg font-medium text-stone-900 dark:text-stone-100 mb-2",children:"Palette vide"}),n.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 max-w-xs",children:"Ajoutez des plantes depuis les fiches espèces pour constituer votre palette végétale"})]})}),n.jsxs("div",{className:"flex-shrink-0 border-t border-stone-200 dark:border-stone-700 p-4 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>p(!0),disabled:g()===0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-[#5B5781] hover:bg-[#4a4669] disabled:bg-stone-300 dark:disabled:bg-stone-700 text-white font-medium rounded-xl transition-colors disabled:cursor-not-allowed",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Sauvegarder"]}),n.jsxs("button",{onClick:i,disabled:g()===0,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-stone-300 dark:border-stone-600 text-stone-700 dark:text-stone-300 font-medium rounded-xl hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:l,disabled:g()===0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm bg-[#AFBD00]/15 text-[#7a8200] dark:text-[#d4e34d] font-medium rounded-xl hover:bg-[#AFBD00]/25 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Envoyer au Design Studio"]}),n.jsx("button",{onClick:d,disabled:g()===0,className:"px-4 py-2 text-sm text-stone-500 dark:text-stone-400 hover:text-red-500 dark:hover:text-red-400 font-medium rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Vider"})]})]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>p(!1)}),n.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 max-w-md mx-auto bg-white dark:bg-stone-800 rounded-2xl shadow-2xl z-50 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-stone-200 dark:border-stone-700",children:n.jsx("h3",{className:"font-serif text-lg text-stone-900 dark:text-stone-100",children:"Sauvegarder la palette"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-1.5",children:"Nom de la palette"}),n.jsx("input",{type:"text",value:w,onChange:v=>m(v.target.value),placeholder:"Ex: Verger diversifié - Sol argileux",className:"w-full px-4 py-2.5 border border-stone-300 dark:border-stone-600 rounded-xl bg-white dark:bg-stone-700 text-stone-900 dark:text-stone-100 placeholder:text-stone-400 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781]"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-1.5",children:"Description (optionnelle)"}),n.jsx("textarea",{value:x,onChange:v=>h(v.target.value),placeholder:"Décrivez le contexte, le type de sol, l'exposition...",rows:3,className:"w-full px-4 py-2.5 border border-stone-300 dark:border-stone-600 rounded-xl bg-white dark:bg-stone-700 text-stone-900 dark:text-stone-100 placeholder:text-stone-400 focus:outline-none focus:ring-2 focus:ring-[#5B5781]/50 focus:border-[#5B5781] resize-none"})]})]}),n.jsxs("div",{className:"px-6 py-4 bg-stone-50 dark:bg-stone-900/50 flex gap-3 justify-end",children:[n.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-stone-600 dark:text-stone-400 hover:text-stone-900 dark:hover:text-stone-100",children:"Annuler"}),n.jsx("button",{onClick:j,disabled:!w.trim(),className:"px-5 py-2 bg-[#5B5781] hover:bg-[#4a4669] disabled:bg-stone-300 dark:disabled:bg-stone-700 text-white font-medium rounded-xl transition-colors disabled:cursor-not-allowed",children:"Sauvegarder"})]})]})]})]})}function Jk(e){return{species_created:"a créé l'espèce",species_updated:"a modifié l'espèce",variety_created:"a créé la variété",variety_updated:"a modifié la variété",photo_added:"a ajouté une photo",note_added:"a ajouté une note",reference_added:"a ajouté une référence"}[e]}function Qk(e){return{species_created:"🌱",species_updated:"✏️",variety_created:"🌿",variety_updated:"✏️",photo_added:"📷",note_added:"💬",reference_added:"📚"}[e]}function Gk(e){const t=new Date,r=new Date(t);r.setDate(r.getDate()-1);const s=e.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),o=t.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),a=r.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});return s===o?"Aujourd'hui":s===a?"Hier":s}function Kk(e){const t=new Map;return e.forEach(r=>{const o=new Date(r.timestamp).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});t.has(o)||t.set(o,[]),t.get(o).push(r)}),t}function Yk({activity:e,contributor:t,onActivitySelect:r,onContributorSelect:s}){const o=()=>{r==null||r(e.targetId,e.targetType)},a=()=>{s==null||s(e.contributorId)};return n.jsxs("div",{className:"flex gap-4 group",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("button",{onClick:a,className:"w-10 h-10 rounded-full overflow-hidden border-2 border-stone-200 dark:border-stone-700 hover:border-[#AFBD00] dark:hover:border-[#AFBD00] transition-colors cursor-pointer",children:t!=null&&t.avatarUrl?n.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#AFBD00] to-[#5B5781] flex items-center justify-center text-white font-medium text-sm",children:(t==null?void 0:t.name.charAt(0).toUpperCase())||"?"})})}),n.jsxs("div",{className:"flex-1 min-w-0 pb-6 border-l-2 border-stone-200 dark:border-stone-700 pl-4 relative",children:[n.jsx("div",{className:"absolute -left-[7px] top-2 w-3 h-3 rounded-full bg-[#AFBD00] border-2 border-white dark:border-stone-900"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[n.jsx("button",{onClick:a,className:"font-medium text-stone-900 dark:text-stone-100 hover:text-[#5B5781] dark:hover:text-[#AFBD00] transition-colors cursor-pointer",children:(t==null?void 0:t.name)||"Contributeur inconnu"}),n.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:Jk(e.type)}),n.jsx("span",{className:"text-2xl leading-none",children:Qk(e.type)})]}),n.jsx("button",{onClick:o,className:"text-[#5B5781] dark:text-[#AFBD00] hover:text-[#AFBD00] dark:hover:text-[#5B5781] font-medium transition-colors cursor-pointer text-left",children:e.targetName}),n.jsx("p",{className:"text-xs text-stone-400 dark:text-stone-500 mt-2",children:new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]})]})}function Xk({activities:e,contributors:t,onActivitySelect:r,onContributorSelect:s,onLoadMore:o,hasMore:a}){const i=[...e].sort((c,f)=>new Date(f.timestamp).getTime()-new Date(c.timestamp).getTime()),l=Kk(i),d=Array.from(l.keys()).sort((c,f)=>new Date(f).getTime()-new Date(c).getTime()),u=c=>t.find(f=>f.id===c);return e.length===0?n.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 py-12",children:n.jsxs("div",{className:"bg-stone-50 dark:bg-stone-800/50 rounded-2xl p-12 text-center border border-stone-200 dark:border-stone-700",children:[n.jsx("div",{className:"w-16 h-16 rounded-2xl bg-stone-200 dark:bg-stone-700 flex items-center justify-center text-4xl mx-auto mb-4",children:"🌿"}),n.jsx("p",{className:"text-stone-600 dark:text-stone-400 font-medium text-lg mb-2",children:"Aucune activité récente"}),n.jsx("p",{className:"text-stone-400 dark:text-stone-500 text-sm",children:"Les contributions de la communauté apparaîtront ici"})]})}):n.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-serif font-bold text-stone-900 dark:text-stone-100 mb-2",children:"Flux d'activité"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Découvrez les dernières contributions de la communauté"})]}),n.jsx("div",{className:"space-y-8",children:d.map(c=>{const f=l.get(c),p=new Date(f[0].timestamp);return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-stone-900 py-2 border-b-2 border-stone-200 dark:border-stone-700",children:n.jsx("h2",{className:"text-sm font-semibold text-stone-700 dark:text-stone-300 uppercase tracking-wide",children:Gk(p)})}),n.jsx("div",{className:"space-y-0",children:f.map(w=>n.jsx(Yk,{activity:w,contributor:u(w.contributorId),onActivitySelect:r,onContributorSelect:s},w.id))})]},c)})}),a&&n.jsx("div",{className:"mt-8 text-center",children:n.jsx("button",{onClick:o,className:"px-6 py-3 bg-[#5B5781] hover:bg-[#4a4669] dark:bg-[#AFBD00] dark:hover:bg-[#8fa000] text-white font-medium rounded-lg transition-colors",children:"Charger plus d'activités"})})]})}function Zk(e){return{species_created:"a créé l'espèce",species_updated:"a modifié l'espèce",variety_created:"a créé la variété",variety_updated:"a modifié la variété",photo_added:"a ajouté une photo",note_added:"a ajouté une note",reference_added:"a ajouté une référence"}[e]}function ew(e){return{species_created:"🌱",species_updated:"✏️",variety_created:"🌿",variety_updated:"✏️",photo_added:"📷",note_added:"💬",reference_added:"📚"}[e]}function tw(e){return new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}function nw(e){const t=new Date(e),s=new Date().getTime()-t.getTime(),o=Math.floor(s/(1e3*60*60*24));return o===0?"Aujourd'hui":o===1?"Hier":o<7?`Il y a ${o} jours`:o<30?`Il y a ${Math.floor(o/7)} semaines`:o<365?`Il y a ${Math.floor(o/30)} mois`:`Il y a ${Math.floor(o/365)} ans`}function rw(e,t){const r={"lab-wallonie":"🇧🇪","lab-bruxelles":"🇧🇪","lab-bretagne":"🇫🇷","lab-paris":"🇫🇷"};if(e&&r[e])return r[e];const s=t.toLowerCase();return s.includes("dupont")||s.includes("martin")||s.includes("bernard")||s.includes("petit")?"🇫🇷":s.includes("williams")||s.includes("smith")||s.includes("jones")?"🇬🇧":s.includes("van ")||s.includes("de ")||s.includes("jansen")?"🇳🇱":"🌍"}function ca({value:e,max:t,label:r,icon:s,color:o}){const a=Math.min(e/t*100,100),i=2*Math.PI*36,l=i,d=i-a/100*i;return n.jsx("div",{className:"relative group",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("div",{className:"relative w-24 h-24",children:[n.jsxs("svg",{className:"transform -rotate-90 w-24 h-24",viewBox:"0 0 80 80",children:[n.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"currentColor",strokeWidth:"6",className:"text-stone-200 dark:text-stone-700"}),n.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:o,strokeWidth:"6",strokeDasharray:l,strokeDashoffset:d,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-2xl",children:s})})]}),n.jsxs("div",{className:"mt-3 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-stone-900 dark:text-stone-100",children:e}),n.jsx("div",{className:"text-xs text-stone-500 dark:text-stone-400 mt-1 leading-tight",children:r})]})]})})}function sw({activityByMonth:e}){const t=Math.max(...e,1),r=o=>{if(o===0)return 0;const a=o/t;return a<.2?1:a<.4?2:a<.7?3:4},s=["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"];return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-serif font-bold text-stone-900 dark:text-stone-100",children:"Jardin d'activité"}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-stone-500 dark:text-stone-400",children:[n.jsx("span",{children:"Moins"}),n.jsx("div",{className:"flex gap-1.5",children:[0,1,2,3,4].map(o=>n.jsx("div",{className:`w-4 h-4 rounded-full transition-transform hover:scale-110 ${o===0?"bg-stone-200 dark:bg-stone-700":o===1?"bg-[#AFBD00]/30 dark:bg-[#AFBD00]/20":o===2?"bg-[#AFBD00]/50 dark:bg-[#AFBD00]/40":o===3?"bg-[#AFBD00]/70 dark:bg-[#AFBD00]/60":"bg-[#AFBD00] dark:bg-[#AFBD00]"}`},o))}),n.jsx("span",{children:"Plus"})]})]}),n.jsx("div",{className:"grid grid-cols-12 gap-3",children:e.map((o,a)=>{const i=r(o),l=i===0?"w-8 h-8":i===1?"w-10 h-10":i===2?"w-12 h-12":i===3?"w-14 h-14":"w-16 h-16";return n.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[n.jsx("div",{className:`${l} rounded-full transition-all duration-300 hover:scale-110 hover:shadow-lg cursor-pointer flex items-center justify-center ${i===0?"bg-stone-200 dark:bg-stone-700":i===1?"bg-gradient-to-br from-[#AFBD00]/30 to-[#AFBD00]/20 dark:from-[#AFBD00]/20 dark:to-[#AFBD00]/10":i===2?"bg-gradient-to-br from-[#AFBD00]/50 to-[#AFBD00]/40 dark:from-[#AFBD00]/40 dark:to-[#AFBD00]/30":i===3?"bg-gradient-to-br from-[#AFBD00]/70 to-[#AFBD00]/60 dark:from-[#AFBD00]/60 dark:to-[#AFBD00]/50":"bg-gradient-to-br from-[#AFBD00] to-[#8fa000] dark:from-[#AFBD00] dark:to-[#8fa000] shadow-md"}`,title:`${s[a]}: ${o} contribution${o>1?"s":""}`,children:i>0&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-white/40 dark:bg-white/20"})}),n.jsx("p",{className:"text-xs font-medium text-stone-600 dark:text-stone-400",children:s[a]})]},a)})})]})}function ow({activity:e,index:t,onActivitySelect:r}){const s=()=>{r==null||r(e.targetId,e.targetType)};return n.jsxs("button",{onClick:s,className:"w-full text-left p-4 rounded-xl hover:bg-gradient-to-r hover:from-stone-50 hover:to-transparent dark:hover:from-stone-800/50 dark:hover:to-transparent transition-all duration-200 group relative overflow-hidden",children:[t<9&&n.jsx("div",{className:"absolute left-8 top-full w-0.5 h-4 bg-gradient-to-b from-stone-200 to-transparent dark:from-stone-700 dark:to-transparent"}),n.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[n.jsxs("div",{className:"relative flex-shrink-0",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#AFBD00]/20 to-[#5B5781]/20 dark:from-[#AFBD00]/10 dark:to-[#5B5781]/10 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform duration-200",children:ew(e.type)}),n.jsx("div",{className:"absolute inset-0 rounded-full bg-[#AFBD00]/20 dark:bg-[#AFBD00]/10 scale-0 group-hover:scale-150 transition-transform duration-300 opacity-0 group-hover:opacity-100"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm text-stone-700 dark:text-stone-300 group-hover:text-[#5B5781] dark:group-hover:text-[#AFBD00] transition-colors",children:[n.jsx("span",{className:"font-medium",children:Zk(e.type)})," ",n.jsx("span",{className:"text-[#5B5781] dark:text-[#AFBD00] font-semibold",children:e.targetName})]}),n.jsxs("p",{className:"text-xs text-stone-400 dark:text-stone-500 mt-1.5 flex items-center gap-2",children:[n.jsx("span",{children:nw(e.timestamp)}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-stone-300 dark:bg-stone-600"}),n.jsx("span",{children:new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]}),n.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("svg",{className:"w-5 h-5 text-[#AFBD00]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}function aw({contributor:e,recentActivities:t,onActivitySelect:r}){const s=e.stats.speciesCreated+e.stats.varietiesCreated+e.stats.photosAdded+e.stats.notesWritten,o=Math.max(e.stats.speciesCreated,e.stats.varietiesCreated,e.stats.photosAdded,e.stats.notesWritten,1);return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 via-white to-stone-50 dark:from-stone-900 dark:via-stone-950 dark:to-stone-900",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6",children:[n.jsxs("div",{className:"relative mb-6 overflow-hidden rounded-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#AFBD00]/5 via-[#5B5781]/3 to-[#AFBD00]/5 dark:from-[#AFBD00]/3 dark:via-[#5B5781]/3 dark:to-[#AFBD00]/3"}),n.jsx("div",{className:"relative bg-white/90 dark:bg-stone-900/90 backdrop-blur-sm border border-stone-200/50 dark:border-stone-700/50 p-5 sm:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 lg:gap-6",children:[n.jsxs("div",{className:"flex items-center gap-4 sm:gap-5 flex-1 min-w-0",children:[n.jsxs("div",{className:"relative flex-shrink-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#AFBD00] via-[#8fa000] to-[#5B5781] rounded-full p-0.5",children:n.jsx("div",{className:"w-full h-full bg-white dark:bg-stone-900 rounded-full"})}),e.avatarUrl?n.jsx("img",{src:e.avatarUrl,alt:e.name,className:"relative w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border-2 border-white dark:border-stone-900"}):n.jsx("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-[#AFBD00] to-[#5B5781] flex items-center justify-center text-white font-bold text-xl sm:text-2xl border-2 border-white dark:border-stone-900",children:e.name.split(" ").map(a=>a[0]).join("").toUpperCase()})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1.5",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-stone-900 dark:text-stone-100",children:e.name}),n.jsx("span",{className:"text-xl sm:text-2xl leading-none",title:"Pays",children:rw(e.labId,e.name)})]}),n.jsxs("p",{className:"text-sm sm:text-base text-stone-500 dark:text-stone-400",children:["Contributrice depuis le ",n.jsx("span",{className:"font-medium",children:tw(e.joinedAt)})]})]})]}),n.jsx("div",{className:"lg:flex-shrink-0 lg:self-center",children:n.jsxs("div",{className:"inline-flex items-center gap-2.5 px-4 py-2 bg-gradient-to-r from-[#AFBD00] to-[#8fa000] dark:from-[#AFBD00] dark:to-[#8fa000] rounded-xl shadow-md shadow-[#AFBD00]/15 dark:shadow-[#AFBD00]/10",children:[n.jsx("div",{className:"text-xl sm:text-2xl",children:"Ⓢ"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-white/80 uppercase tracking-wide leading-tight",children:"Semos"}),n.jsx("div",{className:"text-lg sm:text-xl font-bold text-white leading-tight",children:e.semosEarned.toLocaleString("fr-FR")})]}),n.jsxs("div",{className:"ml-3 pl-3 border-l border-white/20",children:[n.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-white/80 uppercase tracking-wide leading-tight",children:"Contributions"}),n.jsx("div",{className:"text-lg sm:text-xl font-bold text-white leading-tight",children:s})]})]})})]})})]}),n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-6 mb-5 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:[n.jsx(ca,{value:e.stats.speciesCreated,max:o,label:"Espèces créées",icon:"🌱",color:"#5B5781"}),n.jsx(ca,{value:e.stats.varietiesCreated,max:o,label:"Variétés créées",icon:"🌿",color:"#AFBD00"}),n.jsx(ca,{value:e.stats.photosAdded,max:o,label:"Photos ajoutées",icon:"📷",color:"#5B5781"}),n.jsx(ca,{value:e.stats.notesWritten,max:o,label:"Notes rédigées",icon:"💬",color:"#AFBD00"})]})}),n.jsx("div",{className:"bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-6 mb-5 shadow-sm",children:n.jsx(sw,{activityByMonth:e.activityByMonth})}),n.jsxs("div",{className:"bg-white dark:bg-stone-800/50 rounded-2xl border border-stone-200 dark:border-stone-700 p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-serif font-bold text-stone-900 dark:text-stone-100 mb-5",children:"Chronologie des contributions"}),t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-100 dark:bg-stone-800 flex items-center justify-center text-3xl mx-auto mb-4",children:"🌿"}),n.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Aucune contribution récente"})]}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gradient-to-b from-[#AFBD00] via-stone-200 to-transparent dark:from-[#AFBD00] dark:via-stone-700 dark:to-transparent"}),n.jsx("div",{className:"space-y-0",children:t.map((a,i)=>n.jsx(ow,{activity:a,index:i,onActivitySelect:r},a.id))})]})]})]})})}const J0={query:"",types:[],exposures:[],hardinessZones:[],edibleParts:[],interests:[],nativeCountries:[],soilTypes:[],soilMoisture:[],wateringNeed:[]};async function Be(e,t={}){const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!r.ok){let s=`${r.status} ${r.statusText}`;try{const o=await r.json();o!=null&&o.error&&(s=o.error)}catch{}throw new Error(s)}return r.status===204?null:r.json()}function Al(e){const t=e.replace(/^\/+/,"").split("/").filter(Boolean);return t.length===0||t[0]!=="plants"?{view:"search"}:t.length===1?{view:"search"}:t[1]==="palette"?{view:"palette"}:t[1]==="activity"?{view:"activity"}:t[1]==="genera"&&t[2]?{view:"genus",id:t[2]}:t[1]==="species"&&t[2]?{view:"species",id:t[2]}:t[1]==="varieties"&&t[2]?{view:"variety",id:t[2]}:t[1]==="contributors"&&t[2]?{view:"contributor",id:t[2]}:{view:"search"}}function iw(e,t){return e==="search"?"/plants":e==="palette"?"/plants/palette":e==="activity"?"/plants/activity":e==="genus"&&t?`/plants/genera/${t}`:e==="species"&&t?`/plants/species/${t}`:e==="variety"&&t?`/plants/varieties/${t}`:e==="contributor"&&t?`/plants/contributors/${t}`:"/plants"}function lw({currentView:e,onNavigate:t,onReload:r}){const s=[{key:"search",label:"Recherche"},{key:"palette",label:"Palette"},{key:"activity",label:"Activité"}];return n.jsx("div",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur border-b border-stone-200",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center gap-2",children:[s.map(o=>{const a=e===o.key;return n.jsx("button",{onClick:()=>t(o.key),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?"bg-[#5B5781] text-white":"text-stone-700 hover:bg-stone-100"}`,children:o.label},o.key)}),n.jsx("div",{className:"ml-auto",children:n.jsx("button",{onClick:r,className:"px-3 py-2 rounded-lg text-sm font-medium text-stone-700 border border-stone-300 hover:bg-stone-100",children:"Rafraîchir"})})]})})}function dw({modal:e,busy:t,onClose:r,onChange:s,onSubmit:o}){var v,N,S,A;const[a,i]=E.useState({}),[l,d]=E.useState(!1),u=E.useRef(null),c=E.useRef(null),f=!!e,p=(e==null?void 0:e.kind)==="note",w=(e==null?void 0:e.kind)==="photo",m=(e==null?void 0:e.kind)==="reference";E.useEffect(()=>{if(!f)return;i({}),d(!1);const D=window.requestAnimationFrame(()=>{var R;(R=c.current)==null||R.focus()});return()=>window.cancelAnimationFrame(D)},[f,e==null?void 0:e.kind,e==null?void 0:e.targetId,e==null?void 0:e.targetType]),E.useEffect(()=>{if(!f)return;const D=R=>{if(R.key==="Escape"){R.preventDefault(),r();return}if(R.key!=="Tab"||!u.current)return;const P=u.current.querySelectorAll('button, [href], input, textarea, select, [tabindex]:not([tabindex="-1"])');if(!P.length)return;const I=P[0],T=P[P.length-1],W=document.activeElement;R.shiftKey&&W===I?(R.preventDefault(),T.focus()):!R.shiftKey&&W===T&&(R.preventDefault(),I.focus())};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[f,r]);const x=D=>{if(!D)return!1;try{const R=new URL(D);return["http:","https:"].includes(R.protocol)}catch{return!1}},h={};p&&!(((v=e==null?void 0:e.values)==null?void 0:v.content)||"").trim()&&(h.content="La note est obligatoire."),w&&!x(((N=e==null?void 0:e.values)==null?void 0:N.url)||"")&&(h.url="URL invalide (http/https)."),m&&!(((S=e==null?void 0:e.values)==null?void 0:S.title)||"").trim()&&(h.title="Le titre est obligatoire."),m&&!x(((A=e==null?void 0:e.values)==null?void 0:A.url)||"")&&(h.url="URL invalide (http/https).");const y=!t&&Object.keys(h).length===0,g=D=>(l||a[D])&&h[D],j=D=>i(R=>({...R,[D]:!0}));return f?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40 bg-black/40",onClick:r}),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:n.jsxs("div",{ref:u,className:"w-full max-w-lg rounded-2xl bg-white border border-stone-200 shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"px-5 py-4 border-b border-stone-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:e.title}),n.jsx("button",{onClick:r,className:"text-stone-500 hover:text-stone-900",children:"Fermer"})]}),n.jsxs("form",{className:"p-5 space-y-4",onSubmit:D=>{D.preventDefault(),d(!0),y&&o()},children:[p&&n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Note"}),n.jsx("textarea",{ref:c,className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm ${g("content")?"border-red-400":"border-stone-300"}`,rows:5,value:e.values.content||"",onChange:D=>s("content",D.target.value),onBlur:()=>j("content"),required:!0}),g("content")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.content})]}),w&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"URL photo"}),n.jsx("input",{ref:c,className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm ${g("url")?"border-red-400":"border-stone-300"}`,type:"url",value:e.values.url||"",onChange:D=>s("url",D.target.value),onBlur:()=>j("url"),required:!0}),g("url")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.url})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Légende"}),n.jsx("input",{className:"mt-1 w-full rounded-xl border border-stone-300 px-3 py-2 text-sm",type:"text",value:e.values.caption||"",onChange:D=>s("caption",D.target.value)})]})]}),m&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Titre"}),n.jsx("input",{ref:c,className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm ${g("title")?"border-red-400":"border-stone-300"}`,type:"text",value:e.values.title||"",onChange:D=>s("title",D.target.value),onBlur:()=>j("title"),required:!0}),g("title")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.title})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"URL"}),n.jsx("input",{className:`mt-1 w-full rounded-xl border px-3 py-2 text-sm ${g("url")?"border-red-400":"border-stone-300"}`,type:"url",value:e.values.url||"",onChange:D=>s("url",D.target.value),onBlur:()=>j("url"),required:!0}),g("url")&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.url})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Source"}),n.jsx("input",{className:"mt-1 w-full rounded-xl border border-stone-300 px-3 py-2 text-sm",type:"text",value:e.values.source||"",onChange:D=>s("source",D.target.value)})]})]}),n.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:r,className:"px-3 py-2 rounded-lg border border-stone-300 text-sm",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:!y,className:"px-3 py-2 rounded-lg bg-[#5B5781] text-white text-sm disabled:opacity-60",children:t?"Envoi...":"Publier"})]})]})]})})]}):null}function cw({currentContributorId:e,initialPaletteId:t}){const[r,s]=E.useState(()=>Al(window.location.pathname)),[o,a]=E.useState(!0),[i,l]=E.useState(!1),[d,u]=E.useState(null),[c,f]=E.useState(null),[p,w]=E.useState(J0),[m,x]=E.useState([]),[h,y]=E.useState(null),[g,j]=E.useState([]),[v,N]=E.useState([]),[S,A]=E.useState(null),[D,R]=E.useState(null),[P,I]=E.useState(null),[T,W]=E.useState(null),[O,B]=E.useState(null),[z,J]=E.useState(null),L=E.useMemo(()=>{var se;const H=[];D!=null&&D.species&&H.push(D.species),(se=S==null?void 0:S.species)!=null&&se.length&&H.push(...S.species),P!=null&&P.species&&H.push(P.species),m.filter(Z=>Z.type==="species").forEach(Z=>{H.push({id:Z.id,genusId:null,latinName:Z.latinName,type:Z.plantType||"tree",exposures:Z.exposures||[]})});const Y=new Map;return H.forEach(Z=>{Y.has(Z.id)||Y.set(Z.id,Z)}),Array.from(Y.values())},[S,m,D,P]),V=E.useMemo(()=>{var se;const H=[];(se=D==null?void 0:D.varieties)!=null&&se.length&&H.push(...D.varieties),P!=null&&P.variety&&H.push(P.variety);const Y=new Map;return H.forEach(Z=>{Y.has(Z.id)||Y.set(Z.id,Z)}),Array.from(Y.values())},[D,P]),q=E.useMemo(()=>h!=null&&h.strates?Object.values(h.strates).flat().map(H=>H.id):[],[h]),k=E.useCallback((H=[])=>{N(Y=>{const se=new Map(Y.map(Z=>[Z.id,Z]));return H.forEach(Z=>{Z!=null&&Z.id&&se.set(Z.id,Z)}),Array.from(se.values())})},[]),b=E.useCallback(async()=>{const H=await Be("/api/v1/plants/filter-options");f(H)},[]),K=E.useCallback(async H=>{const Y=new URLSearchParams;H.query&&Y.set("query",H.query),["types","exposures","hardinessZones","edibleParts","interests","nativeCountries","soilTypes","soilMoisture","wateringNeed"].forEach(Re=>{(H[Re]||[]).forEach(Ft=>Y.append(`${Re}[]`,Ft))});const se=Y.toString(),Z=await Be(`/api/v1/plants/search${se?`?${se}`:""}`);x(Z.items||[])},[]),re=E.useCallback(async()=>{const H=await Be("/api/v1/plants/activity");j(H.items||[])},[]),ee=E.useCallback(async H=>{if(!H){y(null);return}const Y=await Be(`/api/v1/plants/palettes/${H}`);y(Y)},[]),$=E.useCallback(async()=>{if(h!=null&&h.id)return h;const H=await Be("/api/v1/plants/palettes",{method:"POST",body:JSON.stringify({name:"Palette rapide",description:"Créée automatiquement depuis la recherche",created_by:e||"anonymous"})});return y(H),H},[e,h]),X=E.useCallback(async H=>{const Y=await Be(`/api/v1/plants/genera/${H}`);A(Y),k(Y.contributors||[])},[k]),ce=E.useCallback(async H=>{const Y=await Be(`/api/v1/plants/species/${H}`);R(Y),k(Y.contributors||[])},[k]),xe=E.useCallback(async H=>{const Y=await Be(`/api/v1/plants/varieties/${H}`);I(Y),k(Y.contributors||[])},[k]),Pe=E.useCallback(async H=>{const Y=await Be(`/api/v1/plants/contributors/${H}`);W(Y),k([Y.contributor])},[k]),pe=E.useCallback((H,Y,se=!1)=>{const Z=iw(H,Y);se?window.history.replaceState({},"",Z):window.history.pushState({},"",Z),s({view:H,id:Y})},[]),Ge=E.useCallback(async()=>{l(!0),u(null);try{await Promise.all([K(p),re()]),r.view==="genus"&&r.id&&await X(r.id),r.view==="species"&&r.id&&await ce(r.id),r.view==="variety"&&r.id&&await xe(r.id),r.view==="contributor"&&r.id&&await Pe(r.id),r.view==="palette"&&(h!=null&&h.id)&&await ee(h.id)}catch(H){u(H.message)}finally{l(!1)}},[p,re,Pe,X,ee,K,ce,xe,h,r.id,r.view]);E.useEffect(()=>{let H=!0;async function Y(){a(!0),u(null);try{await Promise.all([b(),K(J0),re(),t?ee(t):Promise.resolve()]);const Z=Al(window.location.pathname);H&&(s(Z),Z.view==="genus"&&Z.id&&await X(Z.id),Z.view==="species"&&Z.id&&await ce(Z.id),Z.view==="variety"&&Z.id&&await xe(Z.id),Z.view==="contributor"&&Z.id&&await Pe(Z.id))}catch(Z){H&&u(Z.message)}finally{H&&a(!1)}}Y();const se=()=>{const Z=Al(window.location.pathname);s(Z)};return window.addEventListener("popstate",se),()=>{H=!1,window.removeEventListener("popstate",se)}},[t,re,Pe,b,X,ee,K,ce,xe]),E.useEffect(()=>{let H=!1;async function Y(){try{await K(p)}catch(se){H||u(se.message)}}return Y(),()=>{H=!0}},[p,K]),E.useEffect(()=>{async function H(){u(null);try{r.view==="genus"&&r.id&&await X(r.id),r.view==="species"&&r.id&&await ce(r.id),r.view==="variety"&&r.id&&await xe(r.id),r.view==="contributor"&&r.id&&await Pe(r.id)}catch(Y){u(Y.message)}}H()},[Pe,X,ce,xe,r.id,r.view]);const je=E.useCallback(async H=>{l(!0),u(null);try{return await H(),await Promise.all([re(),K(p)]),r.view==="genus"&&r.id&&await X(r.id),r.view==="species"&&r.id&&await ce(r.id),r.view==="variety"&&r.id&&await xe(r.id),r.view==="contributor"&&r.id&&await Pe(r.id),h!=null&&h.id&&await ee(h.id),!0}catch(Y){return u(Y.message),!1}finally{l(!1)}},[p,re,Pe,X,ee,K,ce,xe,h,r.id,r.view]),ft=E.useCallback((H,Y)=>{J(null),B({kind:"note",title:"Ajouter une note",targetType:H,targetId:Y,values:{content:""}})},[]),Qt=E.useCallback((H,Y)=>{J(null),B({kind:"photo",title:"Ajouter une photo",targetType:H,targetId:Y,values:{url:"",caption:""}})},[]),dn=E.useCallback((H,Y)=>{J(null),B({kind:"reference",title:"Ajouter une référence",targetType:H,targetId:Y,values:{title:"",url:"",source:"Contributeur"}})},[]),Bt=E.useCallback((H,Y)=>{B(se=>se&&{...se,values:{...se.values,[H]:Y}})},[]),Lt=E.useCallback(async()=>{if(!O)return;const{kind:H,targetType:Y,targetId:se,values:Z}=O;await je(async()=>{H==="note"&&await Be("/api/v1/plants/notes",{method:"POST",body:JSON.stringify({target_type:Y,target_id:se,contributor_id:e,content:Z.content,language:"fr",photos:[]})}),H==="photo"&&await Be("/api/v1/plants/photos",{method:"POST",body:JSON.stringify({target_type:Y,target_id:se,contributor_id:e,url:Z.url,caption:Z.caption||""})}),H==="reference"&&await Be("/api/v1/plants/references",{method:"POST",body:JSON.stringify({target_type:Y,target_id:se,reference_type:"link",title:Z.title,url:Z.url,source:Z.source||"Contributeur",contributor_id:e})})})&&(B(null),J("Contribution publiée."))},[O,e,je]),Mt=E.useCallback((H,Y)=>{je(async()=>{await Be("/api/v1/plants/ai-summary",{method:"POST",body:JSON.stringify({target_type:H,target_id:Y})})})},[je]),Ot=E.useCallback((H,Y,se)=>{je(async()=>{const Z=await $();await Be(`/api/v1/plants/palettes/${Z.id}/items`,{method:"POST",body:JSON.stringify({item_type:Y,item_id:H,strate_key:se,position:0})})})},[$,je]),cn=E.useCallback((H,Y)=>{var Z;if(!((Z=h==null?void 0:h.strates)!=null&&Z[Y]))return;const se=h.strates[Y].find(Re=>Re.id===H||Re.paletteItemId===H);se&&je(async()=>{await Be(`/api/v1/plants/palette-items/${se.paletteItemId||se.id}`,{method:"DELETE"})})},[je,h]),un=E.useCallback((H,Y,se)=>{var Re;if(Y===se||!((Re=h==null?void 0:h.strates)!=null&&Re[Y]))return;const Z=h.strates[Y].find(wt=>wt.paletteItemId===H||wt.id===H);Z&&je(async()=>{await Be(`/api/v1/plants/palette-items/${Z.paletteItemId||Z.id}`,{method:"PATCH",body:JSON.stringify({strate_key:se,position:0})})})},[je,h]),mn=E.useCallback((H,Y)=>{je(async()=>{if(h!=null&&h.id){await Be(`/api/v1/plants/palettes/${h.id}`,{method:"PATCH",body:JSON.stringify({name:H,description:Y})});return}const se=await Be("/api/v1/plants/palettes",{method:"POST",body:JSON.stringify({name:H,description:Y,created_by:e||"anonymous"})});y(se)})},[e,je,h]),pn=E.useCallback(()=>{h!=null&&h.strates&&je(async()=>{const H=Object.values(h.strates).flat();await Promise.all(H.map(Y=>Be(`/api/v1/plants/palette-items/${Y.paletteItemId||Y.id}`,{method:"DELETE"})))})},[je,h]),Gt=E.useMemo(()=>T?T.recentActivity||[]:[],[T]),Kt=E.useCallback(()=>{if(!(h!=null&&h.id)){J("Sauvegardez la palette avant export PDF.");return}window.open(`/api/v1/plants/palettes/${h.id}/export`,"_blank","noopener,noreferrer")},[h==null?void 0:h.id]),at=E.useCallback(async()=>{if(!(h!=null&&h.id)){J("Sauvegardez la palette avant envoi au Design Studio.");return}l(!0),u(null);try{const H=await Be(`/api/v1/plants/palettes/${h.id}/send-to-design-studio`,{method:"POST"});J(H.message||"Palette envoyée."),window.location.href=H.designStudioUrl}catch(H){u(H.message)}finally{l(!1)}},[h==null?void 0:h.id]);return o||!c?n.jsx("main",{className:"min-h-screen bg-stone-50 text-stone-800 flex items-center justify-center",children:"Chargement Plant Database..."}):n.jsxs("main",{className:"min-h-screen bg-stone-50 text-stone-900",children:[n.jsx(lw,{currentView:r.view,onNavigate:H=>pe(H),onReload:Ge}),d&&n.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-4",children:n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 text-red-700 px-3 py-2 text-sm",children:d})}),i&&n.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-2 text-xs text-stone-500",children:"Synchronisation en cours..."}),r.view==="search"&&n.jsx(Nk,{filterOptions:c,filters:p,results:m,paletteItemIds:q,onSearchChange:H=>w(Y=>({...Y,query:H})),onFiltersChange:w,onResultSelect:(H,Y)=>pe(Y==="genus"?"genus":Y,H),onAddToPalette:Ot}),r.view==="genus"&&S&&n.jsx(zk,{genus:S.genus,species:S.species||[],commonNames:S.commonNames||[],references:S.references||[],photos:S.photos||[],notes:S.notes||[],contributors:S.contributors||[],aiSummary:S.aiSummary,filterOptions:c,allGenera:m.filter(H=>H.type==="genus").map(H=>({id:H.id,latinName:H.latinName,description:""})),allCommonNames:[],onSpeciesSelect:H=>pe("species",H),onContributorSelect:H=>pe("contributor",H),onGenusSelect:H=>pe("genus",H),onGenerateAISummary:()=>Mt("genus",S.genus.id),onAddPhoto:()=>Qt("genus",S.genus.id),onAddNote:()=>ft("genus",S.genus.id),onAddReference:()=>dn("genus",S.genus.id)}),r.view==="species"&&D&&n.jsx(Ik,{species:D.species,genus:D.genus,varieties:D.varieties||[],commonNames:D.commonNames||[],references:D.references||[],photos:D.photos||[],notes:D.notes||[],plantLocations:D.locations||[],nurseryStocks:D.nurseryStock||[],contributors:D.contributors||[],aiSummary:D.aiSummary,filterOptions:c,siblingSpecies:D.siblingSpecies||[],onVarietySelect:H=>pe("variety",H),onGenusSelect:H=>pe("genus",H),onContributorSelect:H=>pe("contributor",H),onAddToPalette:H=>Ot(D.species.id,"species",H),onGenerateAISummary:()=>Mt("species",D.species.id),onAddPhoto:()=>Qt("species",D.species.id),onAddNote:()=>ft("species",D.species.id),onAddReference:()=>dn("species",D.species.id)}),r.view==="variety"&&P&&n.jsx(Uk,{variety:P.variety,species:P.species,genus:P.genus,commonNames:P.commonNames||[],references:P.references||[],photos:P.photos||[],notes:P.notes||[],plantLocations:P.locations||[],nurseryStocks:P.nurseryStock||[],contributors:P.contributors||[],aiSummary:P.aiSummary,filterOptions:c,varieties:P.siblingVarieties||[],onVarietySelect:H=>pe("variety",H),onSpeciesSelect:H=>pe("species",H),onContributorSelect:H=>pe("contributor",H),onAddToPalette:H=>Ot(P.variety.id,"variety",H),onGenerateAISummary:()=>Mt("variety",P.variety.id),onAddPhoto:()=>Qt("variety",P.variety.id),onAddNote:()=>ft("variety",P.variety.id),onAddReference:()=>dn("variety",P.variety.id)}),r.view==="palette"&&n.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:n.jsx("div",{className:"rounded-2xl border border-stone-200 overflow-hidden bg-white",children:n.jsx(qk,{palette:h,species:L,varieties:V,onRemoveItem:cn,onMoveItem:un,onSave:mn,onClear:pn,onExportPDF:Kt,onSendToDesignStudio:at})})}),r.view==="activity"&&n.jsx(Xk,{activities:g,contributors:v,onActivitySelect:(H,Y)=>pe(Y,H),onContributorSelect:H=>pe("contributor",H),hasMore:!1}),r.view==="contributor"&&(T==null?void 0:T.contributor)&&n.jsx(aw,{contributor:T.contributor,recentActivities:Gt,onActivitySelect:(H,Y)=>pe(Y,H)}),z&&n.jsx("div",{className:"fixed bottom-4 right-4 z-30",children:n.jsxs("div",{className:"rounded-xl bg-stone-900 text-white text-sm px-3 py-2 shadow-lg",children:[z,n.jsx("button",{className:"ml-3 underline",onClick:()=>J(null),children:"Fermer"})]})}),n.jsx(dw,{modal:O,busy:i,onClose:()=>B(null),onChange:Bt,onSubmit:Lt})]})}const uw=Object.freeze(Object.defineProperty({__proto__:null,default:cw},Symbol.toStringTag,{value:"Module"}));var Pf={exports:{}},jt={},Tf={exports:{}},Bf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,V){var q=L.length;L.push(V);e:for(;0<q;){var k=q-1>>>1,b=L[k];if(0<o(b,V))L[k]=V,L[q]=b,q=k;else break e}}function r(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var V=L[0],q=L.pop();if(q!==V){L[0]=q;e:for(var k=0,b=L.length,K=b>>>1;k<K;){var re=2*(k+1)-1,ee=L[re],$=re+1,X=L[$];if(0>o(ee,q))$<b&&0>o(X,ee)?(L[k]=X,L[$]=q,k=$):(L[k]=ee,L[re]=q,k=re);else if($<b&&0>o(X,q))L[k]=X,L[$]=q,k=$;else break e}}return V}function o(L,V){var q=L.sortIndex-V.sortIndex;return q!==0?q:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var d=[],u=[],c=1,f=null,p=3,w=!1,m=!1,x=!1,h=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(L){for(var V=r(u);V!==null;){if(V.callback===null)s(u);else if(V.startTime<=L)s(u),V.sortIndex=V.expirationTime,t(d,V);else break;V=r(u)}}function v(L){if(x=!1,j(L),!m)if(r(d)!==null)m=!0,z(N);else{var V=r(u);V!==null&&J(v,V.startTime-L)}}function N(L,V){m=!1,x&&(x=!1,y(D),D=-1),w=!0;var q=p;try{for(j(V),f=r(d);f!==null&&(!(f.expirationTime>V)||L&&!I());){var k=f.callback;if(typeof k=="function"){f.callback=null,p=f.priorityLevel;var b=k(f.expirationTime<=V);V=e.unstable_now(),typeof b=="function"?f.callback=b:f===r(d)&&s(d),j(V)}else s(d);f=r(d)}if(f!==null)var K=!0;else{var re=r(u);re!==null&&J(v,re.startTime-V),K=!1}return K}finally{f=null,p=q,w=!1}}var S=!1,A=null,D=-1,R=5,P=-1;function I(){return!(e.unstable_now()-P<R)}function T(){if(A!==null){var L=e.unstable_now();P=L;var V=!0;try{V=A(!0,L)}finally{V?W():(S=!1,A=null)}}else S=!1}var W;if(typeof g=="function")W=function(){g(T)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,B=O.port2;O.port1.onmessage=T,W=function(){B.postMessage(null)}}else W=function(){h(T,0)};function z(L){A=L,S||(S=!0,W())}function J(L,V){D=h(function(){L(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){m||w||(m=!0,z(N))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(L){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var q=p;p=V;try{return L()}finally{p=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var q=p;p=L;try{return V()}finally{p=q}},e.unstable_scheduleCallback=function(L,V,q){var k=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?k+q:k):q=k,L){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=q+b,L={id:c++,callback:V,priorityLevel:L,startTime:q,expirationTime:b,sortIndex:-1},q>k?(L.sortIndex=q,t(u,L),r(d)===null&&L===r(u)&&(x?(y(D),D=-1):x=!0,J(v,q-k))):(L.sortIndex=b,t(d,L),m||w||(m=!0,z(N))),L},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(L){var V=p;return function(){var q=p;p=V;try{return L.apply(this,arguments)}finally{p=q}}}})(Bf);Tf.exports=Bf;var mw=Tf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw=E,bt=mw;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lf=new Set,ao={};function Pr(e,t){fs(e,t),fs(e+"Capture",t)}function fs(e,t){for(ao[e]=t,e=0;e<t.length;e++)Lf.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q0={},G0={};function xw(e){return xd.call(G0,e)?!0:xd.call(Q0,e)?!1:fw.test(e)?G0[e]=!0:(Q0[e]=!0,!1)}function hw(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gw(e,t,r,s){if(t===null||typeof t>"u"||hw(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,r,s,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var _c=/[\-:]([a-z])/g;function Ec(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_c,Ec);Qe[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_c,Ec);Qe[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_c,Ec);Qe[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dc(e,t,r,s){var o=Qe.hasOwnProperty(t)?Qe[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gw(t,r,o,s)&&(r=null),s||o===null?xw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,s=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Dn=pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),Vr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),Ac=Symbol.for("react.strict_mode"),hd=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Of=Symbol.for("react.context"),Pc=Symbol.for("react.forward_ref"),gd=Symbol.for("react.suspense"),vd=Symbol.for("react.suspense_list"),Tc=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),Ff=Symbol.for("react.offscreen"),K0=Symbol.iterator;function Bs(e){return e===null||typeof e!="object"?null:(e=K0&&e[K0]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,Pl;function zs(e){if(Pl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pl=t&&t[1]||""}return`
`+Pl+e}var Tl=!1;function Bl(e,t){if(!e||Tl)return"";Tl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),a=s.stack.split(`
`),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==a[l]){var d=`
`+o[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=l);break}}}finally{Tl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zs(e):""}function vw(e){switch(e.tag){case 5:return zs(e.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return e=Bl(e.type,!1),e;case 11:return e=Bl(e.type.render,!1),e;case 1:return e=Bl(e.type,!0),e;default:return""}}function yd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case Vr:return"Portal";case hd:return"Profiler";case Ac:return"StrictMode";case gd:return"Suspense";case vd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Of:return(e.displayName||"Context")+".Consumer";case Mf:return(e._context.displayName||"Context")+".Provider";case Pc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tc:return t=e.displayName||null,t!==null?t:yd(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return yd(e(t))}catch{}}return null}function yw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(t);case 8:return t===Ac?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function er(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bw(e){var t=Rf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ma(e){e._valueTracker||(e._valueTracker=bw(e))}function $f(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Rf(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ri(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bd(e,t){var r=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Y0(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=er(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function If(e,t){t=t.checked,t!=null&&Dc(e,"checked",t,!1)}function jd(e,t){If(e,t);var r=er(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?kd(e,t.type,r):t.hasOwnProperty("defaultValue")&&kd(e,t.type,er(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function X0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function kd(e,t,r){(t!=="number"||ri(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ws=Array.isArray;function ss(e,t,r,s){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&s&&(e[r].defaultSelected=!0)}else{for(r=""+er(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function wd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Z0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(Ws(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:er(r)}}function zf(e,t){var r=er(t.value),s=er(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function em(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pa,Uf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pa=pa||document.createElement("div"),pa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function io(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jw=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(e){jw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gs[t]=Gs[e]})});function Hf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Gs.hasOwnProperty(e)&&Gs[e]?(""+t).trim():t+"px"}function Vf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,o=Hf(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,o):e[r]=o}}var kw=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sd(e,t){if(t){if(kw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Cd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=null;function Bc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ed=null,os=null,as=null;function tm(e){if(e=Mo(e)){if(typeof Ed!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Wi(t),Ed(e.stateNode,e.type,t))}}function qf(e){os?as?as.push(e):as=[e]:os=e}function Jf(){if(os){var e=os,t=as;if(as=os=null,tm(e),t)for(e=0;e<t.length;e++)tm(t[e])}}function Qf(e,t){return e(t)}function Gf(){}var Ll=!1;function Kf(e,t,r){if(Ll)return e(t,r);Ll=!0;try{return Qf(e,t,r)}finally{Ll=!1,(os!==null||as!==null)&&(Gf(),Jf())}}function lo(e,t){var r=e.stateNode;if(r===null)return null;var s=Wi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Dd=!1;if(Nn)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Dd=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Dd=!1}function ww(e,t,r,s,o,a,i,l,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var Ks=!1,si=null,oi=!1,Ad=null,Nw={onError:function(e){Ks=!0,si=e}};function Sw(e,t,r,s,o,a,i,l,d){Ks=!1,si=null,ww.apply(Nw,arguments)}function Cw(e,t,r,s,o,a,i,l,d){if(Sw.apply(this,arguments),Ks){if(Ks){var u=si;Ks=!1,si=null}else throw Error(G(198));oi||(oi=!0,Ad=u)}}function Tr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Yf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nm(e){if(Tr(e)!==e)throw Error(G(188))}function _w(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,s=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(s=o.return,s!==null){r=s;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return nm(o),e;if(a===s)return nm(o),t;a=a.sibling}throw Error(G(188))}if(r.return!==s.return)r=o,s=a;else{for(var i=!1,l=o.child;l;){if(l===r){i=!0,r=o,s=a;break}if(l===s){i=!0,s=o,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,s=o;break}if(l===s){i=!0,s=a,r=o;break}l=l.sibling}if(!i)throw Error(G(189))}}if(r.alternate!==s)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function Xf(e){return e=_w(e),e!==null?Zf(e):null}function Zf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zf(e);if(t!==null)return t;e=e.sibling}return null}var ex=bt.unstable_scheduleCallback,rm=bt.unstable_cancelCallback,Ew=bt.unstable_shouldYield,Dw=bt.unstable_requestPaint,Te=bt.unstable_now,Aw=bt.unstable_getCurrentPriorityLevel,Lc=bt.unstable_ImmediatePriority,tx=bt.unstable_UserBlockingPriority,ai=bt.unstable_NormalPriority,Pw=bt.unstable_LowPriority,nx=bt.unstable_IdlePriority,Ri=null,an=null;function Tw(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ri,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Mw,Bw=Math.log,Lw=Math.LN2;function Mw(e){return e>>>=0,e===0?32:31-(Bw(e)/Lw|0)|0}var fa=64,xa=4194304;function Us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ii(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,o=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~o;l!==0?s=Us(l):(a&=i,a!==0&&(s=Us(a)))}else i=r&~o,i!==0?s=Us(i):a!==0&&(s=Us(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&o)&&(o=s&-s,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ht(t),o=1<<r,s|=e[r],t&=~o;return s}function Ow(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fw(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Ht(a),l=1<<i,d=o[i];d===-1?(!(l&r)||l&s)&&(o[i]=Ow(l,t)):d<=t&&(e.expiredLanes|=l),a&=~l}}function Pd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rx(){var e=fa;return fa<<=1,!(fa&4194240)&&(fa=64),e}function Ml(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=r}function Rw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Ht(r),a=1<<o;t[o]=0,s[o]=-1,e[o]=-1,r&=~a}}function Mc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ht(r),o=1<<s;o&t|e[s]&t&&(e[s]|=t),r&=~o}}var fe=0;function sx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ox,Oc,ax,ix,lx,Td=!1,ha=[],Vn=null,qn=null,Jn=null,co=new Map,uo=new Map,In=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sm(e,t){switch(e){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":co.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(t.pointerId)}}function Ms(e,t,r,s,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[o]},t!==null&&(t=Mo(t),t!==null&&Oc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Iw(e,t,r,s,o){switch(t){case"focusin":return Vn=Ms(Vn,e,t,r,s,o),!0;case"dragenter":return qn=Ms(qn,e,t,r,s,o),!0;case"mouseover":return Jn=Ms(Jn,e,t,r,s,o),!0;case"pointerover":var a=o.pointerId;return co.set(a,Ms(co.get(a)||null,e,t,r,s,o)),!0;case"gotpointercapture":return a=o.pointerId,uo.set(a,Ms(uo.get(a)||null,e,t,r,s,o)),!0}return!1}function dx(e){var t=gr(e.target);if(t!==null){var r=Tr(t);if(r!==null){if(t=r.tag,t===13){if(t=Yf(r),t!==null){e.blockedOn=t,lx(e.priority,function(){ax(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ra(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);_d=s,r.target.dispatchEvent(s),_d=null}else return t=Mo(r),t!==null&&Oc(t),e.blockedOn=r,!1;t.shift()}return!0}function om(e,t,r){Ra(e)&&r.delete(t)}function zw(){Td=!1,Vn!==null&&Ra(Vn)&&(Vn=null),qn!==null&&Ra(qn)&&(qn=null),Jn!==null&&Ra(Jn)&&(Jn=null),co.forEach(om),uo.forEach(om)}function Os(e,t){e.blockedOn===t&&(e.blockedOn=null,Td||(Td=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,zw)))}function mo(e){function t(o){return Os(o,e)}if(0<ha.length){Os(ha[0],e);for(var r=1;r<ha.length;r++){var s=ha[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Vn!==null&&Os(Vn,e),qn!==null&&Os(qn,e),Jn!==null&&Os(Jn,e),co.forEach(t),uo.forEach(t),r=0;r<In.length;r++)s=In[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<In.length&&(r=In[0],r.blockedOn===null);)dx(r),r.blockedOn===null&&In.shift()}var is=Dn.ReactCurrentBatchConfig,li=!0;function Ww(e,t,r,s){var o=fe,a=is.transition;is.transition=null;try{fe=1,Fc(e,t,r,s)}finally{fe=o,is.transition=a}}function Uw(e,t,r,s){var o=fe,a=is.transition;is.transition=null;try{fe=4,Fc(e,t,r,s)}finally{fe=o,is.transition=a}}function Fc(e,t,r,s){if(li){var o=Bd(e,t,r,s);if(o===null)Vl(e,t,s,di,r),sm(e,s);else if(Iw(o,e,t,r,s))s.stopPropagation();else if(sm(e,s),t&4&&-1<$w.indexOf(e)){for(;o!==null;){var a=Mo(o);if(a!==null&&ox(a),a=Bd(e,t,r,s),a===null&&Vl(e,t,s,di,r),a===o)break;o=a}o!==null&&s.stopPropagation()}else Vl(e,t,s,null,r)}}var di=null;function Bd(e,t,r,s){if(di=null,e=Bc(s),e=gr(e),e!==null)if(t=Tr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Yf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return di=e,null}function cx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Aw()){case Lc:return 1;case tx:return 4;case ai:case Pw:return 16;case nx:return 536870912;default:return 16}default:return 16}}var Un=null,Rc=null,$a=null;function ux(){if($a)return $a;var e,t=Rc,r=t.length,s,o="value"in Un?Un.value:Un.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===o[a-s];s++);return $a=o.slice(e,1<s?1-s:void 0)}function Ia(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ga(){return!0}function am(){return!1}function kt(e){function t(r,s,o,a,i){this._reactName=r,this._targetInst=o,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ga:am,this.isPropagationStopped=am,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),t}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=kt(Ns),Lo=Ce({},Ns,{view:0,detail:0}),Hw=kt(Lo),Ol,Fl,Fs,$i=Ce({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?(Ol=e.screenX-Fs.screenX,Fl=e.screenY-Fs.screenY):Fl=Ol=0,Fs=e),Ol)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),im=kt($i),Vw=Ce({},$i,{dataTransfer:0}),qw=kt(Vw),Jw=Ce({},Lo,{relatedTarget:0}),Rl=kt(Jw),Qw=Ce({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Gw=kt(Qw),Kw=Ce({},Ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yw=kt(Kw),Xw=Ce({},Ns,{data:0}),lm=kt(Xw),Zw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tN[e])?!!t[e]:!1}function Ic(){return nN}var rN=Ce({},Lo,{key:function(e){if(e.key){var t=Zw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ia(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(e){return e.type==="keypress"?Ia(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ia(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sN=kt(rN),oN=Ce({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=kt(oN),aN=Ce({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),iN=kt(aN),lN=Ce({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),dN=kt(lN),cN=Ce({},$i,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uN=kt(cN),mN=[9,13,27,32],zc=Nn&&"CompositionEvent"in window,Ys=null;Nn&&"documentMode"in document&&(Ys=document.documentMode);var pN=Nn&&"TextEvent"in window&&!Ys,mx=Nn&&(!zc||Ys&&8<Ys&&11>=Ys),cm=" ",um=!1;function px(e,t){switch(e){case"keyup":return mN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jr=!1;function fN(e,t){switch(e){case"compositionend":return fx(t);case"keypress":return t.which!==32?null:(um=!0,cm);case"textInput":return e=t.data,e===cm&&um?null:e;default:return null}}function xN(e,t){if(Jr)return e==="compositionend"||!zc&&px(e,t)?(e=ux(),$a=Rc=Un=null,Jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mx&&t.locale!=="ko"?null:t.data;default:return null}}var hN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hN[e.type]:t==="textarea"}function xx(e,t,r,s){qf(s),t=ci(t,"onChange"),0<t.length&&(r=new $c("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Xs=null,po=null;function gN(e){Cx(e,0)}function Ii(e){var t=Kr(e);if($f(t))return e}function vN(e,t){if(e==="change")return t}var hx=!1;if(Nn){var $l;if(Nn){var Il="oninput"in document;if(!Il){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),Il=typeof pm.oninput=="function"}$l=Il}else $l=!1;hx=$l&&(!document.documentMode||9<document.documentMode)}function fm(){Xs&&(Xs.detachEvent("onpropertychange",gx),po=Xs=null)}function gx(e){if(e.propertyName==="value"&&Ii(po)){var t=[];xx(t,po,e,Bc(e)),Kf(gN,t)}}function yN(e,t,r){e==="focusin"?(fm(),Xs=t,po=r,Xs.attachEvent("onpropertychange",gx)):e==="focusout"&&fm()}function bN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(po)}function jN(e,t){if(e==="click")return Ii(t)}function kN(e,t){if(e==="input"||e==="change")return Ii(t)}function wN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:wN;function fo(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var o=r[s];if(!xd.call(t,o)||!qt(e[o],t[o]))return!1}return!0}function xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hm(e,t){var r=xm(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xm(r)}}function vx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yx(){for(var e=window,t=ri();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ri(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function NN(e){var t=yx(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vx(r.ownerDocument.documentElement,r)){if(s!==null&&Wc(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,a=Math.min(s.start,o);s=s.end===void 0?a:Math.min(s.end,o),!e.extend&&a>s&&(o=s,s=a,a=o),o=hm(r,a);var i=hm(r,s);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var SN=Nn&&"documentMode"in document&&11>=document.documentMode,Qr=null,Ld=null,Zs=null,Md=!1;function gm(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Md||Qr==null||Qr!==ri(s)||(s=Qr,"selectionStart"in s&&Wc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Zs&&fo(Zs,s)||(Zs=s,s=ci(Ld,"onSelect"),0<s.length&&(t=new $c("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Qr)))}function va(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gr={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},zl={},bx={};Nn&&(bx=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function zi(e){if(zl[e])return zl[e];if(!Gr[e])return e;var t=Gr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in bx)return zl[e]=t[r];return e}var jx=zi("animationend"),kx=zi("animationiteration"),wx=zi("animationstart"),Nx=zi("transitionend"),Sx=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(e,t){Sx.set(e,t),Pr(t,[e])}for(var Wl=0;Wl<vm.length;Wl++){var Ul=vm[Wl],CN=Ul.toLowerCase(),_N=Ul[0].toUpperCase()+Ul.slice(1);rr(CN,"on"+_N)}rr(jx,"onAnimationEnd");rr(kx,"onAnimationIteration");rr(wx,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(Nx,"onTransitionEnd");fs("onMouseEnter",["mouseout","mouseover"]);fs("onMouseLeave",["mouseout","mouseover"]);fs("onPointerEnter",["pointerout","pointerover"]);fs("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function ym(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Cw(s,t,void 0,e),e.currentTarget=null}function Cx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],o=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==a&&o.isPropagationStopped())break e;ym(o,l,u),a=d}else for(i=0;i<s.length;i++){if(l=s[i],d=l.instance,u=l.currentTarget,l=l.listener,d!==a&&o.isPropagationStopped())break e;ym(o,l,u),a=d}}}if(oi)throw e=Ad,oi=!1,Ad=null,e}function ye(e,t){var r=t[Id];r===void 0&&(r=t[Id]=new Set);var s=e+"__bubble";r.has(s)||(_x(t,e,2,!1),r.add(s))}function Hl(e,t,r){var s=0;t&&(s|=4),_x(r,e,s,t)}var ya="_reactListening"+Math.random().toString(36).slice(2);function xo(e){if(!e[ya]){e[ya]=!0,Lf.forEach(function(r){r!=="selectionchange"&&(EN.has(r)||Hl(r,!1,e),Hl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ya]||(t[ya]=!0,Hl("selectionchange",!1,t))}}function _x(e,t,r,s){switch(cx(t)){case 1:var o=Ww;break;case 4:o=Uw;break;default:o=Fc}r=o.bind(null,t,r,e),o=void 0,!Dd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Vl(e,t,r,s,o){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=s.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;i=i.return}for(;l!==null;){if(i=gr(l),i===null)return;if(d=i.tag,d===5||d===6){s=a=i;continue e}l=l.parentNode}}s=s.return}Kf(function(){var u=a,c=Bc(r),f=[];e:{var p=Sx.get(e);if(p!==void 0){var w=$c,m=e;switch(e){case"keypress":if(Ia(r)===0)break e;case"keydown":case"keyup":w=sN;break;case"focusin":m="focus",w=Rl;break;case"focusout":m="blur",w=Rl;break;case"beforeblur":case"afterblur":w=Rl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=iN;break;case jx:case kx:case wx:w=Gw;break;case Nx:w=dN;break;case"scroll":w=Hw;break;case"wheel":w=uN;break;case"copy":case"cut":case"paste":w=Yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=dm}var x=(t&4)!==0,h=!x&&e==="scroll",y=x?p!==null?p+"Capture":null:p;x=[];for(var g=u,j;g!==null;){j=g;var v=j.stateNode;if(j.tag===5&&v!==null&&(j=v,y!==null&&(v=lo(g,y),v!=null&&x.push(ho(g,v,j)))),h)break;g=g.return}0<x.length&&(p=new w(p,m,null,r,c),f.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&r!==_d&&(m=r.relatedTarget||r.fromElement)&&(gr(m)||m[Sn]))break e;if((w||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,w?(m=r.relatedTarget||r.toElement,w=u,m=m?gr(m):null,m!==null&&(h=Tr(m),m!==h||m.tag!==5&&m.tag!==6)&&(m=null)):(w=null,m=u),w!==m)){if(x=im,v="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=dm,v="onPointerLeave",y="onPointerEnter",g="pointer"),h=w==null?p:Kr(w),j=m==null?p:Kr(m),p=new x(v,g+"leave",w,r,c),p.target=h,p.relatedTarget=j,v=null,gr(c)===u&&(x=new x(y,g+"enter",m,r,c),x.target=j,x.relatedTarget=h,v=x),h=v,w&&m)t:{for(x=w,y=m,g=0,j=x;j;j=Ur(j))g++;for(j=0,v=y;v;v=Ur(v))j++;for(;0<g-j;)x=Ur(x),g--;for(;0<j-g;)y=Ur(y),j--;for(;g--;){if(x===y||y!==null&&x===y.alternate)break t;x=Ur(x),y=Ur(y)}x=null}else x=null;w!==null&&bm(f,p,w,x,!1),m!==null&&h!==null&&bm(f,h,m,x,!0)}}e:{if(p=u?Kr(u):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var N=vN;else if(mm(p))if(hx)N=kN;else{N=bN;var S=yN}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=jN);if(N&&(N=N(e,u))){xx(f,N,r,c);break e}S&&S(e,p,u),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&kd(p,"number",p.value)}switch(S=u?Kr(u):window,e){case"focusin":(mm(S)||S.contentEditable==="true")&&(Qr=S,Ld=u,Zs=null);break;case"focusout":Zs=Ld=Qr=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,gm(f,r,c);break;case"selectionchange":if(SN)break;case"keydown":case"keyup":gm(f,r,c)}var A;if(zc)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Jr?px(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(mx&&r.locale!=="ko"&&(Jr||D!=="onCompositionStart"?D==="onCompositionEnd"&&Jr&&(A=ux()):(Un=c,Rc="value"in Un?Un.value:Un.textContent,Jr=!0)),S=ci(u,D),0<S.length&&(D=new lm(D,e,null,r,c),f.push({event:D,listeners:S}),A?D.data=A:(A=fx(r),A!==null&&(D.data=A)))),(A=pN?fN(e,r):xN(e,r))&&(u=ci(u,"onBeforeInput"),0<u.length&&(c=new lm("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=A))}Cx(f,t)})}function ho(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ci(e,t){for(var r=t+"Capture",s=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=lo(e,r),a!=null&&s.unshift(ho(e,a,o)),a=lo(e,t),a!=null&&s.push(ho(e,a,o))),e=e.return}return s}function Ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bm(e,t,r,s,o){for(var a=t._reactName,i=[];r!==null&&r!==s;){var l=r,d=l.alternate,u=l.stateNode;if(d!==null&&d===s)break;l.tag===5&&u!==null&&(l=u,o?(d=lo(r,a),d!=null&&i.unshift(ho(r,d,l))):o||(d=lo(r,a),d!=null&&i.push(ho(r,d,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var DN=/\r\n?/g,AN=/\u0000|\uFFFD/g;function jm(e){return(typeof e=="string"?e:""+e).replace(DN,`
`).replace(AN,"")}function ba(e,t,r){if(t=jm(t),jm(e)!==t&&r)throw Error(G(425))}function ui(){}var Od=null,Fd=null;function Rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $d=typeof setTimeout=="function"?setTimeout:void 0,PN=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,TN=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(e){return km.resolve(null).then(e).catch(BN)}:$d;function BN(e){setTimeout(function(){throw e})}function ql(e,t){var r=t,s=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(s===0){e.removeChild(o),mo(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=o}while(r);mo(t)}function Qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),on="__reactFiber$"+Ss,go="__reactProps$"+Ss,Sn="__reactContainer$"+Ss,Id="__reactEvents$"+Ss,LN="__reactListeners$"+Ss,MN="__reactHandles$"+Ss;function gr(e){var t=e[on];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Sn]||r[on]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=wm(e);e!==null;){if(r=e[on])return r;e=wm(e)}return t}e=r,r=e.parentNode}return null}function Mo(e){return e=e[on]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Wi(e){return e[go]||null}var zd=[],Yr=-1;function sr(e){return{current:e}}function be(e){0>Yr||(e.current=zd[Yr],zd[Yr]=null,Yr--)}function ge(e,t){Yr++,zd[Yr]=e.current,e.current=t}var tr={},tt=sr(tr),ut=sr(!1),Sr=tr;function xs(e,t){var r=e.type.contextTypes;if(!r)return tr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mt(e){return e=e.childContextTypes,e!=null}function mi(){be(ut),be(tt)}function Nm(e,t,r){if(tt.current!==tr)throw Error(G(168));ge(tt,t),ge(ut,r)}function Ex(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(G(108,yw(e)||"Unknown",o));return Ce({},r,s)}function pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tr,Sr=tt.current,ge(tt,e),ge(ut,ut.current),!0}function Sm(e,t,r){var s=e.stateNode;if(!s)throw Error(G(169));r?(e=Ex(e,t,Sr),s.__reactInternalMemoizedMergedChildContext=e,be(ut),be(tt),ge(tt,e)):be(ut),ge(ut,r)}var bn=null,Ui=!1,Jl=!1;function Dx(e){bn===null?bn=[e]:bn.push(e)}function ON(e){Ui=!0,Dx(e)}function or(){if(!Jl&&bn!==null){Jl=!0;var e=0,t=fe;try{var r=bn;for(fe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}bn=null,Ui=!1}catch(o){throw bn!==null&&(bn=bn.slice(e+1)),ex(Lc,or),o}finally{fe=t,Jl=!1}}return null}var Xr=[],Zr=0,fi=null,xi=0,_t=[],Et=0,Cr=null,jn=1,kn="";function mr(e,t){Xr[Zr++]=xi,Xr[Zr++]=fi,fi=e,xi=t}function Ax(e,t,r){_t[Et++]=jn,_t[Et++]=kn,_t[Et++]=Cr,Cr=e;var s=jn;e=kn;var o=32-Ht(s)-1;s&=~(1<<o),r+=1;var a=32-Ht(t)+o;if(30<a){var i=o-o%5;a=(s&(1<<i)-1).toString(32),s>>=i,o-=i,jn=1<<32-Ht(t)+o|r<<o|s,kn=a+e}else jn=1<<a|r<<o|s,kn=e}function Uc(e){e.return!==null&&(mr(e,1),Ax(e,1,0))}function Hc(e){for(;e===fi;)fi=Xr[--Zr],Xr[Zr]=null,xi=Xr[--Zr],Xr[Zr]=null;for(;e===Cr;)Cr=_t[--Et],_t[Et]=null,kn=_t[--Et],_t[Et]=null,jn=_t[--Et],_t[Et]=null}var yt=null,vt=null,ke=!1,Ut=null;function Px(e,t){var r=Dt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Cm(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,vt=Qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Cr!==null?{id:jn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Dt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,yt=e,vt=null,!0):!1;default:return!1}}function Wd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ud(e){if(ke){var t=vt;if(t){var r=t;if(!Cm(e,t)){if(Wd(e))throw Error(G(418));t=Qn(r.nextSibling);var s=yt;t&&Cm(e,t)?Px(s,r):(e.flags=e.flags&-4097|2,ke=!1,yt=e)}}else{if(Wd(e))throw Error(G(418));e.flags=e.flags&-4097|2,ke=!1,yt=e}}}function _m(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function ja(e){if(e!==yt)return!1;if(!ke)return _m(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rd(e.type,e.memoizedProps)),t&&(t=vt)){if(Wd(e))throw Tx(),Error(G(418));for(;t;)Px(e,t),t=Qn(t.nextSibling)}if(_m(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){vt=Qn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}vt=null}}else vt=yt?Qn(e.stateNode.nextSibling):null;return!0}function Tx(){for(var e=vt;e;)e=Qn(e.nextSibling)}function hs(){vt=yt=null,ke=!1}function Vc(e){Ut===null?Ut=[e]:Ut.push(e)}var FN=Dn.ReactCurrentBatchConfig;function Rs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var s=r.stateNode}if(!s)throw Error(G(147,e));var o=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=o.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function ka(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Em(e){var t=e._init;return t(e._payload)}function Bx(e){function t(y,g){if(e){var j=y.deletions;j===null?(y.deletions=[g],y.flags|=16):j.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function s(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function o(y,g){return y=Xn(y,g),y.index=0,y.sibling=null,y}function a(y,g,j){return y.index=j,e?(j=y.alternate,j!==null?(j=j.index,j<g?(y.flags|=2,g):j):(y.flags|=2,g)):(y.flags|=1048576,g)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,j,v){return g===null||g.tag!==6?(g=ed(j,y.mode,v),g.return=y,g):(g=o(g,j),g.return=y,g)}function d(y,g,j,v){var N=j.type;return N===qr?c(y,g,j.props.children,v,j.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Rn&&Em(N)===g.type)?(v=o(g,j.props),v.ref=Rs(y,g,j),v.return=y,v):(v=Ja(j.type,j.key,j.props,null,y.mode,v),v.ref=Rs(y,g,j),v.return=y,v)}function u(y,g,j,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==j.containerInfo||g.stateNode.implementation!==j.implementation?(g=td(j,y.mode,v),g.return=y,g):(g=o(g,j.children||[]),g.return=y,g)}function c(y,g,j,v,N){return g===null||g.tag!==7?(g=wr(j,y.mode,v,N),g.return=y,g):(g=o(g,j),g.return=y,g)}function f(y,g,j){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ed(""+g,y.mode,j),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ua:return j=Ja(g.type,g.key,g.props,null,y.mode,j),j.ref=Rs(y,null,g),j.return=y,j;case Vr:return g=td(g,y.mode,j),g.return=y,g;case Rn:var v=g._init;return f(y,v(g._payload),j)}if(Ws(g)||Bs(g))return g=wr(g,y.mode,j,null),g.return=y,g;ka(y,g)}return null}function p(y,g,j,v){var N=g!==null?g.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:l(y,g,""+j,v);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ua:return j.key===N?d(y,g,j,v):null;case Vr:return j.key===N?u(y,g,j,v):null;case Rn:return N=j._init,p(y,g,N(j._payload),v)}if(Ws(j)||Bs(j))return N!==null?null:c(y,g,j,v,null);ka(y,j)}return null}function w(y,g,j,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(j)||null,l(g,y,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ua:return y=y.get(v.key===null?j:v.key)||null,d(g,y,v,N);case Vr:return y=y.get(v.key===null?j:v.key)||null,u(g,y,v,N);case Rn:var S=v._init;return w(y,g,j,S(v._payload),N)}if(Ws(v)||Bs(v))return y=y.get(j)||null,c(g,y,v,N,null);ka(g,v)}return null}function m(y,g,j,v){for(var N=null,S=null,A=g,D=g=0,R=null;A!==null&&D<j.length;D++){A.index>D?(R=A,A=null):R=A.sibling;var P=p(y,A,j[D],v);if(P===null){A===null&&(A=R);break}e&&A&&P.alternate===null&&t(y,A),g=a(P,g,D),S===null?N=P:S.sibling=P,S=P,A=R}if(D===j.length)return r(y,A),ke&&mr(y,D),N;if(A===null){for(;D<j.length;D++)A=f(y,j[D],v),A!==null&&(g=a(A,g,D),S===null?N=A:S.sibling=A,S=A);return ke&&mr(y,D),N}for(A=s(y,A);D<j.length;D++)R=w(A,y,D,j[D],v),R!==null&&(e&&R.alternate!==null&&A.delete(R.key===null?D:R.key),g=a(R,g,D),S===null?N=R:S.sibling=R,S=R);return e&&A.forEach(function(I){return t(y,I)}),ke&&mr(y,D),N}function x(y,g,j,v){var N=Bs(j);if(typeof N!="function")throw Error(G(150));if(j=N.call(j),j==null)throw Error(G(151));for(var S=N=null,A=g,D=g=0,R=null,P=j.next();A!==null&&!P.done;D++,P=j.next()){A.index>D?(R=A,A=null):R=A.sibling;var I=p(y,A,P.value,v);if(I===null){A===null&&(A=R);break}e&&A&&I.alternate===null&&t(y,A),g=a(I,g,D),S===null?N=I:S.sibling=I,S=I,A=R}if(P.done)return r(y,A),ke&&mr(y,D),N;if(A===null){for(;!P.done;D++,P=j.next())P=f(y,P.value,v),P!==null&&(g=a(P,g,D),S===null?N=P:S.sibling=P,S=P);return ke&&mr(y,D),N}for(A=s(y,A);!P.done;D++,P=j.next())P=w(A,y,D,P.value,v),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?D:P.key),g=a(P,g,D),S===null?N=P:S.sibling=P,S=P);return e&&A.forEach(function(T){return t(y,T)}),ke&&mr(y,D),N}function h(y,g,j,v){if(typeof j=="object"&&j!==null&&j.type===qr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ua:e:{for(var N=j.key,S=g;S!==null;){if(S.key===N){if(N=j.type,N===qr){if(S.tag===7){r(y,S.sibling),g=o(S,j.props.children),g.return=y,y=g;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Rn&&Em(N)===S.type){r(y,S.sibling),g=o(S,j.props),g.ref=Rs(y,S,j),g.return=y,y=g;break e}r(y,S);break}else t(y,S);S=S.sibling}j.type===qr?(g=wr(j.props.children,y.mode,v,j.key),g.return=y,y=g):(v=Ja(j.type,j.key,j.props,null,y.mode,v),v.ref=Rs(y,g,j),v.return=y,y=v)}return i(y);case Vr:e:{for(S=j.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===j.containerInfo&&g.stateNode.implementation===j.implementation){r(y,g.sibling),g=o(g,j.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=td(j,y.mode,v),g.return=y,y=g}return i(y);case Rn:return S=j._init,h(y,g,S(j._payload),v)}if(Ws(j))return m(y,g,j,v);if(Bs(j))return x(y,g,j,v);ka(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,g!==null&&g.tag===6?(r(y,g.sibling),g=o(g,j),g.return=y,y=g):(r(y,g),g=ed(j,y.mode,v),g.return=y,y=g),i(y)):r(y,g)}return h}var gs=Bx(!0),Lx=Bx(!1),hi=sr(null),gi=null,es=null,qc=null;function Jc(){qc=es=gi=null}function Qc(e){var t=hi.current;be(hi),e._currentValue=t}function Hd(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ls(e,t){gi=e,qc=es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(qc!==e)if(e={context:e,memoizedValue:t,next:null},es===null){if(gi===null)throw Error(G(308));es=e,gi.dependencies={lanes:0,firstContext:e}}else es=es.next=e;return t}var vr=null;function Gc(e){vr===null?vr=[e]:vr.push(e)}function Mx(e,t,r,s){var o=t.interleaved;return o===null?(r.next=r,Gc(t)):(r.next=o.next,o.next=r),t.interleaved=r,Cn(e,s)}function Cn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var $n=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ox(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ue&2){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,Cn(e,r)}return o=s.interleaved,o===null?(t.next=t,Gc(s)):(t.next=o.next,o.next=t),s.interleaved=t,Cn(e,r)}function za(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Mc(e,r)}}function Dm(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?o=a=t:a=a.next=t}else o=a=t;r={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vi(e,t,r,s){var o=e.updateQueue;$n=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var d=l,u=d.next;d.next=null,i===null?a=u:i.next=u,i=d;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==i&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=d))}if(a!==null){var f=o.baseState;i=0,c=u=d=null,l=a;do{var p=l.lane,w=l.eventTime;if((s&p)===p){c!==null&&(c=c.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,x=l;switch(p=t,w=r,x.tag){case 1:if(m=x.payload,typeof m=="function"){f=m.call(w,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,p=typeof m=="function"?m.call(w,f,p):m,p==null)break e;f=Ce({},f,p);break e;case 2:$n=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[l]:p.push(l))}else w={eventTime:w,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=w,d=f):c=c.next=w,i|=p;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;p=l,l=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(c===null&&(d=f),o.baseState=d,o.firstBaseUpdate=u,o.lastBaseUpdate=c,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Er|=i,e.lanes=i,e.memoizedState=f}}function Am(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=r,typeof o!="function")throw Error(G(191,o));o.call(s)}}}var Oo={},ln=sr(Oo),vo=sr(Oo),yo=sr(Oo);function yr(e){if(e===Oo)throw Error(G(174));return e}function Yc(e,t){switch(ge(yo,t),ge(vo,e),ge(ln,Oo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nd(t,e)}be(ln),ge(ln,t)}function vs(){be(ln),be(vo),be(yo)}function Fx(e){yr(yo.current);var t=yr(ln.current),r=Nd(t,e.type);t!==r&&(ge(vo,e),ge(ln,r))}function Xc(e){vo.current===e&&(be(ln),be(vo))}var Ne=sr(0);function yi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ql=[];function Zc(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var Wa=Dn.ReactCurrentDispatcher,Gl=Dn.ReactCurrentBatchConfig,_r=0,Se=null,Oe=null,Ue=null,bi=!1,eo=!1,bo=0,RN=0;function Ye(){throw Error(G(321))}function eu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qt(e[r],t[r]))return!1;return!0}function tu(e,t,r,s,o,a){if(_r=a,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wa.current=e===null||e.memoizedState===null?WN:UN,e=r(s,o),eo){a=0;do{if(eo=!1,bo=0,25<=a)throw Error(G(301));a+=1,Ue=Oe=null,t.updateQueue=null,Wa.current=HN,e=r(s,o)}while(eo)}if(Wa.current=ji,t=Oe!==null&&Oe.next!==null,_r=0,Ue=Oe=Se=null,bi=!1,t)throw Error(G(300));return e}function nu(){var e=bo!==0;return bo=0,e}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Se.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Tt(){if(Oe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Ue===null?Se.memoizedState:Ue.next;if(t!==null)Ue=t,Oe=e;else{if(e===null)throw Error(G(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ue===null?Se.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function jo(e,t){return typeof t=="function"?t(e):t}function Kl(e){var t=Tt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=Oe,o=s.baseQueue,a=r.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}s.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,s=s.baseState;var l=i=null,d=null,u=a;do{var c=u.lane;if((_r&c)===c)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=f,i=s):d=d.next=f,Se.lanes|=c,Er|=c}u=u.next}while(u!==null&&u!==a);d===null?i=s:d.next=l,qt(s,t.memoizedState)||(lt=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=d,r.lastRenderedState=s}if(e=r.interleaved,e!==null){o=e;do a=o.lane,Se.lanes|=a,Er|=a,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Yl(e){var t=Tt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);qt(a,t.memoizedState)||(lt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function Rx(){}function $x(e,t){var r=Se,s=Tt(),o=t(),a=!qt(s.memoizedState,o);if(a&&(s.memoizedState=o,lt=!0),s=s.queue,ru(Wx.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Ue!==null&&Ue.memoizedState.tag&1){if(r.flags|=2048,ko(9,zx.bind(null,r,s,o,t),void 0,null),He===null)throw Error(G(349));_r&30||Ix(r,t,o)}return o}function Ix(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function zx(e,t,r,s){t.value=r,t.getSnapshot=s,Ux(t)&&Hx(e)}function Wx(e,t,r){return r(function(){Ux(t)&&Hx(e)})}function Ux(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qt(e,r)}catch{return!0}}function Hx(e){var t=Cn(e,1);t!==null&&Vt(t,e,1,-1)}function Pm(e){var t=tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:e},t.queue=e,e=e.dispatch=zN.bind(null,Se,e),[t.memoizedState,e]}function ko(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Vx(){return Tt().memoizedState}function Ua(e,t,r,s){var o=tn();Se.flags|=e,o.memoizedState=ko(1|t,r,void 0,s===void 0?null:s)}function Hi(e,t,r,s){var o=Tt();s=s===void 0?null:s;var a=void 0;if(Oe!==null){var i=Oe.memoizedState;if(a=i.destroy,s!==null&&eu(s,i.deps)){o.memoizedState=ko(t,r,a,s);return}}Se.flags|=e,o.memoizedState=ko(1|t,r,a,s)}function Tm(e,t){return Ua(8390656,8,e,t)}function ru(e,t){return Hi(2048,8,e,t)}function qx(e,t){return Hi(4,2,e,t)}function Jx(e,t){return Hi(4,4,e,t)}function Qx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gx(e,t,r){return r=r!=null?r.concat([e]):null,Hi(4,4,Qx.bind(null,t,e),r)}function su(){}function Kx(e,t){var r=Tt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&eu(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Yx(e,t){var r=Tt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&eu(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Xx(e,t,r){return _r&21?(qt(r,t)||(r=rx(),Se.lanes|=r,Er|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=r)}function $N(e,t){var r=fe;fe=r!==0&&4>r?r:4,e(!0);var s=Gl.transition;Gl.transition={};try{e(!1),t()}finally{fe=r,Gl.transition=s}}function Zx(){return Tt().memoizedState}function IN(e,t,r){var s=Yn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},eh(e))th(t,r);else if(r=Mx(e,t,r,s),r!==null){var o=rt();Vt(r,e,s,o),nh(r,t,s)}}function zN(e,t,r){var s=Yn(e),o={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(eh(e))th(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(o.hasEagerState=!0,o.eagerState=l,qt(l,i)){var d=t.interleaved;d===null?(o.next=o,Gc(t)):(o.next=d.next,d.next=o),t.interleaved=o;return}}catch{}finally{}r=Mx(e,t,o,s),r!==null&&(o=rt(),Vt(r,e,s,o),nh(r,t,s))}}function eh(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function th(e,t){eo=bi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function nh(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Mc(e,r)}}var ji={readContext:Pt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},WN={readContext:Pt,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:Tm,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ua(4194308,4,Qx.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var r=tn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=tn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=IN.bind(null,Se,e),[s.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:Pm,useDebugValue:su,useDeferredValue:function(e){return tn().memoizedState=e},useTransition:function(){var e=Pm(!1),t=e[0];return e=$N.bind(null,e[1]),tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Se,o=tn();if(ke){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),He===null)throw Error(G(349));_r&30||Ix(s,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,Tm(Wx.bind(null,s,a,e),[e]),s.flags|=2048,ko(9,zx.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=tn(),t=He.identifierPrefix;if(ke){var r=kn,s=jn;r=(s&~(1<<32-Ht(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=bo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=RN++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},UN={readContext:Pt,useCallback:Kx,useContext:Pt,useEffect:ru,useImperativeHandle:Gx,useInsertionEffect:qx,useLayoutEffect:Jx,useMemo:Yx,useReducer:Kl,useRef:Vx,useState:function(){return Kl(jo)},useDebugValue:su,useDeferredValue:function(e){var t=Tt();return Xx(t,Oe.memoizedState,e)},useTransition:function(){var e=Kl(jo)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Rx,useSyncExternalStore:$x,useId:Zx,unstable_isNewReconciler:!1},HN={readContext:Pt,useCallback:Kx,useContext:Pt,useEffect:ru,useImperativeHandle:Gx,useInsertionEffect:qx,useLayoutEffect:Jx,useMemo:Yx,useReducer:Yl,useRef:Vx,useState:function(){return Yl(jo)},useDebugValue:su,useDeferredValue:function(e){var t=Tt();return Oe===null?t.memoizedState=e:Xx(t,Oe.memoizedState,e)},useTransition:function(){var e=Yl(jo)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Rx,useSyncExternalStore:$x,useId:Zx,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Vd(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ce({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vi={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=rt(),o=Yn(e),a=wn(s,o);a.payload=t,r!=null&&(a.callback=r),t=Gn(e,a,o),t!==null&&(Vt(t,e,o,s),za(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=rt(),o=Yn(e),a=wn(s,o);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Gn(e,a,o),t!==null&&(Vt(t,e,o,s),za(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=rt(),s=Yn(e),o=wn(r,s);o.tag=2,t!=null&&(o.callback=t),t=Gn(e,o,s),t!==null&&(Vt(t,e,s,r),za(t,e,s))}};function Bm(e,t,r,s,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!fo(r,s)||!fo(o,a):!0}function rh(e,t,r){var s=!1,o=tr,a=t.contextType;return typeof a=="object"&&a!==null?a=Pt(a):(o=mt(t)?Sr:tt.current,s=t.contextTypes,a=(s=s!=null)?xs(e,o):tr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Lm(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function qd(e,t,r,s){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Kc(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=Pt(a):(a=mt(t)?Sr:tt.current,o.context=xs(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Vd(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Vi.enqueueReplaceState(o,o.state,null),vi(e,r,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ys(e,t){try{var r="",s=t;do r+=vw(s),s=s.return;while(s);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Xl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Jd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var VN=typeof WeakMap=="function"?WeakMap:Map;function sh(e,t,r){r=wn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){wi||(wi=!0,rc=s),Jd(e,t)},r}function oh(e,t,r){r=wn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;r.payload=function(){return s(o)},r.callback=function(){Jd(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Jd(e,t),typeof s!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Mm(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new VN;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(r)||(o.add(r),e=o5.bind(null,e,t,r),t.then(e,e))}function Om(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fm(e,t,r,s,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wn(-1,1),t.tag=2,Gn(r,t,1))),r.lanes|=1),e)}var qN=Dn.ReactCurrentOwner,lt=!1;function nt(e,t,r,s){t.child=e===null?Lx(t,null,r,s):gs(t,e.child,r,s)}function Rm(e,t,r,s,o){r=r.render;var a=t.ref;return ls(t,o),s=tu(e,t,r,s,a,o),r=nu(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(ke&&r&&Uc(t),t.flags|=1,nt(e,t,s,o),t.child)}function $m(e,t,r,s,o){if(e===null){var a=r.type;return typeof a=="function"&&!mu(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,ah(e,t,a,s,o)):(e=Ja(r.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:fo,r(i,s)&&e.ref===t.ref)return _n(e,t,o)}return t.flags|=1,e=Xn(a,s),e.ref=t.ref,e.return=t,t.child=e}function ah(e,t,r,s,o){if(e!==null){var a=e.memoizedProps;if(fo(a,s)&&e.ref===t.ref)if(lt=!1,t.pendingProps=s=a,(e.lanes&o)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,_n(e,t,o)}return Qd(e,t,r,s,o)}function ih(e,t,r){var s=t.pendingProps,o=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(ns,gt),gt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(ns,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,ge(ns,gt),gt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,ge(ns,gt),gt|=s;return nt(e,t,o,r),t.child}function lh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Qd(e,t,r,s,o){var a=mt(r)?Sr:tt.current;return a=xs(t,a),ls(t,o),r=tu(e,t,r,s,a,o),s=nu(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(ke&&s&&Uc(t),t.flags|=1,nt(e,t,r,o),t.child)}function Im(e,t,r,s,o){if(mt(r)){var a=!0;pi(t)}else a=!1;if(ls(t,o),t.stateNode===null)Ha(e,t),rh(t,r,s),qd(t,r,s,o),s=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var d=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=mt(r)?Sr:tt.current,u=xs(t,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||d!==u)&&Lm(t,i,s,u),$n=!1;var p=t.memoizedState;i.state=p,vi(t,s,i,o),d=t.memoizedState,l!==s||p!==d||ut.current||$n?(typeof c=="function"&&(Vd(t,r,c,s),d=t.memoizedState),(l=$n||Bm(t,r,l,s,p,d,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),i.props=s,i.state=d,i.context=u,s=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Ox(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:zt(t.type,l),i.props=u,f=t.pendingProps,p=i.context,d=r.contextType,typeof d=="object"&&d!==null?d=Pt(d):(d=mt(r)?Sr:tt.current,d=xs(t,d));var w=r.getDerivedStateFromProps;(c=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||p!==d)&&Lm(t,i,s,d),$n=!1,p=t.memoizedState,i.state=p,vi(t,s,i,o);var m=t.memoizedState;l!==f||p!==m||ut.current||$n?(typeof w=="function"&&(Vd(t,r,w,s),m=t.memoizedState),(u=$n||Bm(t,r,u,s,p,m,d)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,m,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,m,d)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),i.props=s,i.state=m,i.context=d,s=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return Gd(e,t,r,s,a,o)}function Gd(e,t,r,s,o,a){lh(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return o&&Sm(t,r,!1),_n(e,t,a);s=t.stateNode,qN.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=gs(t,e.child,null,a),t.child=gs(t,null,l,a)):nt(e,t,l,a),t.memoizedState=s.state,o&&Sm(t,r,!0),t.child}function dh(e){var t=e.stateNode;t.pendingContext?Nm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nm(e,t.context,!1),Yc(e,t.containerInfo)}function zm(e,t,r,s,o){return hs(),Vc(o),t.flags|=256,nt(e,t,r,s),t.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Yd(e){return{baseLanes:e,cachePool:null,transitions:null}}function ch(e,t,r){var s=t.pendingProps,o=Ne.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ge(Ne,o&1),e===null)return Ud(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Qi(i,s,0,null),e=wr(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Yd(r),t.memoizedState=Kd,e):ou(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return JN(e,t,i,s,l,o,r);if(a){a=s.fallback,i=t.mode,o=e.child,l=o.sibling;var d={mode:"hidden",children:s.children};return!(i&1)&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=Xn(o,d),s.subtreeFlags=o.subtreeFlags&14680064),l!==null?a=Xn(l,a):(a=wr(a,i,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?Yd(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Kd,s}return a=e.child,e=a.sibling,s=Xn(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function ou(e,t){return t=Qi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wa(e,t,r,s){return s!==null&&Vc(s),gs(t,e.child,null,r),e=ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JN(e,t,r,s,o,a,i){if(r)return t.flags&256?(t.flags&=-257,s=Xl(Error(G(422))),wa(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,o=t.mode,s=Qi({mode:"visible",children:s.children},o,0,null),a=wr(a,o,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&gs(t,e.child,null,i),t.child.memoizedState=Yd(i),t.memoizedState=Kd,a);if(!(t.mode&1))return wa(e,t,i,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(G(419)),s=Xl(a,s,void 0),wa(e,t,i,s)}if(l=(i&e.childLanes)!==0,lt||l){if(s=He,s!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Cn(e,o),Vt(s,e,o,-1))}return uu(),s=Xl(Error(G(421))),wa(e,t,i,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=a5.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,vt=Qn(o.nextSibling),yt=t,ke=!0,Ut=null,e!==null&&(_t[Et++]=jn,_t[Et++]=kn,_t[Et++]=Cr,jn=e.id,kn=e.overflow,Cr=t),t=ou(t,s.children),t.flags|=4096,t)}function Wm(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Hd(e.return,t,r)}function Zl(e,t,r,s,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=o)}function uh(e,t,r){var s=t.pendingProps,o=s.revealOrder,a=s.tail;if(nt(e,t,s.children,r),s=Ne.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wm(e,r,t);else if(e.tag===19)Wm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ge(Ne,s),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&yi(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Zl(t,!1,o,r,a);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&yi(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Zl(t,!0,r,null,a);break;case"together":Zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _n(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Er|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=Xn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Xn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function QN(e,t,r){switch(t.tag){case 3:dh(t),hs();break;case 5:Fx(t);break;case 1:mt(t.type)&&pi(t);break;case 4:Yc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;ge(hi,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ge(Ne,Ne.current&1),t.flags|=128,null):r&t.child.childLanes?ch(e,t,r):(ge(Ne,Ne.current&1),e=_n(e,t,r),e!==null?e.sibling:null);ge(Ne,Ne.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return uh(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ge(Ne,Ne.current),s)break;return null;case 22:case 23:return t.lanes=0,ih(e,t,r)}return _n(e,t,r)}var mh,Xd,ph,fh;mh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xd=function(){};ph=function(e,t,r,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,yr(ln.current);var a=null;switch(r){case"input":o=bd(e,o),s=bd(e,s),a=[];break;case"select":o=Ce({},o,{value:void 0}),s=Ce({},s,{value:void 0}),a=[];break;case"textarea":o=wd(e,o),s=wd(e,s),a=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ui)}Sd(r,s);var i;r=null;for(u in o)if(!s.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ao.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var d=s[u];if(l=o!=null?o[u]:void 0,s.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in d)d.hasOwnProperty(i)&&l[i]!==d[i]&&(r||(r={}),r[i]=d[i])}else r||(a||(a=[]),a.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(a=a||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ao.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&ye("scroll",e),a||l===d||(a=[])):(a=a||[]).push(u,d))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};fh=function(e,t,r,s){r!==s&&(t.flags|=4)};function $s(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function GN(e,t,r){var s=t.pendingProps;switch(Hc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return mt(t.type)&&mi(),Xe(t),null;case 3:return s=t.stateNode,vs(),be(ut),be(tt),Zc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ja(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(ac(Ut),Ut=null))),Xd(e,t),Xe(t),null;case 5:Xc(t);var o=yr(yo.current);if(r=t.type,e!==null&&t.stateNode!=null)ph(e,t,r,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(G(166));return Xe(t),null}if(e=yr(ln.current),ja(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[on]=t,s[go]=a,e=(t.mode&1)!==0,r){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(o=0;o<Hs.length;o++)ye(Hs[o],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":Y0(s,a),ye("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},ye("invalid",s);break;case"textarea":Z0(s,a),ye("invalid",s)}Sd(r,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&ba(s.textContent,l,e),o=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ba(s.textContent,l,e),o=["children",""+l]):ao.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ye("scroll",s)}switch(r){case"input":ma(s),X0(s,a,!0);break;case"textarea":ma(s),em(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=ui)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[on]=t,e[go]=s,mh(e,t,!1,!1),t.stateNode=e;e:{switch(i=Cd(r,s),r){case"dialog":ye("cancel",e),ye("close",e),o=s;break;case"iframe":case"object":case"embed":ye("load",e),o=s;break;case"video":case"audio":for(o=0;o<Hs.length;o++)ye(Hs[o],e);o=s;break;case"source":ye("error",e),o=s;break;case"img":case"image":case"link":ye("error",e),ye("load",e),o=s;break;case"details":ye("toggle",e),o=s;break;case"input":Y0(e,s),o=bd(e,s),ye("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=Ce({},s,{value:void 0}),ye("invalid",e);break;case"textarea":Z0(e,s),o=wd(e,s),ye("invalid",e);break;default:o=s}Sd(r,o),l=o;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="style"?Vf(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Uf(e,d)):a==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&io(e,d):typeof d=="number"&&io(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ao.hasOwnProperty(a)?d!=null&&a==="onScroll"&&ye("scroll",e):d!=null&&Dc(e,a,d,i))}switch(r){case"input":ma(e),X0(e,s,!1);break;case"textarea":ma(e),em(e);break;case"option":s.value!=null&&e.setAttribute("value",""+er(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?ss(e,!!s.multiple,a,!1):s.defaultValue!=null&&ss(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ui)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)fh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(G(166));if(r=yr(yo.current),yr(ln.current),ja(t)){if(s=t.stateNode,r=t.memoizedProps,s[on]=t,(a=s.nodeValue!==r)&&(e=yt,e!==null))switch(e.tag){case 3:ba(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[on]=t,t.stateNode=s}return Xe(t),null;case 13:if(be(Ne),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&vt!==null&&t.mode&1&&!(t.flags&128))Tx(),hs(),t.flags|=98560,a=!1;else if(a=ja(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(G(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(G(317));a[on]=t}else hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),a=!1}else Ut!==null&&(ac(Ut),Ut=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Fe===0&&(Fe=3):uu())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return vs(),Xd(e,t),e===null&&xo(t.stateNode.containerInfo),Xe(t),null;case 10:return Qc(t.type._context),Xe(t),null;case 17:return mt(t.type)&&mi(),Xe(t),null;case 19:if(be(Ne),a=t.memoizedState,a===null)return Xe(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)$s(a,!1);else{if(Fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=yi(e),i!==null){for(t.flags|=128,$s(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ge(Ne,Ne.current&1|2),t.child}e=e.sibling}a.tail!==null&&Te()>bs&&(t.flags|=128,s=!0,$s(a,!1),t.lanes=4194304)}else{if(!s)if(e=yi(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$s(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ke)return Xe(t),null}else 2*Te()-a.renderingStartTime>bs&&r!==1073741824&&(t.flags|=128,s=!0,$s(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Te(),t.sibling=null,r=Ne.current,ge(Ne,s?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return cu(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?gt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function KN(e,t){switch(Hc(t),t.tag){case 1:return mt(t.type)&&mi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vs(),be(ut),be(tt),Zc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xc(t),null;case 13:if(be(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ne),null;case 4:return vs(),null;case 10:return Qc(t.type._context),null;case 22:case 23:return cu(),null;case 24:return null;default:return null}}var Na=!1,Ze=!1,YN=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ts(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){De(e,t,s)}else r.current=null}function Zd(e,t,r){try{r()}catch(s){De(e,t,s)}}var Um=!1;function XN(e,t){if(Od=li,e=yx(),Wc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var o=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,d=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var w;f!==r||o!==0&&f.nodeType!==3||(l=i+o),f!==a||s!==0&&f.nodeType!==3||(d=i+s),f.nodeType===3&&(i+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===e)break t;if(p===r&&++u===o&&(l=i),p===a&&++c===s&&(d=i),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}r=l===-1||d===-1?null:{start:l,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fd={focusedElem:e,selectionRange:r},li=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,h=m.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:zt(t.type,x),h);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(v){De(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return m=Um,Um=!1,m}function to(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&Zd(t,r,a)}o=o.next}while(o!==s)}}function qi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ec(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function xh(e){var t=e.alternate;t!==null&&(e.alternate=null,xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[on],delete t[go],delete t[Id],delete t[LN],delete t[MN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hh(e){return e.tag===5||e.tag===3||e.tag===4}function Hm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ui));else if(s!==4&&(e=e.child,e!==null))for(tc(e,t,r),e=e.sibling;e!==null;)tc(e,t,r),e=e.sibling}function nc(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(nc(e,t,r),e=e.sibling;e!==null;)nc(e,t,r),e=e.sibling}var qe=null,Wt=!1;function Fn(e,t,r){for(r=r.child;r!==null;)gh(e,t,r),r=r.sibling}function gh(e,t,r){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ri,r)}catch{}switch(r.tag){case 5:Ze||ts(r,t);case 6:var s=qe,o=Wt;qe=null,Fn(e,t,r),qe=s,Wt=o,qe!==null&&(Wt?(e=qe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qe.removeChild(r.stateNode));break;case 18:qe!==null&&(Wt?(e=qe,r=r.stateNode,e.nodeType===8?ql(e.parentNode,r):e.nodeType===1&&ql(e,r),mo(e)):ql(qe,r.stateNode));break;case 4:s=qe,o=Wt,qe=r.stateNode.containerInfo,Wt=!0,Fn(e,t,r),qe=s,Wt=o;break;case 0:case 11:case 14:case 15:if(!Ze&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Zd(r,t,i),o=o.next}while(o!==s)}Fn(e,t,r);break;case 1:if(!Ze&&(ts(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){De(r,t,l)}Fn(e,t,r);break;case 21:Fn(e,t,r);break;case 22:r.mode&1?(Ze=(s=Ze)||r.memoizedState!==null,Fn(e,t,r),Ze=s):Fn(e,t,r);break;default:Fn(e,t,r)}}function Vm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new YN),t.forEach(function(s){var o=i5.bind(null,e,s);r.has(s)||(r.add(s),s.then(o,o))})}}function It(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Wt=!1;break e;case 3:qe=l.stateNode.containerInfo,Wt=!0;break e;case 4:qe=l.stateNode.containerInfo,Wt=!0;break e}l=l.return}if(qe===null)throw Error(G(160));gh(a,i,o),qe=null,Wt=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(u){De(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vh(t,e),t=t.sibling}function vh(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),en(e),s&4){try{to(3,e,e.return),qi(3,e)}catch(x){De(e,e.return,x)}try{to(5,e,e.return)}catch(x){De(e,e.return,x)}}break;case 1:It(t,e),en(e),s&512&&r!==null&&ts(r,r.return);break;case 5:if(It(t,e),en(e),s&512&&r!==null&&ts(r,r.return),e.flags&32){var o=e.stateNode;try{io(o,"")}catch(x){De(e,e.return,x)}}if(s&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&If(o,a),Cd(l,i);var u=Cd(l,a);for(i=0;i<d.length;i+=2){var c=d[i],f=d[i+1];c==="style"?Vf(o,f):c==="dangerouslySetInnerHTML"?Uf(o,f):c==="children"?io(o,f):Dc(o,c,f,u)}switch(l){case"input":jd(o,a);break;case"textarea":zf(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?ss(o,!!a.multiple,w,!1):p!==!!a.multiple&&(a.defaultValue!=null?ss(o,!!a.multiple,a.defaultValue,!0):ss(o,!!a.multiple,a.multiple?[]:"",!1))}o[go]=a}catch(x){De(e,e.return,x)}}break;case 6:if(It(t,e),en(e),s&4){if(e.stateNode===null)throw Error(G(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(x){De(e,e.return,x)}}break;case 3:if(It(t,e),en(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{mo(t.containerInfo)}catch(x){De(e,e.return,x)}break;case 4:It(t,e),en(e);break;case 13:It(t,e),en(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(lu=Te())),s&4&&Vm(e);break;case 22:if(c=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(u=Ze)||c,It(t,e),Ze=u):It(t,e),en(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(ne=e,c=e.child;c!==null;){for(f=ne=c;ne!==null;){switch(p=ne,w=p.child,p.tag){case 0:case 11:case 14:case 15:to(4,p,p.return);break;case 1:ts(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(x){De(s,r,x)}}break;case 5:ts(p,p.return);break;case 22:if(p.memoizedState!==null){Jm(f);continue}}w!==null?(w.return=p,ne=w):Jm(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{o=f.stateNode,u?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,d=f.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=Hf("display",i))}catch(x){De(e,e.return,x)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){De(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:It(t,e),en(e),s&4&&Vm(e);break;case 21:break;default:It(t,e),en(e)}}function en(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(hh(r)){var s=r;break e}r=r.return}throw Error(G(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(io(o,""),s.flags&=-33);var a=Hm(e);nc(e,a,o);break;case 3:case 4:var i=s.stateNode.containerInfo,l=Hm(e);tc(e,l,i);break;default:throw Error(G(161))}}catch(d){De(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZN(e,t,r){ne=e,yh(e)}function yh(e,t,r){for(var s=(e.mode&1)!==0;ne!==null;){var o=ne,a=o.child;if(o.tag===22&&s){var i=o.memoizedState!==null||Na;if(!i){var l=o.alternate,d=l!==null&&l.memoizedState!==null||Ze;l=Na;var u=Ze;if(Na=i,(Ze=d)&&!u)for(ne=o;ne!==null;)i=ne,d=i.child,i.tag===22&&i.memoizedState!==null?Qm(o):d!==null?(d.return=i,ne=d):Qm(o);for(;a!==null;)ne=a,yh(a),a=a.sibling;ne=o,Na=l,Ze=u}qm(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,ne=a):qm(e)}}function qm(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||qi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ze)if(r===null)s.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:zt(t.type,r.memoizedProps);s.componentDidUpdate(o,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Am(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Am(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&mo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ze||t.flags&512&&ec(t)}catch(p){De(t,t.return,p)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Jm(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Qm(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qi(4,t)}catch(d){De(t,r,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(d){De(t,o,d)}}var a=t.return;try{ec(t)}catch(d){De(t,a,d)}break;case 5:var i=t.return;try{ec(t)}catch(d){De(t,i,d)}}}catch(d){De(t,t.return,d)}if(t===e){ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ne=l;break}ne=t.return}}var e5=Math.ceil,ki=Dn.ReactCurrentDispatcher,au=Dn.ReactCurrentOwner,At=Dn.ReactCurrentBatchConfig,ue=0,He=null,Le=null,Je=0,gt=0,ns=sr(0),Fe=0,wo=null,Er=0,Ji=0,iu=0,no=null,it=null,lu=0,bs=1/0,yn=null,wi=!1,rc=null,Kn=null,Sa=!1,Hn=null,Ni=0,ro=0,sc=null,Va=-1,qa=0;function rt(){return ue&6?Te():Va!==-1?Va:Va=Te()}function Yn(e){return e.mode&1?ue&2&&Je!==0?Je&-Je:FN.transition!==null?(qa===0&&(qa=rx()),qa):(e=fe,e!==0||(e=window.event,e=e===void 0?16:cx(e.type)),e):1}function Vt(e,t,r,s){if(50<ro)throw ro=0,sc=null,Error(G(185));Bo(e,r,s),(!(ue&2)||e!==He)&&(e===He&&(!(ue&2)&&(Ji|=r),Fe===4&&zn(e,Je)),pt(e,s),r===1&&ue===0&&!(t.mode&1)&&(bs=Te()+500,Ui&&or()))}function pt(e,t){var r=e.callbackNode;Fw(e,t);var s=ii(e,e===He?Je:0);if(s===0)r!==null&&rm(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&rm(r),t===1)e.tag===0?ON(Gm.bind(null,e)):Dx(Gm.bind(null,e)),TN(function(){!(ue&6)&&or()}),r=null;else{switch(sx(s)){case 1:r=Lc;break;case 4:r=tx;break;case 16:r=ai;break;case 536870912:r=nx;break;default:r=ai}r=_h(r,bh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function bh(e,t){if(Va=-1,qa=0,ue&6)throw Error(G(327));var r=e.callbackNode;if(ds()&&e.callbackNode!==r)return null;var s=ii(e,e===He?Je:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Si(e,s);else{t=s;var o=ue;ue|=2;var a=kh();(He!==e||Je!==t)&&(yn=null,bs=Te()+500,kr(e,t));do try{r5();break}catch(l){jh(e,l)}while(!0);Jc(),ki.current=a,ue=o,Le!==null?t=0:(He=null,Je=0,t=Fe)}if(t!==0){if(t===2&&(o=Pd(e),o!==0&&(s=o,t=oc(e,o))),t===1)throw r=wo,kr(e,0),zn(e,s),pt(e,Te()),r;if(t===6)zn(e,s);else{if(o=e.current.alternate,!(s&30)&&!t5(o)&&(t=Si(e,s),t===2&&(a=Pd(e),a!==0&&(s=a,t=oc(e,a))),t===1))throw r=wo,kr(e,0),zn(e,s),pt(e,Te()),r;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(G(345));case 2:pr(e,it,yn);break;case 3:if(zn(e,s),(s&130023424)===s&&(t=lu+500-Te(),10<t)){if(ii(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){rt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=$d(pr.bind(null,e,it,yn),t);break}pr(e,it,yn);break;case 4:if(zn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var i=31-Ht(s);a=1<<i,i=t[i],i>o&&(o=i),s&=~a}if(s=o,s=Te()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*e5(s/1960))-s,10<s){e.timeoutHandle=$d(pr.bind(null,e,it,yn),s);break}pr(e,it,yn);break;case 5:pr(e,it,yn);break;default:throw Error(G(329))}}}return pt(e,Te()),e.callbackNode===r?bh.bind(null,e):null}function oc(e,t){var r=no;return e.current.memoizedState.isDehydrated&&(kr(e,t).flags|=256),e=Si(e,t),e!==2&&(t=it,it=r,t!==null&&ac(t)),e}function ac(e){it===null?it=e:it.push.apply(it,e)}function t5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var o=r[s],a=o.getSnapshot;o=o.value;try{if(!qt(a(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(e,t){for(t&=~iu,t&=~Ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ht(t),s=1<<r;e[r]=-1,t&=~s}}function Gm(e){if(ue&6)throw Error(G(327));ds();var t=ii(e,0);if(!(t&1))return pt(e,Te()),null;var r=Si(e,t);if(e.tag!==0&&r===2){var s=Pd(e);s!==0&&(t=s,r=oc(e,s))}if(r===1)throw r=wo,kr(e,0),zn(e,t),pt(e,Te()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pr(e,it,yn),pt(e,Te()),null}function du(e,t){var r=ue;ue|=1;try{return e(t)}finally{ue=r,ue===0&&(bs=Te()+500,Ui&&or())}}function Dr(e){Hn!==null&&Hn.tag===0&&!(ue&6)&&ds();var t=ue;ue|=1;var r=At.transition,s=fe;try{if(At.transition=null,fe=1,e)return e()}finally{fe=s,At.transition=r,ue=t,!(ue&6)&&or()}}function cu(){gt=ns.current,be(ns)}function kr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PN(r)),Le!==null)for(r=Le.return;r!==null;){var s=r;switch(Hc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&mi();break;case 3:vs(),be(ut),be(tt),Zc();break;case 5:Xc(s);break;case 4:vs();break;case 13:be(Ne);break;case 19:be(Ne);break;case 10:Qc(s.type._context);break;case 22:case 23:cu()}r=r.return}if(He=e,Le=e=Xn(e.current,null),Je=gt=t,Fe=0,wo=null,iu=Ji=Er=0,it=no=null,vr!==null){for(t=0;t<vr.length;t++)if(r=vr[t],s=r.interleaved,s!==null){r.interleaved=null;var o=s.next,a=r.pending;if(a!==null){var i=a.next;a.next=o,s.next=i}r.pending=s}vr=null}return e}function jh(e,t){do{var r=Le;try{if(Jc(),Wa.current=ji,bi){for(var s=Se.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}bi=!1}if(_r=0,Ue=Oe=Se=null,eo=!1,bo=0,au.current=null,r===null||r.return===null){Fe=1,wo=t,Le=null;break}e:{var a=e,i=r.return,l=r,d=t;if(t=Je,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var w=Om(i);if(w!==null){w.flags&=-257,Fm(w,i,l,a,t),w.mode&1&&Mm(a,u,t),t=w,d=u;var m=t.updateQueue;if(m===null){var x=new Set;x.add(d),t.updateQueue=x}else m.add(d);break e}else{if(!(t&1)){Mm(a,u,t),uu();break e}d=Error(G(426))}}else if(ke&&l.mode&1){var h=Om(i);if(h!==null){!(h.flags&65536)&&(h.flags|=256),Fm(h,i,l,a,t),Vc(ys(d,l));break e}}a=d=ys(d,l),Fe!==4&&(Fe=2),no===null?no=[a]:no.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=sh(a,d,t);Dm(a,y);break e;case 1:l=d;var g=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Kn===null||!Kn.has(j)))){a.flags|=65536,t&=-t,a.lanes|=t;var v=oh(a,l,t);Dm(a,v);break e}}a=a.return}while(a!==null)}Nh(r)}catch(N){t=N,Le===r&&r!==null&&(Le=r=r.return);continue}break}while(!0)}function kh(){var e=ki.current;return ki.current=ji,e===null?ji:e}function uu(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(Er&268435455)&&!(Ji&268435455)||zn(He,Je)}function Si(e,t){var r=ue;ue|=2;var s=kh();(He!==e||Je!==t)&&(yn=null,kr(e,t));do try{n5();break}catch(o){jh(e,o)}while(!0);if(Jc(),ue=r,ki.current=s,Le!==null)throw Error(G(261));return He=null,Je=0,Fe}function n5(){for(;Le!==null;)wh(Le)}function r5(){for(;Le!==null&&!Ew();)wh(Le)}function wh(e){var t=Ch(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Nh(e):Le=t,au.current=null}function Nh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=KN(r,t),r!==null){r.flags&=32767,Le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Le=null;return}}else if(r=GN(r,t,gt),r!==null){Le=r;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Fe===0&&(Fe=5)}function pr(e,t,r){var s=fe,o=At.transition;try{At.transition=null,fe=1,s5(e,t,r,s)}finally{At.transition=o,fe=s}return null}function s5(e,t,r,s){do ds();while(Hn!==null);if(ue&6)throw Error(G(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Rw(e,a),e===He&&(Le=He=null,Je=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sa||(Sa=!0,_h(ai,function(){return ds(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=At.transition,At.transition=null;var i=fe;fe=1;var l=ue;ue|=4,au.current=null,XN(e,r),vh(r,e),NN(Fd),li=!!Od,Fd=Od=null,e.current=r,ZN(r),Dw(),ue=l,fe=i,At.transition=a}else e.current=r;if(Sa&&(Sa=!1,Hn=e,Ni=o),a=e.pendingLanes,a===0&&(Kn=null),Tw(r.stateNode),pt(e,Te()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],s(o.value,{componentStack:o.stack,digest:o.digest});if(wi)throw wi=!1,e=rc,rc=null,e;return Ni&1&&e.tag!==0&&ds(),a=e.pendingLanes,a&1?e===sc?ro++:(ro=0,sc=e):ro=0,or(),null}function ds(){if(Hn!==null){var e=sx(Ni),t=At.transition,r=fe;try{if(At.transition=null,fe=16>e?16:e,Hn===null)var s=!1;else{if(e=Hn,Hn=null,Ni=0,ue&6)throw Error(G(331));var o=ue;for(ue|=4,ne=e.current;ne!==null;){var a=ne,i=a.child;if(ne.flags&16){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(ne=u;ne!==null;){var c=ne;switch(c.tag){case 0:case 11:case 15:to(8,c,a)}var f=c.child;if(f!==null)f.return=c,ne=f;else for(;ne!==null;){c=ne;var p=c.sibling,w=c.return;if(xh(c),c===u){ne=null;break}if(p!==null){p.return=w,ne=p;break}ne=w}}}var m=a.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var h=x.sibling;x.sibling=null,x=h}while(x!==null)}}ne=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,ne=i;else e:for(;ne!==null;){if(a=ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:to(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,ne=y;break e}ne=a.return}}var g=e.current;for(ne=g;ne!==null;){i=ne;var j=i.child;if(i.subtreeFlags&2064&&j!==null)j.return=i,ne=j;else e:for(i=g;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qi(9,l)}}catch(N){De(l,l.return,N)}if(l===i){ne=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,ne=v;break e}ne=l.return}}if(ue=o,or(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ri,e)}catch{}s=!0}return s}finally{fe=r,At.transition=t}}return!1}function Km(e,t,r){t=ys(r,t),t=sh(e,t,1),e=Gn(e,t,1),t=rt(),e!==null&&(Bo(e,1,t),pt(e,t))}function De(e,t,r){if(e.tag===3)Km(e,e,r);else for(;t!==null;){if(t.tag===3){Km(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Kn===null||!Kn.has(s))){e=ys(r,e),e=oh(t,e,1),t=Gn(t,e,1),e=rt(),t!==null&&(Bo(t,1,e),pt(t,e));break}}t=t.return}}function o5(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(Je&r)===r&&(Fe===4||Fe===3&&(Je&130023424)===Je&&500>Te()-lu?kr(e,0):iu|=r),pt(e,t)}function Sh(e,t){t===0&&(e.mode&1?(t=xa,xa<<=1,!(xa&130023424)&&(xa=4194304)):t=1);var r=rt();e=Cn(e,t),e!==null&&(Bo(e,t,r),pt(e,r))}function a5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sh(e,r)}function i5(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(t),Sh(e,r)}var Ch;Ch=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)lt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lt=!1,QN(e,t,r);lt=!!(e.flags&131072)}else lt=!1,ke&&t.flags&1048576&&Ax(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ha(e,t),e=t.pendingProps;var o=xs(t,tt.current);ls(t,r),o=tu(null,t,s,e,o,r);var a=nu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(s)?(a=!0,pi(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Kc(t),o.updater=Vi,t.stateNode=o,o._reactInternals=t,qd(t,s,e,r),t=Gd(null,t,s,!0,a,r)):(t.tag=0,ke&&a&&Uc(t),nt(null,t,o,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=d5(s),e=zt(s,e),o){case 0:t=Qd(null,t,s,e,r);break e;case 1:t=Im(null,t,s,e,r);break e;case 11:t=Rm(null,t,s,e,r);break e;case 14:t=$m(null,t,s,zt(s.type,e),r);break e}throw Error(G(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:zt(s,o),Qd(e,t,s,o,r);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:zt(s,o),Im(e,t,s,o,r);case 3:e:{if(dh(t),e===null)throw Error(G(387));s=t.pendingProps,a=t.memoizedState,o=a.element,Ox(e,t),vi(t,s,null,r);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=ys(Error(G(423)),t),t=zm(e,t,s,r,o);break e}else if(s!==o){o=ys(Error(G(424)),t),t=zm(e,t,s,r,o);break e}else for(vt=Qn(t.stateNode.containerInfo.firstChild),yt=t,ke=!0,Ut=null,r=Lx(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hs(),s===o){t=_n(e,t,r);break e}nt(e,t,s,r)}t=t.child}return t;case 5:return Fx(t),e===null&&Ud(t),s=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,Rd(s,o)?i=null:a!==null&&Rd(s,a)&&(t.flags|=32),lh(e,t),nt(e,t,i,r),t.child;case 6:return e===null&&Ud(t),null;case 13:return ch(e,t,r);case 4:return Yc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=gs(t,null,s,r):nt(e,t,s,r),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:zt(s,o),Rm(e,t,s,o,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,ge(hi,s._currentValue),s._currentValue=i,a!==null)if(qt(a.value,i)){if(a.children===o.children&&!ut.current){t=_n(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var d=l.firstContext;d!==null;){if(d.context===s){if(a.tag===1){d=wn(-1,r&-r),d.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?d.next=d:(d.next=c.next,c.next=d),u.pending=d}}a.lanes|=r,d=a.alternate,d!==null&&(d.lanes|=r),Hd(a.return,r,t),l.lanes|=r;break}d=d.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(G(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Hd(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}nt(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,ls(t,r),o=Pt(o),s=s(o),t.flags|=1,nt(e,t,s,r),t.child;case 14:return s=t.type,o=zt(s,t.pendingProps),o=zt(s.type,o),$m(e,t,s,o,r);case 15:return ah(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:zt(s,o),Ha(e,t),t.tag=1,mt(s)?(e=!0,pi(t)):e=!1,ls(t,r),rh(t,s,o),qd(t,s,o,r),Gd(null,t,s,!0,e,r);case 19:return uh(e,t,r);case 22:return ih(e,t,r)}throw Error(G(156,t.tag))};function _h(e,t){return ex(e,t)}function l5(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,r,s){return new l5(e,t,r,s)}function mu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function d5(e){if(typeof e=="function")return mu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pc)return 11;if(e===Tc)return 14}return 2}function Xn(e,t){var r=e.alternate;return r===null?(r=Dt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ja(e,t,r,s,o,a){var i=2;if(s=e,typeof e=="function")mu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case qr:return wr(r.children,o,a,t);case Ac:i=8,o|=8;break;case hd:return e=Dt(12,r,t,o|2),e.elementType=hd,e.lanes=a,e;case gd:return e=Dt(13,r,t,o),e.elementType=gd,e.lanes=a,e;case vd:return e=Dt(19,r,t,o),e.elementType=vd,e.lanes=a,e;case Ff:return Qi(r,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mf:i=10;break e;case Of:i=9;break e;case Pc:i=11;break e;case Tc:i=14;break e;case Rn:i=16,s=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Dt(i,r,t,o),t.elementType=e,t.type=s,t.lanes=a,t}function wr(e,t,r,s){return e=Dt(7,e,s,t),e.lanes=r,e}function Qi(e,t,r,s){return e=Dt(22,e,s,t),e.elementType=Ff,e.lanes=r,e.stateNode={isHidden:!1},e}function ed(e,t,r){return e=Dt(6,e,null,t),e.lanes=r,e}function td(e,t,r){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function c5(e,t,r,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ml(0),this.expirationTimes=Ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function pu(e,t,r,s,o,a,i,l,d){return e=new c5(e,t,r,l,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Dt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kc(a),e}function u5(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Eh(e){if(!e)return tr;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(mt(r))return Ex(e,r,t)}return t}function Dh(e,t,r,s,o,a,i,l,d){return e=pu(r,s,!0,e,o,a,i,l,d),e.context=Eh(null),r=e.current,s=rt(),o=Yn(r),a=wn(s,o),a.callback=t??null,Gn(r,a,o),e.current.lanes=o,Bo(e,o,s),pt(e,s),e}function Gi(e,t,r,s){var o=t.current,a=rt(),i=Yn(o);return r=Eh(r),t.context===null?t.context=r:t.pendingContext=r,t=wn(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Gn(o,t,i),e!==null&&(Vt(e,o,i,a),za(e,o,i)),i}function Ci(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ym(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function fu(e,t){Ym(e,t),(e=e.alternate)&&Ym(e,t)}function m5(){return null}var Ah=typeof reportError=="function"?reportError:function(e){console.error(e)};function xu(e){this._internalRoot=e}Ki.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Gi(e,t,null,null)};Ki.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dr(function(){Gi(null,e,null,null)}),t[Sn]=null}};function Ki(e){this._internalRoot=e}Ki.prototype.unstable_scheduleHydration=function(e){if(e){var t=ix();e={blockedOn:null,target:e,priority:t};for(var r=0;r<In.length&&t!==0&&t<In[r].priority;r++);In.splice(r,0,e),r===0&&dx(e)}};function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xm(){}function p5(e,t,r,s,o){if(o){if(typeof s=="function"){var a=s;s=function(){var u=Ci(i);a.call(u)}}var i=Dh(t,s,e,0,null,!1,!1,"",Xm);return e._reactRootContainer=i,e[Sn]=i.current,xo(e.nodeType===8?e.parentNode:e),Dr(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var l=s;s=function(){var u=Ci(d);l.call(u)}}var d=pu(e,0,!1,null,null,!1,!1,"",Xm);return e._reactRootContainer=d,e[Sn]=d.current,xo(e.nodeType===8?e.parentNode:e),Dr(function(){Gi(t,d,r,s)}),d}function Xi(e,t,r,s,o){var a=r._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var l=o;o=function(){var d=Ci(i);l.call(d)}}Gi(t,i,e,o)}else i=p5(r,t,e,o,s);return Ci(i)}ox=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Us(t.pendingLanes);r!==0&&(Mc(t,r|1),pt(t,Te()),!(ue&6)&&(bs=Te()+500,or()))}break;case 13:Dr(function(){var s=Cn(e,1);if(s!==null){var o=rt();Vt(s,e,1,o)}}),fu(e,1)}};Oc=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var r=rt();Vt(t,e,134217728,r)}fu(e,134217728)}};ax=function(e){if(e.tag===13){var t=Yn(e),r=Cn(e,t);if(r!==null){var s=rt();Vt(r,e,t,s)}fu(e,t)}};ix=function(){return fe};lx=function(e,t){var r=fe;try{return fe=e,t()}finally{fe=r}};Ed=function(e,t,r){switch(t){case"input":if(jd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var o=Wi(s);if(!o)throw Error(G(90));$f(s),jd(s,o)}}}break;case"textarea":zf(e,r);break;case"select":t=r.value,t!=null&&ss(e,!!r.multiple,t,!1)}};Qf=du;Gf=Dr;var f5={usingClientEntryPoint:!1,Events:[Mo,Kr,Wi,qf,Jf,du]},Is={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x5={bundleType:Is.bundleType,version:Is.version,rendererPackageName:Is.rendererPackageName,rendererConfig:Is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xf(e),e===null?null:e.stateNode},findFiberByHostInstance:Is.findFiberByHostInstance||m5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ca.isDisabled&&Ca.supportsFiber)try{Ri=Ca.inject(x5),an=Ca}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f5;jt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hu(t))throw Error(G(200));return u5(e,t,null,r)};jt.createRoot=function(e,t){if(!hu(e))throw Error(G(299));var r=!1,s="",o=Ah;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=pu(e,1,!1,null,null,r,!1,s,o),e[Sn]=t.current,xo(e.nodeType===8?e.parentNode:e),new xu(t)};jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Xf(t),e=e===null?null:e.stateNode,e};jt.flushSync=function(e){return Dr(e)};jt.hydrate=function(e,t,r){if(!Yi(t))throw Error(G(200));return Xi(null,e,t,!0,r)};jt.hydrateRoot=function(e,t,r){if(!hu(e))throw Error(G(405));var s=r!=null&&r.hydratedSources||null,o=!1,a="",i=Ah;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Dh(t,null,e,1,r??null,o,!1,a,i),e[Sn]=t.current,xo(e),s)for(e=0;e<s.length;e++)r=s[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Ki(t)};jt.render=function(e,t,r){if(!Yi(t))throw Error(G(200));return Xi(null,e,t,!1,r)};jt.unmountComponentAtNode=function(e){if(!Yi(e))throw Error(G(40));return e._reactRootContainer?(Dr(function(){Xi(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};jt.unstable_batchedUpdates=du;jt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Yi(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Xi(e,t,r,!1,s)};jt.version="18.3.1-next-f1338f8080-20240426";function Ph(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ph)}catch(e){console.error(e)}}Ph(),Pf.exports=jt;var h5=Pf.exports,Th,Zm=h5;Th=Zm.createRoot,Zm.hydrateRoot;ij({resolve:e=>Object.assign({"../pages/Academy/Index.jsx":$g,"../pages/Design/ClientPortal.jsx":zg,"../pages/Design/Index.jsx":Zg,"../pages/Foundation/AppIndex.jsx":dj,"../pages/Lab/Index.jsx":yk,"../pages/Plants/Index.jsx":uw})[`../pages/${e}.jsx`],setup({el:e,App:t,props:r}){Th(e).render(Ag.createElement(t,r))}});
